module.exports=[15305,(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,o={},l={RequestCookies:()=>g,ResponseCookies:()=>m,parseCookie:()=>d,parseSetCookie:()=>h,stringifyCookie:()=>u};for(var c in l)n(o,c,{get:l[c],enumerable:!0});function u(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),n=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?n:`${n}; ${r.join("; ")}`}function d(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,i]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=i?i:"true"))}catch{}}return t}function h(e){if(!e)return;let[[t,r],...n]=d(e),{domain:i,expires:s,httponly:a,maxage:o,path:l,samesite:c,secure:u,partitioned:h,priority:g}=Object.fromEntries(n.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var m,y,b={name:t,value:decodeURIComponent(r),domain:i,...s&&{expires:new Date(s)},...a&&{httpOnly:!0},..."string"==typeof o&&{maxAge:Number(o)},path:l,...c&&{sameSite:f.includes(m=(m=c).toLowerCase())?m:void 0},...u&&{secure:!0},...g&&{priority:p.includes(y=(y=g).toLowerCase())?y:void 0},...h&&{partitioned:!0}};let e={};for(let t in b)b[t]&&(e[t]=b[t]);return e}}t.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of s(t))a.call(e,l)||l===r||n(e,l,{get:()=>t[l],enumerable:!(o=i(t,l))||o.enumerable});return e})(n({},"__esModule",{value:!0}),o);var f=["strict","lax","none"],p=["low","medium","high"],g=class{constructor(e){this._parsed=new Map,this._headers=e;const t=e.get("cookie");if(t)for(const[e,r]of d(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>u(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>u(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},m=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;const i=null!=(n=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?n:[];for(const e of Array.isArray(i)?i:function(e){if(!e)return[];var t,r,n,i,s,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,s=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(s=!0,o=i,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!s||o>=e.length)&&a.push(e.substring(t,e.length))}return a}(i)){const t=h(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,i=this._parsed;return i.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=u(r);t.append("set-cookie",e)}}(i,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(u).join("; ")}}},34474,e=>{"use strict";function t(e){return Symbol.for(e)}var r,n,i,s,a,o,l,c,u,d,h,f,p,g=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var i=new e(r._currentContext);return i._currentContext.set(t,n),i},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}},m=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},y=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},b=function(){function e(){}return e.prototype.active=function(){return g},e.prototype.with=function(e,t,r){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return t.call.apply(t,y([r],m(n),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),w="object"==typeof globalThis?globalThis:e.g,v="1.9.0",_=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,S=function(e){var t=new Set([e]),r=new Set,n=e.match(_);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=i.prerelease)return function(t){return t===e};function s(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(_);if(!n)return s(e);var a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=a.prerelease||i.major!==a.major)return s(e);if(0===i.major)return i.minor===a.minor&&i.patch<=a.patch?(t.add(e),!0):s(e);return i.minor<=a.minor?(t.add(e),!0):s(e)}}(v),E=Symbol.for("opentelemetry.js.api."+v.split(".")[0]);function x(e,t,r,n){void 0===n&&(n=!1);var i,s=w[E]=null!=(i=w[E])?i:{version:v};if(!n&&s[e]){var a=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(a.stack||a.message),!1}if(s.version!==v){var a=Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+v);return r.error(a.stack||a.message),!1}return s[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+v+"."),!0}function T(e){var t,r,n=null==(t=w[E])?void 0:t.version;if(n&&S(n))return null==(r=w[E])?void 0:r[e]}function P(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+v+".");var r=w[E];r&&delete r[e]}var A=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},O=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},C=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("verbose",this._namespace,e)},e}();function R(e,t,r){var n=T("diag");if(n)return r.unshift(t),n[e].apply(n,O([],A(r),!1))}(l=r||(r={}))[l.NONE=0]="NONE",l[l.ERROR=30]="ERROR",l[l.WARN=50]="WARN",l[l.INFO=60]="INFO",l[l.DEBUG=70]="DEBUG",l[l.VERBOSE=80]="VERBOSE",l[l.ALL=9999]="ALL";var k=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},N=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},I=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=T("diag");if(n)return n[e].apply(n,N([],k(t),!1))}}var t=this;t.setLogger=function(e,n){if(void 0===n&&(n={logLevel:r.INFO}),e===t){var i,s,a,o=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(i=o.stack)?i:o.message),!1}"number"==typeof n&&(n={logLevel:n});var l=T("diag"),c=function(e,t){function n(r,n){var i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<r.NONE?e=r.NONE:e>r.ALL&&(e=r.ALL),t=t||{},{error:n("error",r.ERROR),warn:n("warn",r.WARN),info:n("info",r.INFO),debug:n("debug",r.DEBUG),verbose:n("verbose",r.VERBOSE)}}(null!=(s=n.logLevel)?s:r.INFO,e);if(l&&!n.suppressOverrideMessage){var u=null!=(a=Error().stack)?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+u),c.warn("Current logger will overwrite one already registered from "+u)}return x("diag",c,t,!0)},t.disable=function(){P("diag",t)},t.createComponentLogger=function(e){return new C(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),$=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},j=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},D="context",L=new b,M=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return x(D,e,I.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(n=this._getContextManager()).with.apply(n,j([e,t,r],$(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return T(D)||L},e.prototype.disable=function(){this._getContextManager().disable(),P(D,I.instance())},e}(),U=M.getInstance(),q=I.instance(),B=(c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),F=function(){function e(){}return e.prototype.createGauge=function(e,t){return ee},e.prototype.createHistogram=function(e,t){return et},e.prototype.createCounter=function(e,t){return Z},e.prototype.createUpDownCounter=function(e,t){return er},e.prototype.createObservableGauge=function(e,t){return ei},e.prototype.createObservableCounter=function(e,t){return en},e.prototype.createObservableUpDownCounter=function(e,t){return es},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),Q=function(){},H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.add=function(e,t){},t}(Q),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.add=function(e,t){},t}(Q),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.record=function(e,t){},t}(Q),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.record=function(e,t){},t}(Q),z=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(z),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(z),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(z),Y=new F,Z=new H,ee=new K,et=new W,er=new V,en=new J,ei=new G,es=new X;function ea(){return Y}var eo=new(function(){function e(){}return e.prototype.getMeter=function(e,t,r){return Y},e}()),el="metrics",ec=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return x(el,e,I.instance())},e.prototype.getMeterProvider=function(){return T(el)||eo},e.prototype.getMeter=function(e,t,r){return this.getMeterProvider().getMeter(e,t,r)},e.prototype.disable=function(){P(el,I.instance())},e})().getInstance(),eu=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),ed={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},eh={set:function(e,t,r){null!=e&&(e[t]=r)}},ef=t("OpenTelemetry Baggage Key");function ep(e){return e.getValue(ef)||void 0}function eg(){return ep(M.getInstance().active())}function em(e,t){return e.setValue(ef,t)}function ey(e){return e.deleteValue(ef)}var eb=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},ew=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ev=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=eb(e,2);return[t[0],t[1]]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=new e(this._entries);try{for(var a=ew(n),o=a.next();!o.done;o=a.next()){var l=o.value;s._entries.delete(l)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},e.prototype.clear=function(){return new e},e}(),e_=Symbol("BaggageEntryMetadata"),eS=I.instance();function eE(e){return void 0===e&&(e={}),new ev(new Map(Object.entries(e)))}function ex(e){return"string"!=typeof e&&(eS.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:e_,toString:function(){return e}}}var eT="propagation",eP=new eu,eA=(function(){function e(){this.createBaggage=eE,this.getBaggage=ep,this.getActiveBaggage=eg,this.setBaggage=em,this.deleteBaggage=ey}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return x(eT,e,I.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=eh),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=ed),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){P(eT,I.instance())},e.prototype._getGlobalPropagator=function(){return T(eT)||eP},e})().getInstance();(u=n||(n={}))[u.NONE=0]="NONE",u[u.SAMPLED=1]="SAMPLED";var eO="0000000000000000",eC="00000000000000000000000000000000",eR={traceId:eC,spanId:eO,traceFlags:n.NONE},ek=function(){function e(e){void 0===e&&(e=eR),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),eN=t("OpenTelemetry Context Key SPAN");function eI(e){return e.getValue(eN)||void 0}function e$(){return eI(M.getInstance().active())}function ej(e,t){return e.setValue(eN,t)}function eD(e){return e.deleteValue(eN)}function eL(e,t){return ej(e,new ek(t))}function eM(e){var t;return null==(t=eI(e))?void 0:t.spanContext()}var eU=/^([0-9a-f]{32})$/i,eq=/^[0-9a-f]{16}$/i;function eB(e){return eU.test(e)&&e!==eC}function eF(e){return eq.test(e)&&e!==eO}function eQ(e){return eB(e.traceId)&&eF(e.spanId)}function eH(e){return new ek(e)}var eV=M.getInstance(),eK=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=eV.active()),null==t?void 0:t.root)return new ek;var n,i=r&&eM(r);return"object"==typeof(n=i)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&eQ(i)?new ek(i):new ek},e.prototype.startActiveSpan=function(e,t,r,n){if(!(arguments.length<2)){2==arguments.length?a=t:3==arguments.length?(i=t,a=r):(i=t,s=r,a=n);var i,s,a,o=null!=s?s:eV.active(),l=this.startSpan(e,i,o),c=ej(o,l);return eV.with(c,a,void 0,l)}},e}(),eW=new eK,ez=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):eW},e}(),eJ=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new eK},e}()),eG=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var n;return null!=(n=this.getDelegateTracer(e,t,r))?n:new ez(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:eJ},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)},e}(),eX="trace",eY=(function(){function e(){this._proxyTracerProvider=new eG,this.wrapSpanContext=eH,this.isSpanContextValid=eQ,this.deleteSpan=eD,this.getSpan=eI,this.getActiveSpan=e$,this.getSpanContext=eM,this.setSpan=ej,this.setSpanContext=eL}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=x(eX,this._proxyTracerProvider,I.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return T(eX)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){P(eX,I.instance()),this._proxyTracerProvider=new eG},e})().getInstance();let eZ={context:U,diag:q,metrics:ec,propagation:eA,trace:eY};e.s(["default",0,eZ],46300),e.i(46300);var e0=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],e1=function(){for(var e=0;e<e0.length;e++)this[e0[e].n]=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(console){var n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}(e0[e].c)};(d=i||(i={}))[d.INT=0]="INT",d[d.DOUBLE=1]="DOUBLE",(h=s||(s={}))[h.NOT_RECORD=0]="NOT_RECORD",h[h.RECORD=1]="RECORD",h[h.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED",(f=a||(a={}))[f.INTERNAL=0]="INTERNAL",f[f.SERVER=1]="SERVER",f[f.CLIENT=2]="CLIENT",f[f.PRODUCER=3]="PRODUCER",f[f.CONSUMER=4]="CONSUMER",(p=o||(o={}))[p.UNSET=0]="UNSET",p[p.OK=1]="OK",p[p.ERROR=2]="ERROR";var e2="[_0-9a-z-*/]",e3=RegExp("^(?:[a-z]"+e2+"{0,255}|"+("[a-z0-9]"+e2+"{0,240}@[a-z]")+e2+"{0,13})$"),e4=/^[ -~]{0,255}[!-~]$/,e5=/,|=/,e8=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,r){return t.push(r+"="+e.get(r)),t},[]).join(",")},e.prototype._parse=function(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce(function(e,t){var r=t.trim(),n=r.indexOf("=");if(-1!==n){var i=r.slice(0,n),s=r.slice(n+1,t.length);e3.test(i)&&e4.test(s)&&!e5.test(s)&&e.set(i,s)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function e6(e){return new e8(e)}e.s(["DiagConsoleLogger",()=>e1,"DiagLogLevel",()=>r,"INVALID_SPANID",()=>eO,"INVALID_SPAN_CONTEXT",()=>eR,"INVALID_TRACEID",()=>eC,"ProxyTracer",()=>ez,"ProxyTracerProvider",()=>eG,"ROOT_CONTEXT",()=>g,"SamplingDecision",()=>s,"SpanKind",()=>a,"SpanStatusCode",()=>o,"TraceFlags",()=>n,"ValueType",()=>i,"baggageEntryMetadataFromString",()=>ex,"context",()=>U,"createContextKey",()=>t,"createNoopMeter",()=>ea,"createTraceState",()=>e6,"default",0,eZ,"defaultTextMapGetter",()=>ed,"defaultTextMapSetter",()=>eh,"diag",()=>q,"isSpanContextValid",()=>eQ,"isValidSpanId",()=>eF,"isValidTraceId",()=>eB,"metrics",()=>ec,"propagation",()=>eA,"trace",()=>eY],34474)},78338,(e,t,r)=>{(()=>{"use strict";let r,n,i,s,a;var o,l,c,u,d,h,f,p,g,m,y,b,w,v,_,S,E={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(223),i=r(172),s=r(930),a="context",o=new n.NoopContextManager;class l{static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(a,e,s.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(a)||o}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(a,s.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(56),i=r(912),s=r(957),a=r(172);class o{constructor(){function e(e){return function(...t){let r=(0,a.getGlobal)("diag");if(r)return r[e](...t)}}const t=this;t.setLogger=(e,r={logLevel:s.DiagLogLevel.INFO})=>{var n,o,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=e.stack)?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let c=(0,a.getGlobal)("diag"),u=(0,i.createLogLevelDiagLogger)(null!=(o=r.logLevel)?o:s.DiagLogLevel.INFO,e);if(c&&!r.suppressOverrideMessage){let e=null!=(l=Error().stack)?l:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${e}`),u.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,a.registerGlobal)("diag",u,t,!0)},t.disable=()=>{(0,a.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new o),this._instance}}t.DiagAPI=o},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(660),i=r(172),s=r(930),a="metrics";class o{static getInstance(){return this._instance||(this._instance=new o),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(a,e,s.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(a)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(a,s.DiagAPI.instance())}}t.MetricsAPI=o},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(172),i=r(874),s=r(194),a=r(277),o=r(369),l=r(930),c="propagation",u=new i.NoopTextMapPropagator;class d{constructor(){this.createBaggage=o.createBaggage,this.getBaggage=a.getBaggage,this.getActiveBaggage=a.getActiveBaggage,this.setBaggage=a.setBaggage,this.deleteBaggage=a.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(c,e,l.DiagAPI.instance())}inject(e,t,r=s.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=s.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(c,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(c)||u}}t.PropagationAPI=d},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(172),i=r(846),s=r(139),a=r(607),o=r(930),l="trace";class c{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=s.wrapSpanContext,this.isSpanContextValid=s.isSpanContextValid,this.deleteSpan=a.deleteSpan,this.getSpan=a.getSpan,this.getActiveSpan=a.getActiveSpan,this.getSpanContext=a.getSpanContext,this.setSpan=a.setSpan,this.setSpanContext=a.setSpanContext}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(l,this._proxyTracerProvider,o.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(l,o.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=c},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(491),i=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function s(e){return e.getValue(i)||void 0}t.getBaggage=s,t.getActiveBaggage=function(){return s(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(i,t)},t.deleteBaggage=function(e){return e.deleteValue(i)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(930),i=r(993),s=r(830),a=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(a.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:s.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(780);t.NoopContextManager=class{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(172);function i(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return i("debug",this._namespace,e)}error(...e){return i("error",this._namespace,e)}info(...e){return i("info",this._namespace,e)}warn(...e){return i("warn",this._namespace,e)}verbose(...e){return i("verbose",this._namespace,e)}}},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];t.DiagConsoleLogger=class{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,(r=t.DiagLogLevel||(t.DiagLogLevel={}))[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(200),i=r(521),s=r(130),a=i.VERSION.split(".")[0],o=Symbol.for(`opentelemetry.js.api.${a}`),l=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var s;let a=l[o]=null!=(s=l[o])?s:{version:i.VERSION};if(!n&&a[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(a.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${a.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return a[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null==(t=l[o])?void 0:t.version;if(n&&(0,s.isCompatible)(n))return null==(r=l[o])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=l[o];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(521),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function s(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease)return function(t){return t===e};function a(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return a(e);let o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=o.prerelease||s.major!==o.major)return a(e);if(0===s.major)return s.minor===o.minor&&s.patch<=o.patch?(t.add(e),!0):a(e);return s.minor<=o.minor?(t.add(e),!0):a(e)}}t._makeCompatibilityCheck=s,t.isCompatible=s(n.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,(r=t.ValueType||(t.ValueType={}))[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class s extends n{add(e,t){}}t.NoopUpDownCounterMetric=s;class a extends n{record(e,t){}}t.NoopHistogramMetric=a;class o{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=o;class l extends o{}t.NoopObservableCounterMetric=l;class c extends o{}t.NoopObservableGaugeMetric=c;class u extends o{}t.NoopObservableUpDownCounterMetric=u,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new a,t.NOOP_UP_DOWN_COUNTER_METRIC=new s,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new c,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new u,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(102);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},200:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46),t)},651:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:e.g},46:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0,t.NoopTextMapPropagator=class{inject(e,t){}extract(e,t){return e}fields(){return[]}}},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(476);t.NonRecordingSpan=class{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(491),i=r(607),s=r(403),a=r(139),o=n.ContextAPI.getInstance();t.NoopTracer=class{startSpan(e,t,r=o.active()){var n;if(null==t?void 0:t.root)return new s.NonRecordingSpan;let l=r&&(0,i.getSpanContext)(r);return"object"==typeof(n=l)&&"string"==typeof n.spanId&&"string"==typeof n.traceId&&"number"==typeof n.traceFlags&&(0,a.isSpanContextValid)(l)?new s.NonRecordingSpan(l):new s.NonRecordingSpan}startActiveSpan(e,t,r,n){let s,a,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(s=t,l=r):(s=t,a=r,l=n);let c=null!=a?a:o.active(),u=this.startSpan(e,s,c),d=(0,i.setSpan)(c,u);return o.with(d,l,void 0,u)}}},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(614);t.NoopTracerProvider=class{getTracer(e,t,r){return new n.NoopTracer}}},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=new(r(614)).NoopTracer;t.ProxyTracer=class{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(125),i=new(r(124)).NoopTracerProvider;t.ProxyTracerProvider=class{getTracer(e,t,r){var i;return null!=(i=this.getDelegateTracer(e,t,r))?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)}}},996:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,(r=t.SamplingDecision||(t.SamplingDecision={}))[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(780),i=r(403),s=r(491),a=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(a)||void 0}function l(e,t){return e.setValue(a,t)}t.getSpan=o,t.getActiveSpan=function(){return o(s.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(a)},t.setSpanContext=function(e,t){return l(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=o(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(564);class i{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf("=");if(-1!==i){let s=r.slice(0,i),a=r.slice(i+1,t.length);(0,n.validateKey)(s)&&(0,n.validateValue)(a)&&e.set(s,a)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new i;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=i},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,s=RegExp(`^(?:${n}|${i})$`),a=/^[ -~]{0,255}[!-~]$/,o=/,|=/;t.validateKey=function(e){return s.test(e)},t.validateValue=function(e){return a.test(e)&&!o.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(325);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,(r=t.SpanKind||(t.SpanKind={}))[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(476),i=r(403),s=/^([0-9a-f]{32})$/i,a=/^[0-9a-f]{16}$/i;function o(e){return s.test(e)&&e!==n.INVALID_TRACEID}function l(e){return a.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=o,t.isValidSpanId=l,t.isSpanContextValid=function(e){return o(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},847:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"},475:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,(r=t.TraceFlags||(t.TraceFlags={}))[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},x={};function T(e){var t=x[e];if(void 0!==t)return t.exports;var r=x[e]={exports:{}},n=!0;try{E[e].call(r.exports,r,r.exports,T),n=!1}finally{n&&delete x[e]}return r.exports}T.ab="/ROOT/node_modules/.pnpm/next@16.1.6_@babel+core@7.29.0_@opentelemetry+api@1.9.0_react-dom@19.2.4_react@19.2.4__react@19.2.4/node_modules/next/dist/compiled/@opentelemetry/api/";var P={};Object.defineProperty(P,"__esModule",{value:!0}),P.trace=P.propagation=P.metrics=P.diag=P.context=P.INVALID_SPAN_CONTEXT=P.INVALID_TRACEID=P.INVALID_SPANID=P.isValidSpanId=P.isValidTraceId=P.isSpanContextValid=P.createTraceState=P.TraceFlags=P.SpanStatusCode=P.SpanKind=P.SamplingDecision=P.ProxyTracerProvider=P.ProxyTracer=P.defaultTextMapSetter=P.defaultTextMapGetter=P.ValueType=P.createNoopMeter=P.DiagLogLevel=P.DiagConsoleLogger=P.ROOT_CONTEXT=P.createContextKey=P.baggageEntryMetadataFromString=void 0,o=T(369),Object.defineProperty(P,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return o.baggageEntryMetadataFromString}}),l=T(780),Object.defineProperty(P,"createContextKey",{enumerable:!0,get:function(){return l.createContextKey}}),Object.defineProperty(P,"ROOT_CONTEXT",{enumerable:!0,get:function(){return l.ROOT_CONTEXT}}),c=T(972),Object.defineProperty(P,"DiagConsoleLogger",{enumerable:!0,get:function(){return c.DiagConsoleLogger}}),u=T(957),Object.defineProperty(P,"DiagLogLevel",{enumerable:!0,get:function(){return u.DiagLogLevel}}),d=T(102),Object.defineProperty(P,"createNoopMeter",{enumerable:!0,get:function(){return d.createNoopMeter}}),h=T(901),Object.defineProperty(P,"ValueType",{enumerable:!0,get:function(){return h.ValueType}}),f=T(194),Object.defineProperty(P,"defaultTextMapGetter",{enumerable:!0,get:function(){return f.defaultTextMapGetter}}),Object.defineProperty(P,"defaultTextMapSetter",{enumerable:!0,get:function(){return f.defaultTextMapSetter}}),p=T(125),Object.defineProperty(P,"ProxyTracer",{enumerable:!0,get:function(){return p.ProxyTracer}}),g=T(846),Object.defineProperty(P,"ProxyTracerProvider",{enumerable:!0,get:function(){return g.ProxyTracerProvider}}),m=T(996),Object.defineProperty(P,"SamplingDecision",{enumerable:!0,get:function(){return m.SamplingDecision}}),y=T(357),Object.defineProperty(P,"SpanKind",{enumerable:!0,get:function(){return y.SpanKind}}),b=T(847),Object.defineProperty(P,"SpanStatusCode",{enumerable:!0,get:function(){return b.SpanStatusCode}}),w=T(475),Object.defineProperty(P,"TraceFlags",{enumerable:!0,get:function(){return w.TraceFlags}}),v=T(98),Object.defineProperty(P,"createTraceState",{enumerable:!0,get:function(){return v.createTraceState}}),_=T(139),Object.defineProperty(P,"isSpanContextValid",{enumerable:!0,get:function(){return _.isSpanContextValid}}),Object.defineProperty(P,"isValidTraceId",{enumerable:!0,get:function(){return _.isValidTraceId}}),Object.defineProperty(P,"isValidSpanId",{enumerable:!0,get:function(){return _.isValidSpanId}}),S=T(476),Object.defineProperty(P,"INVALID_SPANID",{enumerable:!0,get:function(){return S.INVALID_SPANID}}),Object.defineProperty(P,"INVALID_TRACEID",{enumerable:!0,get:function(){return S.INVALID_TRACEID}}),Object.defineProperty(P,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return S.INVALID_SPAN_CONTEXT}}),r=T(67),Object.defineProperty(P,"context",{enumerable:!0,get:function(){return r.context}}),n=T(506),Object.defineProperty(P,"diag",{enumerable:!0,get:function(){return n.diag}}),i=T(886),Object.defineProperty(P,"metrics",{enumerable:!0,get:function(){return i.metrics}}),s=T(939),Object.defineProperty(P,"propagation",{enumerable:!0,get:function(){return s.propagation}}),a=T(845),Object.defineProperty(P,"trace",{enumerable:!0,get:function(){return a.trace}}),P.default={context:r.context,diag:n.diag,metrics:i.metrics,propagation:s.propagation,trace:a.trace},t.exports=P})()},16979,(e,t,r)=>{(()=>{"use strict";"u">typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/.pnpm/next@16.1.6_@babel+core@7.29.0_@opentelemetry+api@1.9.0_react-dom@19.2.4_react@19.2.4__react@19.2.4/node_modules/next/dist/compiled/cookie/");var e,r,n,i,s={};s.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var i={},s=t.split(n),a=(r||{}).decode||e,o=0;o<s.length;o++){var l=s[o],c=l.indexOf("=");if(!(c<0)){var u=l.substr(0,c).trim(),d=l.substr(++c,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==i[u]&&(i[u]=function(e,t){try{return t(e)}catch(t){return e}}(d,a))}}return i},s.serialize=function(e,t,n){var s=n||{},a=s.encode||r;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!i.test(e))throw TypeError("argument name is invalid");var o=a(t);if(o&&!i.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=s.maxAge){var c=s.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(s.domain){if(!i.test(s.domain))throw TypeError("option domain is invalid");l+="; Domain="+s.domain}if(s.path){if(!i.test(s.path))throw TypeError("option path is invalid");l+="; Path="+s.path}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(l+="; HttpOnly"),s.secure&&(l+="; Secure"),s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l},e=decodeURIComponent,r=encodeURIComponent,n=/; */,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,t.exports=s})()},74998,(e,t,r)=>{(()=>{"use strict";let e,r,n,i,s;var a={993:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var o=new i(n,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,a),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},213:e=>{e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},574:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){let s=i/2|0,a=n+s;0>=r(e[a],t)?(n=++a,i-=s+1):i=s}return n}},821:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(574);t.default=class{constructor(){this._queue=[]}enqueue(e,t){let r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);let i=n.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,r)}dequeue(){let e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}}},816:(e,t,r)=>{let n=r(213);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}let s=(e,t,r)=>new Promise((s,a)=>{if("number"!=typeof t||t<0)throw TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void s(e);let o=setTimeout(()=>{if("function"==typeof r){try{s(r())}catch(e){a(e)}return}let n="string"==typeof r?r:`Promise timed out after ${t} milliseconds`,o=r instanceof Error?r:new i(n);"function"==typeof e.cancel&&e.cancel(),a(o)},t);n(e.then(s,a),()=>{clearTimeout(o)})});e.exports=s,e.exports.default=s,e.exports.TimeoutError=i}},o={};function l(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}},n=!0;try{a[e](r,r.exports,l),n=!1}finally{n&&delete o[e]}return r.exports}l.ab="/ROOT/node_modules/.pnpm/next@16.1.6_@babel+core@7.29.0_@opentelemetry+api@1.9.0_react-dom@19.2.4_react@19.2.4__react@19.2.4/node_modules/next/dist/compiled/p-queue/";var c={};Object.defineProperty(c,"__esModule",{value:!0}),e=l(993),r=l(816),n=l(821),i=()=>{},s=new r.TimeoutError,c.default=class extends e{constructor(e){var t,r,s,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=i,this._resolveIdle=i,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},e)).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!=(r=null==(t=e.intervalCap)?void 0:t.toString())?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!=(a=null==(s=e.interval)?void 0:s.toString())?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=i,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=i,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(void 0===this._intervalId){let t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,i)=>{let a=async()=>{this._pendingCount++,this._intervalCount++;try{let a=void 0===this._timeout&&void 0===t.timeout?e():r.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&i(s)});n(await a)}catch(e){i(e)}this._next()};this._queue.enqueue(a,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused&&(this._isPaused=!1,this._processQueue()),this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}},t.exports=c})()},51187,(e,t,r)=>{t.exports=e.x("next/dist/server/lib/incremental-cache/tags-manifest.external.js",()=>require("next/dist/server/lib/incremental-cache/tags-manifest.external.js"))},78500,(e,t,r)=>{t.exports=e.x("node:async_hooks",()=>require("node:async_hooks"))},7677,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={getTestReqInfo:function(){return l},withRequest:function(){return o}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=new(e.r(78500)).AsyncLocalStorage;function a(e,t){let r=t.header(e,"next-test-proxy-port");if(!r)return;let n=t.url(e);return{url:n,proxyPort:Number(r),testData:t.header(e,"next-test-data")||""}}function o(e,t,r){let n=a(e,t);return n?s.run(n,r):r()}function l(e,t){let r=s.getStore();return r||(e&&t?a(e,t):void 0)}},53798,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={handleFetch:function(){return l},interceptFetch:function(){return c},reader:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(7677),a={url:e=>e.url,header:(e,t)=>e.headers.get(t)};async function o(e,t){let{url:r,method:n,headers:i,body:s,cache:a,credentials:o,integrity:l,mode:c,redirect:u,referrer:d,referrerPolicy:h}=t;return{testData:e,api:"fetch",request:{url:r,method:n,headers:[...Array.from(i),["next-test-stack",function(){let e=(Error().stack??"").split("\n");for(let t=1;t<e.length;t++)if(e[t].length>0){e=e.slice(t);break}return(e=(e=(e=e.filter(e=>!e.includes("/next/dist/"))).slice(0,5)).map(e=>e.replace("webpack-internal:///(rsc)/","").trim())).join("    ")}()]],body:s?Buffer.from(await t.arrayBuffer()).toString("base64"):null,cache:a,credentials:o,integrity:l,mode:c,redirect:u,referrer:d,referrerPolicy:h}}}async function l(e,t){let r=(0,s.getTestReqInfo)(t,a);if(!r)return e(t);let{testData:n,proxyPort:i}=r,l=await o(n,t),c=await e(`http://localhost:${i}`,{method:"POST",body:JSON.stringify(l),next:{internal:!0}});if(!c.ok)throw Object.defineProperty(Error(`Proxy request failed: ${c.status}`),"__NEXT_ERROR_CODE",{value:"E146",enumerable:!1,configurable:!0});let u=await c.json(),{api:d}=u;switch(d){case"continue":return e(t);case"abort":case"unhandled":throw Object.defineProperty(Error(`Proxy request aborted [${t.method} ${t.url}]`),"__NEXT_ERROR_CODE",{value:"E145",enumerable:!1,configurable:!0});case"fetch":return function(e){let{status:t,headers:r,body:n}=e.response;return new Response(n?Buffer.from(n,"base64"):null,{status:t,headers:new Headers(r)})}(u);default:return d}}function c(t){return e.g.fetch=function(e,r){var n;return(null==r||null==(n=r.next)?void 0:n.internal)?t(e,r):l(t,new Request(e,r))},()=>{e.g.fetch=t}}},45062,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={interceptTestApis:function(){return o},wrapRequestHandler:function(){return l}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(7677),a=e.r(53798);function o(){return(0,a.interceptFetch)(e.g.fetch)}function l(e){return(t,r)=>(0,s.withRequest)(t,a.reader,()=>e(t,r))}},92942,(e,t,r)=>{"use strict";function n(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"detectDomainLocale",{enumerable:!0,get:function(){return n}})},6876,(e,t,r)=>{"use strict";function n(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removeTrailingSlash",{enumerable:!0,get:function(){return n}})},37431,(e,t,r)=>{"use strict";function n(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parsePath",{enumerable:!0,get:function(){return n}})},57741,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(37431);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:s}=(0,n.parsePath)(e);return`${t}${r}${i}${s}`}},25599,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathSuffix",{enumerable:!0,get:function(){return i}});let n=e.r(37431);function i(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:i,hash:s}=(0,n.parsePath)(e);return`${r}${t}${i}${s}`}},85828,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"pathHasPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(37431);function i(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,n.parsePath)(e);return r===t||r.startsWith(t+"/")}},88702,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLocale",{enumerable:!0,get:function(){return s}});let n=e.r(57741),i=e.r(85828);function s(e,t,r,s){if(!t||t===r)return e;let a=e.toLowerCase();return!s&&((0,i.pathHasPrefix)(a,"/api")||(0,i.pathHasPrefix)(a,`/${t.toLowerCase()}`))?e:(0,n.addPathPrefix)(e,`/${t}`)}},37504,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"formatNextPathnameInfo",{enumerable:!0,get:function(){return o}});let n=e.r(6876),i=e.r(57741),s=e.r(25599),a=e.r(88702);function o(e){let t=(0,a.addLocale)(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=(0,n.removeTrailingSlash)(t)),e.buildId&&(t=(0,s.addPathSuffix)((0,i.addPathPrefix)(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=(0,i.addPathPrefix)(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:(0,s.addPathSuffix)(t,"/"):(0,n.removeTrailingSlash)(t)}},89218,(e,t,r)=>{"use strict";function n(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getHostname",{enumerable:!0,get:function(){return n}})},35616,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"normalizeLocalePath",{enumerable:!0,get:function(){return i}});let n=new WeakMap;function i(e,t){let r;if(!t)return{pathname:e};let i=n.get(t);i||(i=t.map(e=>e.toLowerCase()),n.set(t,i));let s=e.split("/",2);if(!s[1])return{pathname:e};let a=s[1].toLowerCase(),o=i.indexOf(a);return o<0?{pathname:e}:(r=t[o],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}},44331,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removePathPrefix",{enumerable:!0,get:function(){return i}});let n=e.r(85828);function i(e,t){if(!(0,n.pathHasPrefix)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}},82236,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getNextPathnameInfo",{enumerable:!0,get:function(){return a}});let n=e.r(35616),i=e.r(44331),s=e.r(85828);function a(e,t){let{basePath:r,i18n:a,trailingSlash:o}=t.nextConfig??{},l={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):o};r&&(0,s.pathHasPrefix)(l.pathname,r)&&(l.pathname=(0,i.removePathPrefix)(l.pathname,r),l.basePath=r);let c=l.pathname;if(l.pathname.startsWith("/_next/data/")&&l.pathname.endsWith(".json")){let e=l.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");l.buildId=e[0],c="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(l.pathname=c)}if(a){let e=t.i18nProvider?t.i18nProvider.analyze(l.pathname):(0,n.normalizeLocalePath)(l.pathname,a.locales);l.locale=e.detectedLocale,l.pathname=e.pathname??l.pathname,!e.detectedLocale&&l.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(c):(0,n.normalizeLocalePath)(c,a.locales)).detectedLocale&&(l.locale=e.detectedLocale)}return l}},67178,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextURL",{enumerable:!0,get:function(){return u}});let n=e.r(92942),i=e.r(37504),s=e.r(89218),a=e.r(82236),o=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function l(e,t){return new URL(String(e).replace(o,"localhost"),t&&String(t).replace(o,"localhost"))}let c=Symbol("NextURLInternal");class u{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[c]={url:l(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,i,o;let l=(0,a.getNextPathnameInfo)(this[c].url.pathname,{nextConfig:this[c].options.nextConfig,parseData:!0,i18nProvider:this[c].options.i18nProvider}),u=(0,s.getHostname)(this[c].url,this[c].options.headers);this[c].domainLocale=this[c].options.i18nProvider?this[c].options.i18nProvider.detectDomainLocale(u):(0,n.detectDomainLocale)(null==(t=this[c].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,u);let d=(null==(r=this[c].domainLocale)?void 0:r.defaultLocale)||(null==(o=this[c].options.nextConfig)||null==(i=o.i18n)?void 0:i.defaultLocale);this[c].url.pathname=l.pathname,this[c].defaultLocale=d,this[c].basePath=l.basePath??"",this[c].buildId=l.buildId,this[c].locale=l.locale??d,this[c].trailingSlash=l.trailingSlash}formatPathname(){return(0,i.formatNextPathnameInfo)({basePath:this[c].basePath,buildId:this[c].buildId,defaultLocale:this[c].options.forceLocale?void 0:this[c].defaultLocale,locale:this[c].locale,pathname:this[c].url.pathname,trailingSlash:this[c].trailingSlash})}formatSearch(){return this[c].url.search}get buildId(){return this[c].buildId}set buildId(e){this[c].buildId=e}get locale(){return this[c].locale??""}set locale(e){var t,r;if(!this[c].locale||!(null==(r=this[c].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[c].locale=e}get defaultLocale(){return this[c].defaultLocale}get domainLocale(){return this[c].domainLocale}get searchParams(){return this[c].url.searchParams}get host(){return this[c].url.host}set host(e){this[c].url.host=e}get hostname(){return this[c].url.hostname}set hostname(e){this[c].url.hostname=e}get port(){return this[c].url.port}set port(e){this[c].url.port=e}get protocol(){return this[c].url.protocol}set protocol(e){this[c].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[c].url=l(e),this.analyze()}get origin(){return this[c].url.origin}get pathname(){return this[c].url.pathname}set pathname(e){this[c].url.pathname=e}get hash(){return this[c].url.hash}set hash(e){this[c].url.hash=e}get search(){return this[c].url.search}set search(e){this[c].url.search=e}get password(){return this[c].url.password}set password(e){this[c].url.password=e}get username(){return this[c].url.username}set username(e){this[c].url.username=e}get basePath(){return this[c].basePath}set basePath(e){this[c].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new u(String(this),this[c].options)}}},37666,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ACTION_SUFFIX:function(){return m},APP_DIR_ALIAS:function(){return M},CACHE_ONE_YEAR:function(){return O},DOT_NEXT_ALIAS:function(){return D},ESLINT_DEFAULT_DIRS:function(){return ei},GSP_NO_RETURNED_VALUE:function(){return Y},GSSP_COMPONENT_MEMBER_ERROR:function(){return et},GSSP_NO_RETURNED_VALUE:function(){return Z},HTML_CONTENT_TYPE_HEADER:function(){return a},INFINITE_CACHE:function(){return C},INSTRUMENTATION_HOOK_FILENAME:function(){return $},JSON_CONTENT_TYPE_HEADER:function(){return o},MATCHED_PATH_HEADER:function(){return u},MIDDLEWARE_FILENAME:function(){return R},MIDDLEWARE_LOCATION_REGEXP:function(){return k},NEXT_BODY_SUFFIX:function(){return w},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return A},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return _},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return S},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return P},NEXT_CACHE_TAGS_HEADER:function(){return v},NEXT_CACHE_TAG_MAX_ITEMS:function(){return x},NEXT_CACHE_TAG_MAX_LENGTH:function(){return T},NEXT_DATA_SUFFIX:function(){return y},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return c},NEXT_META_SUFFIX:function(){return b},NEXT_QUERY_PARAM_PREFIX:function(){return l},NEXT_RESUME_HEADER:function(){return E},NON_STANDARD_NODE_ENV:function(){return er},PAGES_DIR_ALIAS:function(){return j},PRERENDER_REVALIDATE_HEADER:function(){return d},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return h},PROXY_FILENAME:function(){return N},PROXY_LOCATION_REGEXP:function(){return I},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return K},ROOT_DIR_ALIAS:function(){return L},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return V},RSC_ACTION_ENCRYPTION_ALIAS:function(){return H},RSC_ACTION_PROXY_ALIAS:function(){return B},RSC_ACTION_VALIDATE_ALIAS:function(){return q},RSC_CACHE_WRAPPER_ALIAS:function(){return F},RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS:function(){return Q},RSC_MOD_REF_PROXY_ALIAS:function(){return U},RSC_SEGMENTS_DIR_SUFFIX:function(){return f},RSC_SEGMENT_SUFFIX:function(){return p},RSC_SUFFIX:function(){return g},SERVER_PROPS_EXPORT_ERROR:function(){return X},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return z},SERVER_PROPS_SSG_CONFLICT:function(){return J},SERVER_RUNTIME:function(){return es},SSG_FALLBACK_EXPORT_ERROR:function(){return en},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return W},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return G},TEXT_PLAIN_CONTENT_TYPE_HEADER:function(){return s},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return ee},WEBPACK_LAYERS:function(){return el},WEBPACK_RESOURCE_QUERIES:function(){return ec},WEB_SOCKET_MAX_RECONNECTIONS:function(){return ea}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s="text/plain",a="text/html; charset=utf-8",o="application/json; charset=utf-8",l="nxtP",c="nxtI",u="x-matched-path",d="x-prerender-revalidate",h="x-prerender-revalidate-if-generated",f=".segments",p=".segment.rsc",g=".rsc",m=".action",y=".json",b=".meta",w=".body",v="x-next-cache-tags",_="x-next-revalidated-tags",S="x-next-revalidate-tag-token",E="next-resume",x=128,T=256,P=1024,A="_N_T_",O=31536e3,C=0xfffffffe,R="middleware",k=`(?:src/)?${R}`,N="proxy",I=`(?:src/)?${N}`,$="instrumentation",j="private-next-pages",D="private-dot-next",L="private-next-root-dir",M="private-next-app-dir",U="private-next-rsc-mod-ref-proxy",q="private-next-rsc-action-validate",B="private-next-rsc-server-reference",F="private-next-rsc-cache-wrapper",Q="private-next-rsc-track-dynamic-import",H="private-next-rsc-action-encryption",V="private-next-rsc-action-client-wrapper",K="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",W="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",z="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",J="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",G="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",X="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",Y="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",Z="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",ee="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",et="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",er='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',en="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",ei=["app","pages","components","lib","src"],es={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ea=12,eo={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},el={...eo,GROUP:{builtinReact:[eo.reactServerComponents,eo.actionBrowser],serverOnly:[eo.reactServerComponents,eo.actionBrowser,eo.instrument,eo.middleware],neutralTarget:[eo.apiNode,eo.apiEdge],clientOnly:[eo.serverSideRendering,eo.appPagesBrowser],bundled:[eo.reactServerComponents,eo.actionBrowser,eo.serverSideRendering,eo.appPagesBrowser,eo.shared,eo.instrument,eo.middleware],appPages:[eo.reactServerComponents,eo.serverSideRendering,eo.appPagesBrowser,eo.actionBrowser]}},ec={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},68610,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={fromNodeOutgoingHttpHeaders:function(){return a},normalizeNextQueryParam:function(){return u},splitCookiesString:function(){return o},toNodeOutgoingHttpHeaders:function(){return l},validateURL:function(){return c}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(37666);function a(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function o(e){var t,r,n,i,s,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,s=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(s=!0,o=i,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!s||o>=e.length)&&a.push(e.substring(t,e.length))}return a}function l(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...o(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function c(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function u(e){for(let t of[s.NEXT_QUERY_PARAM_PREFIX,s.NEXT_INTERCEPTION_MARKER_PREFIX])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}},10344,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={PageSignatureError:function(){return s},RemovedPageError:function(){return a},RemovedUAError:function(){return o}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});class s extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class a extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class o extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},99101,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={RequestCookies:function(){return s.RequestCookies},ResponseCookies:function(){return s.ResponseCookies},stringifyCookie:function(){return s.stringifyCookie}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(15305)},44312,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={INTERNALS:function(){return c},NextRequest:function(){return u}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(67178),a=e.r(68610),o=e.r(10344),l=e.r(99101),c=Symbol("internal request");class u extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);(0,a.validateURL)(r),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(r,t);const n=new s.NextURL(r,{headers:(0,a.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig});this[c]={cookies:new l.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[c].cookies}get nextUrl(){return this[c].nextUrl}get page(){throw new o.RemovedPageError}get ua(){throw new o.RemovedUAError}get url(){return this[c].url}}},97760,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReflectAdapter",{enumerable:!0,get:function(){return n}});class n{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},66972,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextResponse",{enumerable:!0,get:function(){return d}});let n=e.r(99101),i=e.r(67178),s=e.r(68610),a=e.r(97760),o=e.r(99101),l=Symbol("internal response"),c=new Set([301,302,303,307,308]);function u(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class d extends Response{constructor(e,t={}){super(e,t);const r=this.headers,c=new Proxy(new o.ResponseCookies(r),{get(e,i,s){switch(i){case"delete":case"set":return(...s)=>{let a=Reflect.apply(e[i],e,s),l=new Headers(r);return a instanceof o.ResponseCookies&&r.set("x-middleware-set-cookie",a.getAll().map(e=>(0,n.stringifyCookie)(e)).join(",")),u(t,l),a};default:return a.ReflectAdapter.get(e,i,s)}}});this[l]={cookies:c,url:t.url?new i.NextURL(t.url,{headers:(0,s.toNodeOutgoingHttpHeaders)(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[l].cookies}static json(e,t){let r=Response.json(e,t);return new d(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!c.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",(0,s.validateURL)(e)),new d(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",(0,s.validateURL)(e)),u(t,r),new d(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),u(e,t),new d(null,{...e,headers:t})}}},52041,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ImageResponse",{enumerable:!0,get:function(){return n}})},41063,(e,t,r)=>{var n={226:function(t,r){!function(n,i){"use strict";var s="function",a="undefined",o="object",l="string",c="major",u="model",d="name",h="type",f="vendor",p="version",g="architecture",m="console",y="mobile",b="tablet",w="smarttv",v="wearable",_="embedded",S="Amazon",E="Apple",x="ASUS",T="BlackBerry",P="Browser",A="Chrome",O="Firefox",C="Google",R="Huawei",k="Microsoft",N="Motorola",I="Opera",$="Samsung",j="Sharp",D="Sony",L="Xiaomi",M="Zebra",U="Facebook",q="Chromium OS",B="Mac OS",F=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},Q=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},H=function(e,t){return typeof e===l&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},K=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,350)},W=function(e,t){for(var r,n,i,a,l,c,u=0;u<t.length&&!l;){var d=t[u],h=t[u+1];for(r=n=0;r<d.length&&!l&&d[r];)if(l=d[r++].exec(e))for(i=0;i<h.length;i++)c=l[++n],typeof(a=h[i])===o&&a.length>0?2===a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,c):this[a[0]]=a[1]:3===a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=c?c.replace(a[1],a[2]):void 0:this[a[0]]=c?a[1].call(this,c,a[2]):void 0:4===a.length&&(this[a[0]]=c?a[3].call(this,c.replace(a[1],a[2])):void 0):this[a]=c||void 0;u+=2}},z=function(e,t){for(var r in t)if(typeof t[r]===o&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(H(t[r][n],e))return"?"===r?void 0:r}else if(H(t[r],e))return"?"===r?void 0:r;return e},J={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,I+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,I]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UC"+P]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+P],p],[/\bfocus\/([\w\.]+)/i],[p,[d,O+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,I+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,I+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI "+P]],[/fxios\/([-\w\.]+)/i],[p,[d,O]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+P]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+P],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,U],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,A+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,A+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android "+P]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,O+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,p],[/(cobalt)\/([\w\.]+)/i],[d,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,V]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[f,$],[h,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[f,$],[h,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[f,E],[h,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,E],[h,b]],[/(macintosh);/i],[u,[f,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[f,j],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[f,R],[h,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[f,R],[h,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[f,L],[h,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[f,L],[h,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[f,"OPPO"],[h,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[f,"Vivo"],[h,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[f,"Realme"],[h,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[f,N],[h,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[f,N],[h,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[f,"LG"],[h,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[f,"LG"],[h,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[f,"Lenovo"],[h,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[f,"Nokia"],[h,y]],[/(pixel c)\b/i],[u,[f,C],[h,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[f,C],[h,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,D],[h,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[f,D],[h,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[f,"OnePlus"],[h,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[f,S],[h,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[f,S],[h,y]],[/(playbook);[-\w\),; ]+(rim)/i],[u,f,[h,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[f,T],[h,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[f,x],[h,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[f,x],[h,y]],[/(nexus 9)/i],[u,[f,"HTC"],[h,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[u,/_/g," "],[h,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[f,"Acer"],[h,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[f,"Meizu"],[h,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,u,[h,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,u,[h,b]],[/(surface duo)/i],[u,[f,k],[h,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[f,"Fairphone"],[h,y]],[/(u304aa)/i],[u,[f,"AT&T"],[h,y]],[/\bsie-(\w*)/i],[u,[f,"Siemens"],[h,y]],[/\b(rct\w+) b/i],[u,[f,"RCA"],[h,b]],[/\b(venue[\d ]{2,7}) b/i],[u,[f,"Dell"],[h,b]],[/\b(q(?:mv|ta)\w+) b/i],[u,[f,"Verizon"],[h,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[f,"Barnes & Noble"],[h,b]],[/\b(tm\d{3}\w+) b/i],[u,[f,"NuVision"],[h,b]],[/\b(k88) b/i],[u,[f,"ZTE"],[h,b]],[/\b(nx\d{3}j) b/i],[u,[f,"ZTE"],[h,y]],[/\b(gen\d{3}) b.+49h/i],[u,[f,"Swiss"],[h,y]],[/\b(zur\d{3}) b/i],[u,[f,"Swiss"],[h,b]],[/\b((zeki)?tb.*\b) b/i],[u,[f,"Zeki"],[h,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],u,[h,b]],[/\b(ns-?\w{0,9}) b/i],[u,[f,"Insignia"],[h,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[f,"NextBook"],[h,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],u,[h,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],u,[h,y]],[/\b(ph-1) /i],[u,[f,"Essential"],[h,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[f,"Envizen"],[h,b]],[/\b(trio[-\w\. ]+) b/i],[u,[f,"MachSpeed"],[h,b]],[/\btu_(1491) b/i],[u,[f,"Rotor"],[h,b]],[/(shield[\w ]+) b/i],[u,[f,"Nvidia"],[h,b]],[/(sprint) (\w+)/i],[f,u,[h,y]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,k],[h,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,M],[h,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,M],[h,y]],[/smart-tv.+(samsung)/i],[f,[h,w]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,$],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,"LG"],[h,w]],[/(apple) ?tv/i],[f,[u,E+" TV"],[h,w]],[/crkey/i],[[u,A+"cast"],[f,C],[h,w]],[/droid.+aft(\w)( bui|\))/i],[u,[f,S],[h,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[f,j],[h,w]],[/(bravia[\w ]+)( bui|\))/i],[u,[f,D],[h,w]],[/(mitv-\w{5}) bui/i],[u,[f,L],[h,w]],[/Hbbtv.*(technisat) (.*);/i],[f,u,[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,K],[u,K],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,u,[h,m]],[/droid.+; (shield) bui/i],[u,[f,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[u,[f,D],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[f,k],[h,m]],[/((pebble))app/i],[f,u,[h,v]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[f,E],[h,v]],[/droid.+; (glass) \d/i],[u,[f,C],[h,v]],[/droid.+; (wt63?0{2,3})\)/i],[u,[f,M],[h,v]],[/(quest( 2| pro)?)/i],[u,[f,U],[h,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[h,_]],[/(aeobc)\b/i],[u,[f,S],[h,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[h,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[h,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,y]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,z,J]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,z,J]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,B],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,T]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,O+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[d,A+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,q],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,p]]},X=function(e,t){if(typeof e===o&&(t=e,e=void 0),!(this instanceof X))return new X(e,t).getResult();var r=typeof n!==a&&n.navigator?n.navigator:void 0,i=e||(r&&r.userAgent?r.userAgent:""),m=r&&r.userAgentData?r.userAgentData:void 0,w=t?F(G,t):G,v=r&&r.userAgent==i;return this.getBrowser=function(){var e,t={};return t[d]=void 0,t[p]=void 0,W.call(t,i,w.browser),t[c]=typeof(e=t[p])===l?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,v&&r&&r.brave&&typeof r.brave.isBrave==s&&(t[d]="Brave"),t},this.getCPU=function(){var e={};return e[g]=void 0,W.call(e,i,w.cpu),e},this.getDevice=function(){var e={};return e[f]=void 0,e[u]=void 0,e[h]=void 0,W.call(e,i,w.device),v&&!e[h]&&m&&m.mobile&&(e[h]=y),v&&"Macintosh"==e[u]&&r&&typeof r.standalone!==a&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[u]="iPad",e[h]=b),e},this.getEngine=function(){var e={};return e[d]=void 0,e[p]=void 0,W.call(e,i,w.engine),e},this.getOS=function(){var e={};return e[d]=void 0,e[p]=void 0,W.call(e,i,w.os),v&&!e[d]&&m&&"Unknown"!=m.platform&&(e[d]=m.platform.replace(/chrome os/i,q).replace(/macos/i,B)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===l&&e.length>350?K(e,350):e,this},this.setUA(i),this};if(X.VERSION="1.0.35",X.BROWSER=Q([d,p,c]),X.CPU=Q([g]),X.DEVICE=Q([u,f,h,m,y,w,b,v,_]),X.ENGINE=X.OS=Q([d,p]),typeof r!==a)t.exports&&(r=t.exports=X),r.UAParser=X;else if(typeof define===s&&define.amd)e.r,void 0!==X&&e.v(X);else typeof n!==a&&(n.UAParser=X);var Y=typeof n!==a&&(n.jQuery||n.Zepto);if(Y&&!Y.ua){var Z=new X;Y.ua=Z.getResult(),Y.ua.get=function(){return Z.getUA()},Y.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var r in t)Y.ua[r]=t[r]}}}(this)}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},a=!0;try{n[e].call(r.exports,r,r.exports,s),a=!1}finally{a&&delete i[e]}return r.exports}s.ab="/ROOT/node_modules/.pnpm/next@16.1.6_@babel+core@7.29.0_@opentelemetry+api@1.9.0_react-dom@19.2.4_react@19.2.4__react@19.2.4/node_modules/next/dist/compiled/ua-parser-js/",t.exports=s(226)},19410,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i={isBot:function(){return o},userAgent:function(){return c},userAgentFromString:function(){return l}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});let a=(n=e.r(41063))&&n.__esModule?n:{default:n};function o(e){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(e)}function l(e){return{...(0,a.default)(e),isBot:void 0!==e&&o(e)}}function c({headers:e}){return l(e.get("user-agent")||void 0)}},43932,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"URLPattern",{enumerable:!0,get:function(){return n}});let n="u"<typeof URLPattern?void 0:URLPattern},80729,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"after",{enumerable:!0,get:function(){return i}});let n=e.r(56704);function i(e){let t=n.workAsyncStorage.getStore();if(!t)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:r}=t;return r.after(e)}},35713,(e,t,r)=>{"use strict";var n,i;Object.defineProperty(r,"__esModule",{value:!0}),n=e.r(80729),i=r,Object.keys(n).forEach(function(e){"default"===e||Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:function(){return n[e]}})})},67749,(e,t,r)=>{"use strict";t.exports=e.r(18622)},99151,(e,t,r)=>{"use strict";t.exports=e.r(67749).vendored["react-rsc"].React},40143,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DynamicServerError:function(){return a},isDynamicServerError:function(){return o}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s="DYNAMIC_SERVER_USAGE";class a extends Error{constructor(e){super(`Dynamic server usage: ${e}`),this.description=e,this.digest=s}}function o(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===s}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},16046,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={StaticGenBailoutError:function(){return a},isStaticGenBailoutError:function(){return o}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s="NEXT_STATIC_GEN_BAILOUT";class a extends Error{constructor(...e){super(...e),this.code=s}}function o(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===s}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},58788,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={isHangingPromiseRejectionError:function(){return s},makeDevtoolsIOAwarePromise:function(){return d},makeHangingPromise:function(){return c}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===a}let a="HANGING_PROMISE_REJECTION";class o extends Error{constructor(e,t){super(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${e}".`),this.route=e,this.expression=t,this.digest=a}}let l=new WeakMap;function c(e,t,r){if(e.aborted)return Promise.reject(new o(t,r));{let n=new Promise((n,i)=>{let s=i.bind(null,new o(t,r)),a=l.get(e);if(a)a.push(s);else{let t=[s];l.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return n.catch(u),n}}function u(){}function d(e,t,r){return t.stagedRendering?t.stagedRendering.delayUntilStage(r,void 0,e):new Promise(t=>{setTimeout(()=>{t(e)},0)})}},3989,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={METADATA_BOUNDARY_NAME:function(){return s},OUTLET_BOUNDARY_NAME:function(){return o},ROOT_LAYOUT_BOUNDARY_NAME:function(){return l},VIEWPORT_BOUNDARY_NAME:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s="__next_metadata_boundary__",a="__next_viewport_boundary__",o="__next_outlet_boundary__",l="__next_root_layout_boundary__"},57092,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={atLeastOneTask:function(){return o},scheduleImmediate:function(){return a},scheduleOnNextTick:function(){return s},waitAtLeastOneReactRenderTask:function(){return l}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},a=e=>{setImmediate(e)};function o(){return new Promise(e=>a(e))}function l(){return new Promise(e=>setImmediate(e))}},33078,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={BailoutToCSRError:function(){return a},isBailoutToCSRError:function(){return o}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s="BAILOUT_TO_CLIENT_SIDE_RENDERING";class a extends Error{constructor(e){super(`Bail out to client-side rendering: ${e}`),this.reason=e,this.digest=s}}function o(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===s}},67874,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"InvariantError",{enumerable:!0,get:function(){return n}});class n extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}},78800,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i,s={Postpone:function(){return A},PreludeState:function(){return Y},abortAndThrowOnSynchronousRequestDataAccess:function(){return P},abortOnSynchronousPlatformIOAccess:function(){return T},accessedDynamicData:function(){return j},annotateDynamicAccess:function(){return q},consumeDynamicAccess:function(){return D},createDynamicTrackingState:function(){return b},createDynamicValidationState:function(){return w},createHangingInputAbortSignal:function(){return U},createRenderInBrowserAbortSignal:function(){return M},delayUntilRuntimeStage:function(){return er},formatDynamicAPIAccesses:function(){return L},getFirstDynamicReason:function(){return v},getStaticShellDisallowedDynamicReasons:function(){return et},isDynamicPostpone:function(){return R},isPrerenderInterruptedError:function(){return $},logDisallowedDynamicError:function(){return Z},markCurrentScopeAsDynamic:function(){return _},postponeWithTracking:function(){return O},throwIfDisallowedDynamic:function(){return ee},throwToInterruptStaticGeneration:function(){return S},trackAllowedDynamicAccess:function(){return z},trackDynamicDataInDynamicRender:function(){return E},trackDynamicHoleInRuntimeShell:function(){return J},trackDynamicHoleInStaticShell:function(){return G},useDynamicRouteParams:function(){return B},useDynamicSearchParams:function(){return F}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let o=(n=e.r(99151))&&n.__esModule?n:{default:n},l=e.r(40143),c=e.r(16046),u=e.r(32319),d=e.r(56704),h=e.r(58788),f=e.r(3989),p=e.r(57092),g=e.r(33078),m=e.r(67874),y="function"==typeof o.default.unstable_postpone;function b(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function w(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,dynamicMetadata:null,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function v(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function _(e,t,r){if(t)switch(t.type){case"cache":case"unstable-cache":case"private-cache":return}if(!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t)switch(t.type){case"prerender-ppr":return O(e.route,r,t.dynamicTracking);case"prerender-legacy":t.revalidate=0;let n=Object.defineProperty(new l.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=n.stack,n}}}function S(e,t,r){let n=Object.defineProperty(new l.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function E(e){switch(e.type){case"cache":case"unstable-cache":case"private-cache":return}}function x(e,t,r){let n=I(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);r.controller.abort(n);let i=r.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function T(e,t,r,n){let i=n.dynamicTracking;x(e,t,n),i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}function P(e,t,r,n){if(!1===n.controller.signal.aborted){x(e,t,n);let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}throw I(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}function A({reason:e,route:t}){let r=u.workUnitAsyncStorage.getStore();O(t,e,r&&"prerender-ppr"===r.type?r.dynamicTracking:null)}function O(e,t,r){(function(){if(!y)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),o.default.unstable_postpone(C(e,t))}function C(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function R(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&k(e.message)}function k(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===k(C("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let N="NEXT_PRERENDER_INTERRUPTED";function I(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest=N,t}function $(e){return"object"==typeof e&&null!==e&&e.digest===N&&"name"in e&&"message"in e&&e instanceof Error}function j(e){return e.length>0}function D(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function L(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function M(){let e=new AbortController;return e.abort(Object.defineProperty(new g.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),e.signal}function U(e){switch(e.type){case"prerender":case"prerender-runtime":let t=new AbortController;if(e.cacheSignal)e.cacheSignal.inputReady().then(()=>{t.abort()});else{let r=(0,u.getRuntimeStagePromise)(e);r?r.then(()=>(0,p.scheduleOnNextTick)(()=>t.abort())):(0,p.scheduleOnNextTick)(()=>t.abort())}return t.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function q(e,t){let r=t.dynamicTracking;r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function B(e){let t=d.workAsyncStorage.getStore(),r=u.workUnitAsyncStorage.getStore();if(t&&r)switch(r.type){case"prerender-client":case"prerender":{let n=r.fallbackRouteParams;n&&n.size>0&&o.default.use((0,h.makeHangingPromise)(r.renderSignal,t.route,e));break}case"prerender-ppr":{let n=r.fallbackRouteParams;if(n&&n.size>0)return O(t.route,e,r.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new m.InvariantError(`\`${e}\` was called during a runtime prerender. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new m.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function F(e){let t=d.workAsyncStorage.getStore(),r=u.workUnitAsyncStorage.getStore();if(t)switch(!r&&(0,u.throwForMissingRequestStore)(e),r.type){case"prerender-client":o.default.use((0,h.makeHangingPromise)(r.renderSignal,t.route,e));break;case"prerender-legacy":case"prerender-ppr":if(t.forceStatic)return;throw Object.defineProperty(new g.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new m.InvariantError(`\`${e}\` was called from a Server Component. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new m.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let Q=/\n\s+at Suspense \(<anonymous>\)/,H=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${f.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),V=RegExp(`\\n\\s+at ${f.METADATA_BOUNDARY_NAME}[\\n\\s]`),K=RegExp(`\\n\\s+at ${f.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),W=RegExp(`\\n\\s+at ${f.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function z(e,t,r,n){if(!W.test(t)){if(V.test(t)){r.hasDynamicMetadata=!0;return}if(K.test(t)){r.hasDynamicViewport=!0;return}if(H.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(Q.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=X(`Route "${e.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function J(e,t,r,n){if(!W.test(t)){if(V.test(t)){r.dynamicMetadata=X(`Route "${e.route}": Uncached data or \`connection()\` was accessed inside \`generateMetadata\`. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,t);return}if(K.test(t)){let n=X(`Route "${e.route}": Uncached data or \`connection()\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,t);r.dynamicErrors.push(n);return}if(H.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(Q.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=X(`Route "${e.route}": Uncached data or \`connection()\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function G(e,t,r,n){if(!W.test(t)){if(V.test(t)){r.dynamicMetadata=X(`Route "${e.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateMetadata\` or you have file-based metadata such as icons that depend on dynamic params segments. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,t);return}if(K.test(t)){let n=X(`Route "${e.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,t);r.dynamicErrors.push(n);return}if(H.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(Q.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=X(`Route "${e.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function X(e,t){let r=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r.stack=r.name+": "+e+t,r}var Y=((i={})[i.Full=0]="Full",i[i.Empty=1]="Empty",i[i.Errored=2]="Errored",i);function Z(e,t){console.error(t),e.dev||(e.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function ee(e,t,r,n){if(n.syncDynamicErrorWithStack)throw Z(e,n.syncDynamicErrorWithStack),new c.StaticGenBailoutError;if(0!==t){if(r.hasSuspenseAboveBody)return;let n=r.dynamicErrors;if(n.length>0){for(let t=0;t<n.length;t++)Z(e,n[t]);throw new c.StaticGenBailoutError}if(r.hasDynamicViewport)throw console.error(`Route "${e.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new c.StaticGenBailoutError;if(1===t)throw console.error(`Route "${e.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new c.StaticGenBailoutError}else if(!1===r.hasAllowedDynamic&&r.hasDynamicMetadata)throw console.error(`Route "${e.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new c.StaticGenBailoutError}function et(e,t,r){if(r.hasSuspenseAboveBody)return[];if(0!==t){let n=r.dynamicErrors;if(n.length>0)return n;if(1===t)return[Object.defineProperty(new m.InvariantError(`Route "${e.route}" did not produce a static shell and Next.js was unable to determine a reason.`),"__NEXT_ERROR_CODE",{value:"E936",enumerable:!1,configurable:!0})]}else if(!1===r.hasAllowedDynamic&&0===r.dynamicErrors.length&&r.dynamicMetadata)return[r.dynamicMetadata];return[]}function er(e,t){return e.runtimeStagePromise?e.runtimeStagePromise.then(()=>t):t}},17980,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={isRequestAPICallableInsideAfter:function(){return c},throwForSearchParamsAccessInUseCache:function(){return l},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return o}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(16046),a=e.r(24725);function o(e,t){throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${e} with \`dynamic = "error"\` couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function l(e,t){let r=Object.defineProperty(Error(`Route ${e.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(r,t),e.invalidDynamicUsageError??=r,r}function c(){let e=a.afterTaskAsyncStorage.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}},40997,(e,t,r)=>{"use strict";function n(){let e,t,r=new Promise((r,n)=>{e=r,t=n});return{resolve:e,reject:t,promise:r}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createPromiseWithResolvers",{enumerable:!0,get:function(){return n}})},58040,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i={RenderStage:function(){return l},StagedRenderingController:function(){return c}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});let a=e.r(67874),o=e.r(40997);var l=((n={})[n.Before=1]="Before",n[n.Static=2]="Static",n[n.Runtime=3]="Runtime",n[n.Dynamic=4]="Dynamic",n[n.Abandoned=5]="Abandoned",n);class c{constructor(e=null,t){this.abortSignal=e,this.hasRuntimePrefetch=t,this.currentStage=1,this.staticInterruptReason=null,this.runtimeInterruptReason=null,this.staticStageEndTime=1/0,this.runtimeStageEndTime=1/0,this.runtimeStageListeners=[],this.dynamicStageListeners=[],this.runtimeStagePromise=(0,o.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,o.createPromiseWithResolvers)(),this.mayAbandon=!1,e&&(e.addEventListener("abort",()=>{let{reason:t}=e;this.currentStage<3&&(this.runtimeStagePromise.promise.catch(u),this.runtimeStagePromise.reject(t)),(this.currentStage<4||5===this.currentStage)&&(this.dynamicStagePromise.promise.catch(u),this.dynamicStagePromise.reject(t))},{once:!0}),this.mayAbandon=!0)}onStage(e,t){if(this.currentStage>=e)t();else if(3===e)this.runtimeStageListeners.push(t);else if(4===e)this.dynamicStageListeners.push(t);else throw Object.defineProperty(new a.InvariantError(`Invalid render stage: ${e}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}canSyncInterrupt(){if(1===this.currentStage)return!1;let e=this.hasRuntimePrefetch?4:3;return this.currentStage<e}syncInterruptCurrentStageWithReason(e){if(1!==this.currentStage){if(this.mayAbandon)return this.abandonRenderImpl();switch(this.currentStage){case 2:this.staticInterruptReason=e,this.advanceStage(4);return;case 3:this.hasRuntimePrefetch&&(this.runtimeInterruptReason=e,this.advanceStage(4));return}}}getStaticInterruptReason(){return this.staticInterruptReason}getRuntimeInterruptReason(){return this.runtimeInterruptReason}getStaticStageEndTime(){return this.staticStageEndTime}getRuntimeStageEndTime(){return this.runtimeStageEndTime}abandonRender(){if(!this.mayAbandon)throw Object.defineProperty(new a.InvariantError("`abandonRender` called on a stage controller that cannot be abandoned."),"__NEXT_ERROR_CODE",{value:"E938",enumerable:!1,configurable:!0});this.abandonRenderImpl()}abandonRenderImpl(){let{currentStage:e}=this;switch(e){case 2:this.currentStage=5,this.resolveRuntimeStage();return;case 3:this.currentStage=5;return}}advanceStage(e){if(e<=this.currentStage)return;let t=this.currentStage;if(this.currentStage=e,t<3&&e>=3&&(this.staticStageEndTime=performance.now()+performance.timeOrigin,this.resolveRuntimeStage()),t<4&&e>=4){this.runtimeStageEndTime=performance.now()+performance.timeOrigin,this.resolveDynamicStage();return}}resolveRuntimeStage(){let e=this.runtimeStageListeners;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.runtimeStagePromise.resolve()}resolveDynamicStage(){let e=this.dynamicStageListeners;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.dynamicStagePromise.resolve()}getStagePromise(e){switch(e){case 3:return this.runtimeStagePromise.promise;case 4:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new a.InvariantError(`Invalid render stage: ${e}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(e){return this.getStagePromise(e)}delayUntilStage(e,t,r){var n,i,s;let a,o=(n=this.getStagePromise(e),i=t,s=r,a=new Promise((e,t)=>{n.then(e.bind(null,s),t)}),void 0!==i&&(a.displayName=i),a);return this.abortSignal&&o.catch(u),o}}function u(){}},47206,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"connection",{enumerable:!0,get:function(){return c}});let n=e.r(56704),i=e.r(32319),s=e.r(78800),a=e.r(16046),o=e.r(58788),l=e.r(17980);function c(){let e=n.workAsyncStorage.getStore(),t=i.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside \`after()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but \`after()\` executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E827",enumerable:!1,configurable:!0});if(e.forceStatic)return Promise.resolve(void 0);if(e.dynamicShouldError)throw Object.defineProperty(new a.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E847",enumerable:!1,configurable:!0});if(t)switch(t.type){case"cache":{let t=Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E841",enumerable:!1,configurable:!0});throw Error.captureStackTrace(t,c),e.invalidDynamicUsageError??=t,t}case"private-cache":{let t=Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E837",enumerable:!1,configurable:!0});throw Error.captureStackTrace(t,c),e.invalidDynamicUsageError??=t,t}case"unstable-cache":throw Object.defineProperty(Error(`Route ${e.route} used \`connection()\` inside a function cached with \`unstable_cache()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E840",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,o.makeHangingPromise)(t.renderSignal,e.route,"`connection()`");case"prerender-ppr":return(0,s.postponeWithTracking)(e.route,"connection",t.dynamicTracking);case"prerender-legacy":return(0,s.throwToInterruptStaticGeneration)("connection",e,t);case"request":return(0,s.trackDynamicDataInDynamicRender)(t),Promise.resolve(void 0)}}(0,i.throwForMissingRequestStore)("connection")}e.r(58040)},86205,(e,t,r)=>{let n={NextRequest:e.r(44312).NextRequest,NextResponse:e.r(66972).NextResponse,ImageResponse:e.r(52041).ImageResponse,userAgentFromString:e.r(19410).userAgentFromString,userAgent:e.r(19410).userAgent,URLPattern:e.r(43932).URLPattern,after:e.r(35713).after,connection:e.r(47206).connection};t.exports=n,r.NextRequest=n.NextRequest,r.NextResponse=n.NextResponse,r.ImageResponse=n.ImageResponse,r.userAgentFromString=n.userAgentFromString,r.userAgent=n.userAgent,r.URLPattern=n.URLPattern,r.after=n.after,r.connection=n.connection},876,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ActionDidNotRevalidate:function(){return s},ActionDidRevalidateDynamicOnly:function(){return o},ActionDidRevalidateStaticAndDynamic:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=0,a=1,o=2},21371,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={MutableRequestCookiesAdapter:function(){return p},ReadonlyRequestCookiesError:function(){return c},RequestCookiesAdapter:function(){return u},appendMutableCookies:function(){return f},areCookiesMutableInCurrentPhase:function(){return m},createCookiesWithMutableAccessCheck:function(){return g},getModifiedCookieValues:function(){return h},responseCookiesToRequestCookies:function(){return b}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(99101),a=e.r(97760),o=e.r(56704),l=e.r(876);class c extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new c}}class u{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return c.callable;default:return a.ReflectAdapter.get(e,t,r)}}})}}let d=Symbol.for("next.mutated.cookies");function h(e){let t=e[d];return t&&Array.isArray(t)&&0!==t.length?t:[]}function f(e,t){let r=h(t);if(0===r.length)return!1;let n=new s.ResponseCookies(e),i=n.getAll();for(let e of r)n.set(e);for(let e of i)n.set(e);return!0}class p{static wrap(e,t){let r=new s.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],i=new Set,c=()=>{let e=o.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=l.ActionDidRevalidateStaticAndDynamic),n=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of n){let r=new s.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},u=new Proxy(r,{get(e,t,r){switch(t){case d:return n;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),u}finally{c()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),u}finally{c()}};default:return a.ReflectAdapter.get(e,t,r)}}});return u}}function g(e){let t=new Proxy(e.mutableCookies,{get(r,n,i){switch(n){case"delete":return function(...n){return y(e,"cookies().delete"),r.delete(...n),t};case"set":return function(...n){return y(e,"cookies().set"),r.set(...n),t};default:return a.ReflectAdapter.get(r,n,i)}}});return t}function m(e){return"action"===e.phase}function y(e,t){if(!m(e))throw new c}function b(e){let t=new s.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},16281,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return l}});let n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(void 0);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=s?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(e.r(99151));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}let s={current:null},a="function"==typeof n.cache?n.cache:e=>e,o=console.warn;function l(e){return function(...t){o(e(...t))}}a(e=>{try{o(s.current)}finally{s.current=null}})},16307,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"cookies",{enumerable:!0,get:function(){return f}});let n=e.r(21371),i=e.r(99101),s=e.r(56704),a=e.r(32319),o=e.r(78800),l=e.r(16046),c=e.r(58788),u=e.r(16281),d=e.r(17980),h=e.r(67874);function f(){let e="cookies",t=s.workAsyncStorage.getStore(),r=a.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(t.forceStatic)return g(n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({}))));if(t.dynamicShouldError)throw Object.defineProperty(new l.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(r)switch(r.type){case"cache":let s=Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(s,f),t.invalidDynamicUsageError??=s,s;case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var u=t,m=r;let a=p.get(m);if(a)return a;let y=(0,c.makeHangingPromise)(m.renderSignal,u.route,"`cookies()`");return p.set(m,y),y;case"prerender-client":let b="`cookies`";throw Object.defineProperty(new h.InvariantError(`${b} must not be used within a Client Component. Next.js should be preventing ${b} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,o.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,o.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,o.delayUntilRuntimeStage)(r,g(r.cookies));case"private-cache":return g(r.cookies);case"request":return(0,o.trackDynamicDataInDynamicRender)(r),g((0,n.areCookiesMutableInCurrentPhase)(r)?r.userspaceMutableCookies:r.cookies)}}(0,a.throwForMissingRequestStore)(e)}e.r(58040);let p=new WeakMap;function g(e){let t=p.get(e);if(t)return t;let r=Promise.resolve(e);return p.set(e,r),r}(0,u.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},14471,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={HeadersAdapter:function(){return o},ReadonlyHeadersError:function(){return a}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(97760);class a extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new a}}class o extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return s.ReflectAdapter.get(t,r,n);let i=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==a)return s.ReflectAdapter.get(t,a,n)},set(t,r,n,i){if("symbol"==typeof r)return s.ReflectAdapter.set(t,r,n,i);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);return s.ReflectAdapter.set(t,o??r,n,i)},has(t,r){if("symbol"==typeof r)return s.ReflectAdapter.has(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==i&&s.ReflectAdapter.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return s.ReflectAdapter.deleteProperty(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===i||s.ReflectAdapter.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return a.callable;default:return s.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new o(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},42026,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"headers",{enumerable:!0,get:function(){return h}});let n=e.r(14471),i=e.r(56704),s=e.r(32319),a=e.r(78800),o=e.r(16046),l=e.r(58788),c=e.r(16281),u=e.r(17980),d=e.r(67874);function h(){let e="headers",t=i.workAsyncStorage.getStore(),r=s.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,u.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(t.forceStatic)return p(n.HeadersAdapter.seal(new Headers({})));if(r)switch(r.type){case"cache":{let e=Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(e,h),t.invalidDynamicUsageError??=e,e}case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(r)switch(r.type){case"prerender":var c=t,g=r;let i=f.get(g);if(i)return i;let s=(0,l.makeHangingPromise)(g.renderSignal,c.route,"`headers()`");return f.set(g,s),s;case"prerender-client":let m="`headers`";throw Object.defineProperty(new d.InvariantError(`${m} must not be used within a client component. Next.js should be preventing ${m} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,a.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,a.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,a.delayUntilRuntimeStage)(r,p(r.headers));case"private-cache":return p(r.headers);case"request":return(0,a.trackDynamicDataInDynamicRender)(r),p(r.headers)}}(0,s.throwForMissingRequestStore)(e)}e.r(58040);let f=new WeakMap;function p(e){let t=f.get(e);if(t)return t;let r=Promise.resolve(e);return f.set(e,r),r}(0,c.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},62180,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"draftMode",{enumerable:!0,get:function(){return u}});let n=e.r(32319),i=e.r(56704),s=e.r(78800),a=e.r(16281),o=e.r(16046),l=e.r(40143),c=e.r(67874);function u(){let e=i.workAsyncStorage.getStore(),t=n.workUnitAsyncStorage.getStore();switch((!e||!t)&&(0,n.throwForMissingRequestStore)("draftMode"),t.type){case"prerender-runtime":return(0,s.delayUntilRuntimeStage)(t,d(t.draftMode,e));case"request":return d(t.draftMode,e);case"cache":case"private-cache":case"unstable-cache":let r=(0,n.getDraftModeProviderForCacheScope)(e,t);if(r)return d(r,e);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return d(null,e);default:return t}}function d(e,t){let r=f.get(e??h);return r||Promise.resolve(new p(e))}e.r(97760);let h={},f=new WeakMap;class p{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){g("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){g("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function g(e,t){let r=i.workAsyncStorage.getStore(),a=n.workUnitAsyncStorage.getStore();if(r){if((null==a?void 0:a.phase)==="after")throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(r.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${r.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(a)switch(a.type){case"cache":case"private-cache":{let n=Object.defineProperty(Error(`Route ${r.route} used "${e}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(n,t),r.invalidDynamicUsageError??=n,n}case"unstable-cache":throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let t=Object.defineProperty(Error(`Route ${r.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,s.abortAndThrowOnSynchronousRequestDataAccess)(r.route,e,t,a)}case"prerender-client":let n="`draftMode`";throw Object.defineProperty(new c.InvariantError(`${n} must not be used within a Client Component. Next.js should be preventing ${n} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,s.postponeWithTracking)(r.route,e,a.dynamicTracking);case"prerender-legacy":a.revalidate=0;let i=Object.defineProperty(new l.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.dynamicUsageDescription=e,r.dynamicUsageStack=i.stack,i;case"request":(0,s.trackDynamicDataInDynamicRender)(a)}}}(0,a.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},48159,(e,t,r)=>{t.exports.cookies=e.r(16307).cookies,t.exports.headers=e.r(42026).headers,t.exports.draftMode=e.r(62180).draftMode},89884,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return i}});class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class i extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},80134,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return i}});var n,i=((n={})[n.SeeOther=303]="SeeOther",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},52081,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i={REDIRECT_ERROR_CODE:function(){return o},RedirectType:function(){return l},isRedirectError:function(){return c}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});let a=e.r(80134),o="NEXT_REDIRECT";var l=((n={}).push="push",n.replace="replace",n);function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,n]=t,i=t.slice(2,-2).join(";"),s=Number(t.at(-2));return r===o&&("replace"===n||"push"===n)&&"string"==typeof i&&!isNaN(s)&&s in a.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},94945,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={getRedirectError:function(){return l},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return h},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return u},redirect:function(){return c}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(80134),a=e.r(52081),o=e.r(20635).actionAsyncStorage;function l(e,t,r=s.RedirectStatusCode.TemporaryRedirect){let n=Object.defineProperty(Error(a.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n.digest=`${a.REDIRECT_ERROR_CODE};${t};${e};${r};`,n}function c(e,t){throw l(e,t??=o?.getStore()?.isAction?a.RedirectType.push:a.RedirectType.replace,s.RedirectStatusCode.TemporaryRedirect)}function u(e,t=a.RedirectType.replace){throw l(e,t,s.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,a.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function h(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function f(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},59464,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={HTTPAccessErrorStatus:function(){return s},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return o},getAccessFallbackErrorTypeByStatus:function(){return u},getAccessFallbackHTTPStatus:function(){return c},isHTTPAccessFallbackError:function(){return l}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},a=new Set(Object.values(s)),o="NEXT_HTTP_ERROR_FALLBACK";function l(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===o&&a.has(Number(r))}function c(e){return Number(e.digest.split(";")[1])}function u(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},85367,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"notFound",{enumerable:!0,get:function(){return s}});let n=e.r(59464),i=`${n.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function s(){let e=Object.defineProperty(Error(i),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=i,e}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},13354,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"forbidden",{enumerable:!0,get:function(){return n}}),e.r(59464).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},41576,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unauthorized",{enumerable:!0,get:function(){return n}}),e.r(59464).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},22703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isPostpone",{enumerable:!0,get:function(){return i}});let n=Symbol.for("react.postpone");function i(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}},93798,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return s}});let n=e.r(59464),i=e.r(52081);function s(e){return(0,i.isRedirectError)(e)||(0,n.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},17400,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,a.isNextRouterError)(t)||(0,s.isBailoutToCSRError)(t)||(0,l.isDynamicServerError)(t)||(0,o.isDynamicPostpone)(t)||(0,i.isPostpone)(t)||(0,n.isHangingPromiseRejectionError)(t)||(0,o.isPrerenderInterruptedError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=e.r(58788),i=e.r(22703),s=e.r(33078),a=e.r(93798),o=e.r(78800),l=e.r(40143);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},86140,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=e.r(17400).unstable_rethrow;("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},93704,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ReadonlyURLSearchParams:function(){return s.ReadonlyURLSearchParams},RedirectType:function(){return o.RedirectType},forbidden:function(){return c.forbidden},notFound:function(){return l.notFound},permanentRedirect:function(){return a.permanentRedirect},redirect:function(){return a.redirect},unauthorized:function(){return u.unauthorized},unstable_isUnrecognizedActionError:function(){return h},unstable_rethrow:function(){return d.unstable_rethrow}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let s=e.r(89884),a=e.r(94945),o=e.r(52081),l=e.r(85367),c=e.r(13354),u=e.r(41576),d=e.r(86140);function h(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},26563,e=>{"use strict";let t,r,n,i,s,a,o,l,c,u,d,h;async function f(){return"_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&await _ENTRIES.middleware_instrumentation}let p=null;async function g(){if("phase-production-build"===process.env.NEXT_PHASE)return;p||(p=f());let e=await p;if(null==e?void 0:e.register)try{await e.register()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}async function m(...e){let t=await f();try{var r;await (null==t||null==(r=t.onRequestError)?void 0:r.call(t,...e))}catch(e){console.error("Error in instrumentation.onRequestError:",e)}}let y=null;class b extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class w extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class v extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}let _="_N_T_",S={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};function E(e){var t,r,n,i,s,a=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,s=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),i=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(s=!0,o=i,a.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!s||o>=e.length)&&a.push(e.substring(t,e.length))}return a}function x(e){let t={},r=[];if(e)for(let[n,i]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...E(i)),t[n]=1===r.length?r[0]:r):t[n]=i;return t}function T(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}({...S,GROUP:{builtinReact:[S.reactServerComponents,S.actionBrowser],serverOnly:[S.reactServerComponents,S.actionBrowser,S.instrument,S.middleware],neutralTarget:[S.apiNode,S.apiEdge],clientOnly:[S.serverSideRendering,S.appPagesBrowser],bundled:[S.reactServerComponents,S.actionBrowser,S.serverSideRendering,S.appPagesBrowser,S.shared,S.instrument,S.middleware],appPages:[S.reactServerComponents,S.serverSideRendering,S.appPagesBrowser,S.actionBrowser]}});let P=Symbol("response"),A=Symbol("passThrough"),O=Symbol("waitUntil");class C{constructor(e,t){this[A]=!1,this[O]=t?{kind:"external",function:t}:{kind:"internal",promises:[]}}respondWith(e){this[P]||(this[P]=Promise.resolve(e))}passThroughOnException(){this[A]=!0}waitUntil(e){if("external"===this[O].kind)return(0,this[O].function)(e);this[O].promises.push(e)}}class R extends C{constructor(e){var t;super(e.request,null==(t=e.context)?void 0:t.waitUntil),this.sourcePage=e.page}get request(){throw Object.defineProperty(new b({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new b({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}function k(e){return e.replace(/\/$/,"")||"/"}function N(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function I(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=N(e);return`${t}${r}${n}${i}`}function $(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=N(e);return`${r}${t}${n}${i}`}function j(e,t){if("string"!=typeof e)return!1;let{pathname:r}=N(e);return r===t||r.startsWith(t+"/")}let D=new WeakMap;function L(e,t){let r;if(!t)return{pathname:e};let n=D.get(t);n||(n=t.map(e=>e.toLowerCase()),D.set(t,n));let i=e.split("/",2);if(!i[1])return{pathname:e};let s=i[1].toLowerCase(),a=n.indexOf(s);return a<0?{pathname:e}:(r=t[a],{pathname:e=e.slice(r.length+1)||"/",detectedLocale:r})}let M=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function U(e,t){return new URL(String(e).replace(M,"localhost"),t&&String(t).replace(M,"localhost"))}let q=Symbol("NextURLInternal");class B{constructor(e,t,r){let n,i;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,i=r||{}):i=r||t||{},this[q]={url:U(e,n??i.base),options:i,basePath:""},this.analyze()}analyze(){var e,t,r,n,i;let s=function(e,t){let{basePath:r,i18n:n,trailingSlash:i}=t.nextConfig??{},s={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):i};r&&j(s.pathname,r)&&(s.pathname=function(e,t){if(!j(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:`/${r}`}(s.pathname,r),s.basePath=r);let a=s.pathname;if(s.pathname.startsWith("/_next/data/")&&s.pathname.endsWith(".json")){let e=s.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");s.buildId=e[0],a="index"!==e[1]?`/${e.slice(1).join("/")}`:"/",!0===t.parseData&&(s.pathname=a)}if(n){let e=t.i18nProvider?t.i18nProvider.analyze(s.pathname):L(s.pathname,n.locales);s.locale=e.detectedLocale,s.pathname=e.pathname??s.pathname,!e.detectedLocale&&s.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(a):L(a,n.locales)).detectedLocale&&(s.locale=e.detectedLocale)}return s}(this[q].url.pathname,{nextConfig:this[q].options.nextConfig,parseData:!0,i18nProvider:this[q].options.i18nProvider}),a=function(e,t){let r;if(t?.host&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[q].url,this[q].options.headers);this[q].domainLocale=this[q].options.i18nProvider?this[q].options.i18nProvider.detectDomainLocale(a):function(e,t,r){if(e){for(let n of(r&&(r=r.toLowerCase()),e))if(t===n.domain?.split(":",1)[0].toLowerCase()||r===n.defaultLocale.toLowerCase()||n.locales?.some(e=>e.toLowerCase()===r))return n}}(null==(t=this[q].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,a);let o=(null==(r=this[q].domainLocale)?void 0:r.defaultLocale)||(null==(i=this[q].options.nextConfig)||null==(n=i.i18n)?void 0:n.defaultLocale);this[q].url.pathname=s.pathname,this[q].defaultLocale=o,this[q].basePath=s.basePath??"",this[q].buildId=s.buildId,this[q].locale=s.locale??o,this[q].trailingSlash=s.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let i=e.toLowerCase();return!n&&(j(i,"/api")||j(i,`/${t.toLowerCase()}`))?e:I(e,`/${t}`)}((e={basePath:this[q].basePath,buildId:this[q].buildId,defaultLocale:this[q].options.forceLocale?void 0:this[q].defaultLocale,locale:this[q].locale,pathname:this[q].url.pathname,trailingSlash:this[q].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=k(t)),e.buildId&&(t=$(I(t,`/_next/data/${e.buildId}`),"/"===e.pathname?"index.json":".json")),t=I(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:$(t,"/"):k(t)}formatSearch(){return this[q].url.search}get buildId(){return this[q].buildId}set buildId(e){this[q].buildId=e}get locale(){return this[q].locale??""}set locale(e){var t,r;if(!this[q].locale||!(null==(r=this[q].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[q].locale=e}get defaultLocale(){return this[q].defaultLocale}get domainLocale(){return this[q].domainLocale}get searchParams(){return this[q].url.searchParams}get host(){return this[q].url.host}set host(e){this[q].url.host=e}get hostname(){return this[q].url.hostname}set hostname(e){this[q].url.hostname=e}get port(){return this[q].url.port}set port(e){this[q].url.port=e}get protocol(){return this[q].url.protocol}set protocol(e){this[q].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[q].url=U(e),this.analyze()}get origin(){return this[q].url.origin}get pathname(){return this[q].url.pathname}set pathname(e){this[q].url.pathname=e}get hash(){return this[q].url.hash}set hash(e){this[q].url.hash=e}get search(){return this[q].url.search}set search(e){this[q].url.search=e}get password(){return this[q].url.password}set password(e){this[q].url.password=e}get username(){return this[q].url.username}set username(e){this[q].url.username=e}get basePath(){return this[q].basePath}set basePath(e){this[q].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new B(String(this),this[q].options)}}var F=e.i(15305);let Q=Symbol("internal request");class H extends Request{constructor(e,t={}){const r="string"!=typeof e&&"url"in e?e.url:String(e);T(r),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(r,t);const n=new B(r,{headers:x(this.headers),nextConfig:t.nextConfig});this[Q]={cookies:new F.RequestCookies(this.headers),nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[Q].cookies}get nextUrl(){return this[Q].nextUrl}get page(){throw new w}get ua(){throw new v}get url(){return this[Q].url}}class V{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}let K=Symbol("internal response"),W=new Set([301,302,303,307,308]);function z(e,t){var r;if(null==e||null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let r=[];for(let[n,i]of e.request.headers)t.set("x-middleware-request-"+n,i),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class J extends Response{constructor(e,t={}){super(e,t);const r=this.headers,n=new Proxy(new F.ResponseCookies(r),{get(e,n,i){switch(n){case"delete":case"set":return(...i)=>{let s=Reflect.apply(e[n],e,i),a=new Headers(r);return s instanceof F.ResponseCookies&&r.set("x-middleware-set-cookie",s.getAll().map(e=>(0,F.stringifyCookie)(e)).join(",")),z(t,a),s};default:return V.get(e,n,i)}}});this[K]={cookies:n,url:t.url?new B(t.url,{headers:x(r),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[K].cookies}static json(e,t){let r=Response.json(e,t);return new J(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!W.has(r))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let n="object"==typeof t?t:{},i=new Headers(null==n?void 0:n.headers);return i.set("Location",T(e)),new J(null,{...n,headers:i,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",T(e)),z(t,r),new J(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),z(e,t),new J(null,{...e,headers:t})}}function G(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),i=n.origin===r.origin;return{url:i?n.toString().slice(r.origin.length):n.toString(),isRelative:i}}let X="next-router-prefetch",Y=["rsc","next-router-state-tree",X,"next-hmr-refresh","next-router-segment-prefetch"],Z="_rsc";class ee extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ee}}class et extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return V.get(t,r,n);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);if(void 0!==s)return V.get(t,s,n)},set(t,r,n,i){if("symbol"==typeof r)return V.set(t,r,n,i);let s=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===s);return V.set(t,a??r,n,i)},has(t,r){if("symbol"==typeof r)return V.has(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==i&&V.has(t,i)},deleteProperty(t,r){if("symbol"==typeof r)return V.deleteProperty(t,r);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===i||V.deleteProperty(t,i)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return ee.callable;default:return V.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new et(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}var er=e.i(56704);class en extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new en}}class ei{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return en.callable;default:return V.get(e,t,r)}}})}}let es=Symbol.for("next.mutated.cookies");class ea{static wrap(e,t){let r=new F.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],i=new Set,s=()=>{let e=er.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=1),n=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of n){let r=new F.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},a=new Proxy(r,{get(e,t,r){switch(t){case es:return n;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),a}finally{s()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),a}finally{s()}};default:return V.get(e,t,r)}}});return a}}function eo(e,t){if("action"!==e.phase)throw new en}var el=((fb=el||{}).handleRequest="BaseServer.handleRequest",fb.run="BaseServer.run",fb.pipe="BaseServer.pipe",fb.getStaticHTML="BaseServer.getStaticHTML",fb.render="BaseServer.render",fb.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",fb.renderToResponse="BaseServer.renderToResponse",fb.renderToHTML="BaseServer.renderToHTML",fb.renderError="BaseServer.renderError",fb.renderErrorToResponse="BaseServer.renderErrorToResponse",fb.renderErrorToHTML="BaseServer.renderErrorToHTML",fb.render404="BaseServer.render404",fb),ec=((fw=ec||{}).loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",fw.loadComponents="LoadComponents.loadComponents",fw),eu=((fv=eu||{}).getRequestHandler="NextServer.getRequestHandler",fv.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",fv.getServer="NextServer.getServer",fv.getServerRequestHandler="NextServer.getServerRequestHandler",fv.createServer="createServer.createServer",fv),ed=((f_=ed||{}).compression="NextNodeServer.compression",f_.getBuildId="NextNodeServer.getBuildId",f_.createComponentTree="NextNodeServer.createComponentTree",f_.clientComponentLoading="NextNodeServer.clientComponentLoading",f_.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",f_.generateStaticRoutes="NextNodeServer.generateStaticRoutes",f_.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",f_.generatePublicRoutes="NextNodeServer.generatePublicRoutes",f_.generateImageRoutes="NextNodeServer.generateImageRoutes.route",f_.sendRenderResult="NextNodeServer.sendRenderResult",f_.proxyRequest="NextNodeServer.proxyRequest",f_.runApi="NextNodeServer.runApi",f_.render="NextNodeServer.render",f_.renderHTML="NextNodeServer.renderHTML",f_.imageOptimizer="NextNodeServer.imageOptimizer",f_.getPagePath="NextNodeServer.getPagePath",f_.getRoutesManifest="NextNodeServer.getRoutesManifest",f_.findPageComponents="NextNodeServer.findPageComponents",f_.getFontManifest="NextNodeServer.getFontManifest",f_.getServerComponentManifest="NextNodeServer.getServerComponentManifest",f_.getRequestHandler="NextNodeServer.getRequestHandler",f_.renderToHTML="NextNodeServer.renderToHTML",f_.renderError="NextNodeServer.renderError",f_.renderErrorToHTML="NextNodeServer.renderErrorToHTML",f_.render404="NextNodeServer.render404",f_.startResponse="NextNodeServer.startResponse",f_.route="route",f_.onProxyReq="onProxyReq",f_.apiResolver="apiResolver",f_.internalFetch="internalFetch",f_),eh=((fS=eh||{}).startServer="startServer.startServer",fS),ef=((fE=ef||{}).getServerSideProps="Render.getServerSideProps",fE.getStaticProps="Render.getStaticProps",fE.renderToString="Render.renderToString",fE.renderDocument="Render.renderDocument",fE.createBodyResult="Render.createBodyResult",fE),ep=((fx=ep||{}).renderToString="AppRender.renderToString",fx.renderToReadableStream="AppRender.renderToReadableStream",fx.getBodyResult="AppRender.getBodyResult",fx.fetch="AppRender.fetch",fx),eg=((fT=eg||{}).executeRoute="Router.executeRoute",fT),em=((fP=em||{}).runHandler="Node.runHandler",fP),ey=((fA=ey||{}).runHandler="AppRouteRouteHandlers.runHandler",fA),eb=((fO=eb||{}).generateMetadata="ResolveMetadata.generateMetadata",fO.generateViewport="ResolveMetadata.generateViewport",fO),ew=((fC=ew||{}).execute="Middleware.execute",fC);let ev=new Set(["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"]),e_=new Set(["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]);function eS(e){return null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}let eE=process.env.NEXT_OTEL_PERFORMANCE_PREFIX;try{t=e.r(34474)}catch(r){t=e.r(78338)}let{context:ex,propagation:eT,trace:eP,SpanStatusCode:eA,SpanKind:eO,ROOT_CONTEXT:eC}=t;class eR extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}let ek=(e,t)=>{"object"==typeof t&&null!==t&&t instanceof eR&&t.bubble?e.setAttribute("next.bubble",!0):(t&&(e.recordException(t),e.setAttribute("error.type",t.name)),e.setStatus({code:eA.ERROR,message:null==t?void 0:t.message})),e.end()},eN=new Map,eI=t.createContextKey("next.rootSpanId"),e$=0,ej={set(e,t,r){e.push({key:t,value:r})}},eD=(c=new class e{getTracerInstance(){return eP.getTracer("next.js","0.0.1")}getContext(){return ex}getTracePropagationData(){let e=ex.active(),t=[];return eT.inject(e,t,ej),t}getActiveScopeSpan(){return eP.getSpan(null==ex?void 0:ex.active())}withPropagatedContext(e,t,r){let n=ex.active();if(eP.getSpanContext(n))return t();let i=eT.extract(n,e,r);return ex.with(i,t)}trace(...e){let[t,r,n]=e,{fn:i,options:s}="function"==typeof r?{fn:r,options:{}}:{fn:n,options:{...r}},a=s.spanName??t;if(!ev.has(t)&&"1"!==process.env.NEXT_OTEL_VERBOSE||s.hideSpan)return i();let o=this.getSpanContext((null==s?void 0:s.parentSpan)??this.getActiveScopeSpan());o||(o=(null==ex?void 0:ex.active())??eC);let l=o.getValue(eI),c="number"!=typeof l||!eN.has(l),u=e$++;return s.attributes={"next.span_name":a,"next.span_type":t,...s.attributes},ex.with(o.setValue(eI,u),()=>this.getTracerInstance().startActiveSpan(a,s,e=>{let r;eE&&t&&e_.has(t)&&(r="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0);let n=!1,a=()=>{!n&&(n=!0,eN.delete(u),r&&performance.measure(`${eE}:next-${(t.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:r,end:performance.now()}))};if(c&&eN.set(u,new Map(Object.entries(s.attributes??{}))),i.length>1)try{return i(e,t=>ek(e,t))}catch(t){throw ek(e,t),t}finally{a()}try{let t=i(e);if(eS(t))return t.then(t=>(e.end(),t)).catch(t=>{throw ek(e,t),t}).finally(a);return e.end(),a(),t}catch(t){throw ek(e,t),a(),t}}))}wrap(...e){let t=this,[r,n,i]=3===e.length?e:[e[0],{},e[1]];return ev.has(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let s=arguments.length-1,a=arguments[s];if("function"!=typeof a)return t.trace(r,e,()=>i.apply(this,arguments));{let n=t.getContext().bind(ex.active(),a);return t.trace(r,e,(e,t)=>(arguments[s]=function(e){return null==t||t(e),n.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?eP.setSpan(ex.active(),e):void 0}getRootSpanAttributes(){let e=ex.active().getValue(eI);return eN.get(e)}setRootSpanAttribute(e,t){let r=ex.active().getValue(eI),n=eN.get(r);n&&!n.has(e)&&n.set(e,t)}withSpan(e,t){let r=eP.setSpan(ex.active(),e);return ex.with(r,t)}},()=>c),eL="__prerender_bypass";Symbol("__next_preview_data"),Symbol(eL);class eM{constructor(e,t,r,n){var i;const s=e&&function(e,t){let r=et.from(e.headers);return{isOnDemandRevalidate:r.get("x-prerender-revalidate")===t.previewModeId,revalidateOnlyGenerated:r.has("x-prerender-revalidate-if-generated")}}(t,e).isOnDemandRevalidate,a=null==(i=r.get(eL))?void 0:i.value;this._isEnabled=!!(!s&&a&&e&&a===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}get isEnabled(){return this._isEnabled}enable(){if(!this._previewModeId)throw Object.defineProperty(Error("Invariant: previewProps missing previewModeId this should never happen"),"__NEXT_ERROR_CODE",{value:"E93",enumerable:!1,configurable:!0});this._mutableCookies.set({name:eL,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"}),this._isEnabled=!0}disable(){this._mutableCookies.set({name:eL,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)}),this._isEnabled=!1}}function eU(e,t){if("x-middleware-set-cookie"in e.headers&&"string"==typeof e.headers["x-middleware-set-cookie"]){let r=e.headers["x-middleware-set-cookie"],n=new Headers;for(let e of E(r))n.append("set-cookie",e);for(let e of new F.ResponseCookies(n).getAll())t.set(e)}}var eq=e.i(32319),eB=e.i(74998);class eF extends Error{constructor(e,t){super(`Invariant: ${e.endsWith(".")?e:e+"."} This is a bug in Next.js.`,t),this.name="InvariantError"}}e.i(51187),process.env.NEXT_PRIVATE_DEBUG_CACHE,Symbol.for("@next/cache-handlers");let eQ=Symbol.for("@next/cache-handlers-map"),eH=Symbol.for("@next/cache-handlers-set"),eV=globalThis;function eK(){if(eV[eQ])return eV[eQ].entries()}async function eW(e,t){if(!e)return t();let r=ez(e);try{return await t()}finally{var n,i;let t,s,a=(n=r,i=ez(e),t=new Set(n.pendingRevalidatedTags.map(e=>{let t="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return`${e.tag}:${t}`})),s=new Set(n.pendingRevalidateWrites),{pendingRevalidatedTags:i.pendingRevalidatedTags.filter(e=>{let r="object"==typeof e.profile?JSON.stringify(e.profile):e.profile||"";return!t.has(`${e.tag}:${r}`)}),pendingRevalidates:Object.fromEntries(Object.entries(i.pendingRevalidates).filter(([e])=>!(e in n.pendingRevalidates))),pendingRevalidateWrites:i.pendingRevalidateWrites.filter(e=>!s.has(e))});await eG(e,a)}}function ez(e){return{pendingRevalidatedTags:e.pendingRevalidatedTags?[...e.pendingRevalidatedTags]:[],pendingRevalidates:{...e.pendingRevalidates},pendingRevalidateWrites:e.pendingRevalidateWrites?[...e.pendingRevalidateWrites]:[]}}async function eJ(e,t,r){if(0===e.length)return;let n=function(){if(eV[eH])return eV[eH].values()}(),i=[],s=new Map;for(let t of e){let e,r=t.profile;for(let[t]of s)if("string"==typeof t&&"string"==typeof r&&t===r||"object"==typeof t&&"object"==typeof r&&JSON.stringify(t)===JSON.stringify(r)||t===r){e=t;break}let n=e||r;s.has(n)||s.set(n,[]),s.get(n).push(t.tag)}for(let[e,o]of s){let s;if(e){let t;if("object"==typeof e)t=e;else if("string"==typeof e){var a;if(!(t=null==r||null==(a=r.cacheLifeProfiles)?void 0:a[e]))throw Object.defineProperty(Error(`Invalid profile provided "${e}" must be configured under cacheLife in next.config or be "max"`),"__NEXT_ERROR_CODE",{value:"E873",enumerable:!1,configurable:!0})}t&&(s={expire:t.expire})}for(let t of n||[])e?i.push(null==t.updateTags?void 0:t.updateTags.call(t,o,s)):i.push(null==t.updateTags?void 0:t.updateTags.call(t,o));t&&i.push(t.revalidateTag(o,s))}await Promise.all(i)}async function eG(e,t){let r=(null==t?void 0:t.pendingRevalidatedTags)??e.pendingRevalidatedTags??[],n=(null==t?void 0:t.pendingRevalidates)??e.pendingRevalidates??{},i=(null==t?void 0:t.pendingRevalidateWrites)??e.pendingRevalidateWrites??[];return Promise.all([eJ(r,e.incrementalCache,e),...Object.values(n),...i])}let eX=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class eY{disable(){throw eX}getStore(){}run(){throw eX}exit(){throw eX}enterWith(){throw eX}static bind(e){return e}}let eZ="u">typeof globalThis&&globalThis.AsyncLocalStorage;var e0=e.i(24725);class e1{constructor({waitUntil:e,onClose:t,onTaskError:r}){this.workUnitStores=new Set,this.waitUntil=e,this.onClose=t,this.onTaskError=r,this.callbackQueue=new eB.default,this.callbackQueue.pause()}after(e){if(eS(e))this.waitUntil||e2(),this.waitUntil(e.catch(e=>this.reportTaskError("promise",e)));else if("function"==typeof e)this.addCallback(e);else throw Object.defineProperty(Error("`after()`: Argument must be a promise or a function"),"__NEXT_ERROR_CODE",{value:"E50",enumerable:!1,configurable:!0})}addCallback(e){var t;this.waitUntil||e2();let r=eq.workUnitAsyncStorage.getStore();r&&this.workUnitStores.add(r);let n=e0.afterTaskAsyncStorage.getStore(),i=n?n.rootTaskSpawnPhase:null==r?void 0:r.phase;this.runCallbacksOnClosePromise||(this.runCallbacksOnClosePromise=this.runCallbacksOnClose(),this.waitUntil(this.runCallbacksOnClosePromise));let s=(t=async()=>{try{await e0.afterTaskAsyncStorage.run({rootTaskSpawnPhase:i},()=>e())}catch(e){this.reportTaskError("function",e)}},eZ?eZ.bind(t):eY.bind(t));this.callbackQueue.add(s)}async runCallbacksOnClose(){return await new Promise(e=>this.onClose(e)),this.runCallbacks()}async runCallbacks(){if(0===this.callbackQueue.size)return;for(let e of this.workUnitStores)e.phase="after";let e=er.workAsyncStorage.getStore();if(!e)throw Object.defineProperty(new eF("Missing workStore in AfterContext.runCallbacks"),"__NEXT_ERROR_CODE",{value:"E547",enumerable:!1,configurable:!0});return eW(e,()=>(this.callbackQueue.start(),this.callbackQueue.onIdle()))}reportTaskError(e,t){if(console.error("promise"===e?"A promise passed to `after()` rejected:":"An error occurred in a function passed to `after()`:",t),this.onTaskError)try{null==this.onTaskError||this.onTaskError.call(this,t)}catch(e){console.error(Object.defineProperty(new eF("`onTaskError` threw while handling an error thrown from an `after` task",{cause:e}),"__NEXT_ERROR_CODE",{value:"E569",enumerable:!1,configurable:!0}))}}}function e2(){throw Object.defineProperty(Error("`after()` will not work correctly, because `waitUntil` is not available in the current environment."),"__NEXT_ERROR_CODE",{value:"E91",enumerable:!1,configurable:!0})}function e3(e){let t,r={then:(n,i)=>(t||(t=Promise.resolve(e())),t.then(e=>{r.value=e}).catch(()=>{}),t.then(n,i))};return r}class e4{onClose(e){if(this.isClosed)throw Object.defineProperty(Error("Cannot subscribe to a closed CloseController"),"__NEXT_ERROR_CODE",{value:"E365",enumerable:!1,configurable:!0});this.target.addEventListener("close",e),this.listeners++}dispatchClose(){if(this.isClosed)throw Object.defineProperty(Error("Cannot close a CloseController multiple times"),"__NEXT_ERROR_CODE",{value:"E229",enumerable:!1,configurable:!0});this.listeners>0&&this.target.dispatchEvent(new Event("close")),this.isClosed=!0}constructor(){this.target=new EventTarget,this.listeners=0,this.isClosed=!1}}function e5(){return{previewModeId:process.env.__NEXT_PREVIEW_MODE_ID||"",previewModeSigningKey:process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY||"",previewModeEncryptionKey:process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY||""}}let e8=Symbol.for("@next/request-context");async function e6(e,t,r){let n=new Set;for(let t of(e=>{let t=["/layout"];if(e.startsWith("/")){let r=e.split("/");for(let e=1;e<r.length+1;e++){let n=r.slice(0,e).join("/");n&&(n.endsWith("/page")||n.endsWith("/route")||(n=`${n}${!n.endsWith("/")?"/":""}layout`),t.push(n))}}return t})(e))t=`${_}${t}`,n.add(t);if(t.pathname&&(!r||0===r.size)){let e=`${_}${t.pathname}`;n.add(e)}n.has(`${_}/`)&&n.add(`${_}/index`),n.has(`${_}/index`)&&n.add(`${_}/`);let i=Array.from(n);return{tags:i,expirationsByCacheKind:function(e){let t=new Map,r=eK();if(r)for(let[n,i]of r)"getExpiration"in i&&t.set(n,e3(async()=>i.getExpiration(e)));return t}(i)}}class e9 extends H{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw Object.defineProperty(new b({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}respondWith(){throw Object.defineProperty(new b({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}waitUntil(){throw Object.defineProperty(new b({page:this.sourcePage}),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}}let e7={keys:e=>Array.from(e.keys()),get:(e,t)=>e.get(t)??void 0},te=(e,t)=>eD().withPropagatedContext(e.headers,t,e7),tt=!1;async function tr(t){var r,n,i,s;let a,o,l,c,u;!function(){if(!tt&&(tt=!0,"true"===process.env.NEXT_PRIVATE_TEST_PROXY)){let{interceptTestApis:t,wrapRequestHandler:r}=e.r(45062);t(),te=r(te)}}(),await (!y&&(y=g()),y);let d=void 0!==globalThis.__BUILD_MANIFEST;t.request.url=t.request.url.replace(/\.rsc($|\?)/,"$1");let h=t.bypassNextUrl?new URL(t.request.url):new B(t.request.url,{headers:t.request.headers,nextConfig:t.request.nextConfig});for(let e of[...h.searchParams.keys()]){let t=h.searchParams.getAll(e),r=function(e){for(let t of["nxtP","nxtI"])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}(e);if(r){for(let e of(h.searchParams.delete(r),t))h.searchParams.append(r,e);h.searchParams.delete(e)}}let f=process.env.__NEXT_BUILD_ID||"";"buildId"in h&&(f=h.buildId||"",h.buildId="");let p=function(e){let t=new Headers;for(let[r,n]of Object.entries(e))for(let e of Array.isArray(n)?n:[n])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}(t.request.headers),m=p.has("x-nextjs-data"),b="1"===p.get("rsc");m&&"/index"===h.pathname&&(h.pathname="/");let w=new Map;if(!d)for(let e of Y){let t=p.get(e);null!==t&&(w.set(e,t),p.delete(e))}let v=h.searchParams.get(Z),_=new e9({page:t.page,input:((c=(l="string"==typeof h)?new URL(h):h).searchParams.delete(Z),l?c.toString():c).toString(),init:{body:t.request.body,headers:p,method:t.request.method,nextConfig:t.request.nextConfig,signal:t.request.signal}});m&&Object.defineProperty(_,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCacheShared&&t.IncrementalCache&&(globalThis.__incrementalCache=new t.IncrementalCache({CurCacheHandler:t.incrementalCacheHandler,minimalMode:!0,fetchCacheKeyPrefix:"",dev:!1,requestHeaders:t.request.headers,getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:e5()})}));let S=t.request.waitUntil??(null==(r=null==(u=globalThis[e8])?void 0:u.get())?void 0:r.waitUntil),E=new R({request:_,page:t.page,context:S?{waitUntil:S}:void 0});if((a=await te(_,()=>{if("/middleware"===t.page||"/src/middleware"===t.page||"/proxy"===t.page||"/src/proxy"===t.page){let e=E.waitUntil.bind(E),r=new e4;return eD().trace(ew.execute,{spanName:`middleware ${_.method}`,attributes:{"http.target":_.nextUrl.pathname,"http.method":_.method}},async()=>{try{var n,i,s,a,l,c;let u=e5(),d=await e6("/",_.nextUrl,null),h=(l=_.nextUrl,c=e=>{o=e},function(e,t,r,n,i,s,a,o,l,c,u,d){function h(e){r&&r.setHeader("Set-Cookie",e)}let f={};return{type:"request",phase:e,implicitTags:s,url:{pathname:n.pathname,search:n.search??""},rootParams:i,get headers(){return f.headers||(f.headers=function(e){let t=et.from(e);for(let e of Y)t.delete(e);return et.seal(t)}(t.headers)),f.headers},get cookies(){if(!f.cookies){let e=new F.RequestCookies(et.from(t.headers));eU(t,e),f.cookies=ei.seal(e)}return f.cookies},set cookies(value){f.cookies=value},get mutableCookies(){if(!f.mutableCookies){var p,g;let e,n=(p=t.headers,g=a||(r?h:void 0),e=new F.RequestCookies(et.from(p)),ea.wrap(e,g));eU(t,n),f.mutableCookies=n}return f.mutableCookies},get userspaceMutableCookies(){if(!f.userspaceMutableCookies){var m;let e;m=this,f.userspaceMutableCookies=e=new Proxy(m.mutableCookies,{get(t,r,n){switch(r){case"delete":return function(...r){return eo(m,"cookies().delete"),t.delete(...r),e};case"set":return function(...r){return eo(m,"cookies().set"),t.set(...r),e};default:return V.get(t,r,n)}}})}return f.userspaceMutableCookies},get draftMode(){return f.draftMode||(f.draftMode=new eM(l,t,this.cookies,this.mutableCookies)),f.draftMode},renderResumeDataCache:null,isHmrRefresh:c,serverComponentsHmrCache:u||globalThis.__serverComponentsHmrCache,devFallbackParams:null}}("action",_,void 0,l,{},d,c,null,u,!1,void 0,null)),p=function({page:e,renderOpts:t,isPrefetchRequest:r,buildId:n,previouslyRevalidatedTags:i,nonce:s}){var a;let o=!t.shouldWaitOnAllReady&&!t.supportsDynamicResponse&&!t.isDraftMode&&!t.isPossibleServerAction,l=t.dev??!1,c=l||o&&(!!process.env.NEXT_DEBUG_BUILD||"1"===process.env.NEXT_SSG_FETCH_METRICS),u={isStaticGeneration:o,page:e,route:(a=e.split("/").reduce((e,t,r,n)=>t?"("===t[0]&&t.endsWith(")")||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:`${e}/${t}`:e,"")).startsWith("/")?a:`/${a}`,incrementalCache:t.incrementalCache||globalThis.__incrementalCache,cacheLifeProfiles:t.cacheLifeProfiles,isBuildTimePrerendering:t.nextExport,hasReadableErrorStacks:t.hasReadableErrorStacks,fetchCache:t.fetchCache,isOnDemandRevalidate:t.isOnDemandRevalidate,isDraftMode:t.isDraftMode,isPrefetchRequest:r,buildId:n,reactLoadableManifest:(null==t?void 0:t.reactLoadableManifest)||{},assetPrefix:(null==t?void 0:t.assetPrefix)||"",nonce:s,afterContext:function(e){let{waitUntil:t,onClose:r,onAfterTaskError:n}=e;return new e1({waitUntil:t,onClose:r,onTaskError:n})}(t),cacheComponentsEnabled:t.cacheComponents,dev:l,previouslyRevalidatedTags:i,refreshTagsByCacheKind:function(){let e=new Map,t=eK();if(t)for(let[r,n]of t)"refreshTags"in n&&e.set(r,e3(async()=>n.refreshTags()));return e}(),runInCleanSnapshot:eZ?eZ.snapshot():function(e,...t){return e(...t)},shouldTrackFetchMetrics:c,reactServerErrorsByDigest:new Map};return t.store=u,u}({page:"/",renderOpts:{cacheLifeProfiles:null==(i=t.request.nextConfig)||null==(n=i.experimental)?void 0:n.cacheLife,cacheComponents:!1,experimental:{isRoutePPREnabled:!1,authInterrupts:!!(null==(a=t.request.nextConfig)||null==(s=a.experimental)?void 0:s.authInterrupts)},supportsDynamicResponse:!0,waitUntil:e,onClose:r.onClose.bind(r),onAfterTaskError:void 0},isPrefetchRequest:"1"===_.headers.get(X),buildId:f??"",previouslyRevalidatedTags:[]});return await er.workAsyncStorage.run(p,()=>eq.workUnitAsyncStorage.run(h,t.handler,_,E))}finally{setTimeout(()=>{r.dispatchClose()},0)}})}return t.handler(_,E)}))&&!(a instanceof Response))throw Object.defineProperty(TypeError("Expected an instance of Response to be returned"),"__NEXT_ERROR_CODE",{value:"E567",enumerable:!1,configurable:!0});a&&o&&a.headers.set("set-cookie",o);let x=null==a?void 0:a.headers.get("x-middleware-rewrite");if(a&&x&&(b||!d)){let e=new B(x,{forceLocale:!0,headers:t.request.headers,nextConfig:t.request.nextConfig});d||e.host!==_.nextUrl.host||(e.buildId=f||e.buildId,a.headers.set("x-middleware-rewrite",String(e)));let{url:r,isRelative:o}=G(e.toString(),h.toString());!d&&m&&a.headers.set("x-nextjs-rewrite",r);let l=!o&&(null==(s=t.request.nextConfig)||null==(i=s.experimental)||null==(n=i.clientParamParsingOrigins)?void 0:n.some(t=>new RegExp(t).test(e.origin)));b&&(o||l)&&(h.pathname!==e.pathname&&a.headers.set("x-nextjs-rewritten-path",e.pathname),h.search!==e.search&&a.headers.set("x-nextjs-rewritten-query",e.search.slice(1)))}if(a&&x&&b&&v){let e=new URL(x);e.searchParams.has(Z)||(e.searchParams.set(Z,v),a.headers.set("x-middleware-rewrite",e.toString()))}let T=null==a?void 0:a.headers.get("Location");if(a&&T&&!d){let e=new B(T,{forceLocale:!1,headers:t.request.headers,nextConfig:t.request.nextConfig});a=new Response(a.body,a),e.host===h.host&&(e.buildId=f||e.buildId,a.headers.set("Location",G(e,h).url)),m&&(a.headers.delete("Location"),a.headers.set("x-nextjs-redirect",G(e.toString(),h.toString()).url))}let P=a||J.next(),A=P.headers.get("x-middleware-override-headers"),C=[];if(A){for(let[e,t]of w)P.headers.set(`x-middleware-request-${e}`,t),C.push(e);C.length>0&&P.headers.set("x-middleware-override-headers",A+","+C.join(","))}return{response:P,waitUntil:("internal"===E[O].kind?Promise.all(E[O].promises).then(()=>{}):void 0)??Promise.resolve(),fetchMetrics:_.fetchMetrics}}var tn=e.i(46786),ti=e.i(22734);let ts=new Map,ta=new Map,to=Symbol("OriginError"),tl={};class tc extends Promise{constructor(e,t,r,n,i={}){let s,a;super((e,t)=>{s=e,a=t}),this.tagged=Array.isArray(e.raw),this.strings=e,this.args=t,this.handler=r,this.canceller=n,this.options=i,this.state=null,this.statement=null,this.resolve=e=>(this.active=!1,s(e)),this.reject=e=>(this.active=!1,a(e)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[to]=this.handler.debug?Error():this.tagged&&function(e){if(ts.has(e))return ts.get(e);let t=Error.stackTraceLimit;return Error.stackTraceLimit=4,ts.set(e,Error()),Error.stackTraceLimit=t,ts.get(e)}(this.strings)}get origin(){return(this.handler.debug?this[to].stack:this.tagged&&ta.has(this.strings)?ta.get(this.strings):ta.set(this.strings,this[to].stack).get(this.strings))||""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(e=1,t){let r;return(this.options.simple=!1,"function"==typeof e&&(t=e,e=1),this.cursorRows=e,"function"==typeof t)?(this.cursorFn=t,this):{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};r&&r();let e=new Promise((e,t)=>{this.cursorFn=t=>(e({value:t,done:!1}),new Promise(e=>r=e)),this.resolve=()=>(this.active=!1,e({done:!0})),this.reject=e=>(this.active=!1,t(e))});return this.execute(),e},return:()=>(r&&r(tl),{done:!0})})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw Error(".stream has been renamed to .forEach")}forEach(e){return this.forEachFn=e,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}}class tu extends Error{constructor(e){super(e.message),this.name=this.constructor.name,Object.assign(this,e)}}let td=function e(t,r,n){let{host:i,port:s}=n||r,a=Object.assign(Error("write "+t+" "+(r.path||i+":"+s)),{code:t,errno:t,address:r.path||i},r.path?{}:{port:s});return Error.captureStackTrace(a,e),a},th=function e(t){let r=new tu(t);return Error.captureStackTrace(r,e),r},tf=function e(t,r){let n=Object.assign(Error(t+": "+r),{code:t});return Error.captureStackTrace(n,e),n},tp=function e(t){let r=Object.assign(Error(t+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:t});return Error.captureStackTrace(r,e),r};class tg{then(){tO()}catch(){tO()}finally(){tO()}}class tm extends tg{constructor(e){super(),this.value=t$(e)}}class ty extends tg{constructor(e,t,r){super(),this.value=e,this.type=t,this.array=r}}class tb extends tg{constructor(e,t){super(),this.first=e,this.rest=t}build(e,t,r,n){let i=tA.map(([t,r])=>({fn:r,i:e.search(t)})).sort((e,t)=>e.i-t.i).pop();return -1===i.i?tI(this.first,n):i.fn(this.first,this.rest,t,r,n)}}function tw(e,t,r,n){let i=e instanceof ty?e.value:e;if(void 0===i&&(e instanceof ty?e.value=n.transform.undefined:i=e=n.transform.undefined,void 0===i))throw tf("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+r.push(e instanceof ty?(t.push(e.value),e.array?e.array[e.type||tj(e.value)]||e.type||function e(t){return Array.isArray(t)?e(t[0]):1009*("string"==typeof t)}(e.value):e.type):(t.push(e),tj(e)))}let tv=tN({string:{to:25,from:null,serialize:e=>""+e},number:{to:0,from:[21,23,26,700,701],serialize:e=>""+e,parse:e=>+e},json:{to:114,from:[114,3802],serialize:e=>JSON.stringify(e),parse:e=>JSON.parse(e)},boolean:{to:16,from:16,serialize:e=>!0===e?"t":"f",parse:e=>"t"===e},date:{to:1184,from:[1082,1114,1184],serialize:e=>(e instanceof Date?e:new Date(e)).toISOString(),parse:e=>new Date(e)},bytea:{to:17,from:17,serialize:e=>"\\x"+Buffer.from(e).toString("hex"),parse:e=>Buffer.from(e.slice(2),"hex")}});function t_(e,t,r,n,i,s){for(let a=1;a<e.strings.length;a++)t+=tS(t,r,n,i,s)+e.strings[a],r=e.args[a];return t}function tS(e,t,r,n,i){return t instanceof tb?t.build(e,r,n,i):t instanceof tc?tE(t,r,n,i):t instanceof tm?t.value:t&&t[0]instanceof tc?t.reduce((e,t)=>e+" "+tE(t,r,n,i),""):tw(t,r,n,i)}function tE(e,t,r,n){return e.fragment=!0,t_(e,e.strings[0],e.args[0],t,r,n)}function tx(e,t,r,n,i){return e.map(e=>"("+n.map(n=>tS("values",e[n],t,r,i)).join(",")+")").join(",")}function tT(e,t,r,n,i){let s=Array.isArray(e[0]),a=t.length?t.flat():Object.keys(s?e[0]:e);return tx(s?e:[e],r,n,a,i)}function tP(e,t,r,n,i){let s;return("string"==typeof e&&(e=[e].concat(t)),Array.isArray(e))?tI(e,i):(t.length?t.flat():Object.keys(e)).map(t=>((s=e[t])instanceof tc?tE(s,r,n,i):s instanceof tm?s.value:tw(s,r,n,i))+" as "+t$(i.transform.column.to?i.transform.column.to(t):t)).join(",")}let tA=Object.entries({values:tT,in:(...e)=>{let t=tT(...e);return"()"===t?"(null)":t},select:tP,as:tP,returning:tP,"\\(":tP,update:(e,t,r,n,i)=>(t.length?t.flat():Object.keys(e)).map(t=>t$(i.transform.column.to?i.transform.column.to(t):t)+"="+tS("values",e[t],r,n,i)),insert(e,t,r,n,i){let s=t.length?t.flat():Object.keys(Array.isArray(e)?e[0]:e);return"("+tI(s,i)+")values"+tx(Array.isArray(e)?e:[e],r,n,s,i)}}).map(([e,t])=>[RegExp("((?:^|[\\s(])"+e+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),t]);function tO(){throw tf("NOT_TAGGED_CALL","Query not called as a tagged template literal")}let tC=tv.serializers,tR=tv.parsers,tk=function(e){let t=tN(e||{});return{serializers:Object.assign({},tC,t.serializers),parsers:Object.assign({},tR,t.parsers)}};function tN(e){return Object.keys(e).reduce((t,r)=>(e[r].from&&[].concat(e[r].from).forEach(n=>t.parsers[n]=e[r].parse),e[r].serialize&&(t.serializers[e[r].to]=e[r].serialize,e[r].from&&[].concat(e[r].from).forEach(n=>t.serializers[n]=e[r].serialize)),t),{parsers:{},serializers:{}})}function tI(e,{transform:{column:t}}){return e.map(e=>t$(t.to?t.to(e):e)).join(",")}let t$=function(e){return'"'+e.replace(/"/g,'""').replace(/\./g,'"."')+'"'},tj=function e(t){return t instanceof ty?t.type:t instanceof Date?1184:t instanceof Uint8Array?17:!0===t||!1===t?16:"bigint"==typeof t?20:Array.isArray(t)?e(t[0]):0},tD=/\\/g,tL=/"/g,tM=function e(t,r,n,i){if(!1===Array.isArray(t))return t;if(!t.length)return"{}";let s=t[0],a=1020===i?";":",";return Array.isArray(s)&&!s.type?"{"+t.map(t=>e(t,r,n,i)).join(a)+"}":"{"+t.map(e=>{if(void 0===e&&void 0===(e=n.transform.undefined))throw tf("UNDEFINED_VALUE","Undefined values are not allowed");return null===e?"null":'"'+(r?r(e.type?e.value:e):""+e).replace(tD,"\\\\").replace(tL,'\\"')+'"'}).join(a)+"}"},tU={i:0,char:null,str:"",quoted:!1,last:0},tq=e=>{let t=e[0];for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},tB=e=>{let t=e[0].toUpperCase();for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},tF=e=>e.replace(/_/g,"-"),tQ=e=>e.replace(/([A-Z])/g,"_$1").toLowerCase(),tH=e=>(e.slice(0,1)+e.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),tV=e=>e.replace(/-/g,"_");function tK(e){return function t(r,n){return"object"==typeof r&&null!==r&&(114===n.type||3802===n.type)?Array.isArray(r)?r.map(e=>t(e,n)):Object.entries(r).reduce((r,[i,s])=>Object.assign(r,{[e(i)]:t(s,n)}),{}):r}}tq.column={from:tq},tq.value={from:tK(tq)},tQ.column={to:tQ};let tW={...tq};tW.column.to=tQ,tB.column={from:tB},tB.value={from:tK(tB)},tH.column={to:tH};let tz={...tB};tz.column.to=tH,tF.column={from:tF},tF.value={from:tK(tF)},tV.column={to:tV};let tJ={...tF};tJ.column.to=tV;var tG=e.i(4446),tX=e.i(55004),tY=e.i(54799),tZ=e.i(88947),t0=e.i(60438);class t1 extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}}let t2=function(e=[]){let t=e.slice(),r=0;return{get length(){return t.length-r},remove:e=>{let r=t.indexOf(e);return -1===r?null:(t.splice(r,1),e)},push:e=>(t.push(e),e),shift:()=>{let e=t[r++];return r===t.length?(r=0,t=[]):t[r-1]=void 0,e}}},t3=Buffer.allocUnsafe(256),t4=Object.assign(function(){return t4.i=0,t4},"BCcDdEFfHPpQSX".split("").reduce((e,t)=>{let r=t.charCodeAt(0);return e[t]=()=>(t3[0]=r,t4.i=5,t4),e},{}),{N:"\0",i:0,inc:e=>(t4.i+=e,t4),str(e){let t=Buffer.byteLength(e);return t5(t),t4.i+=t3.write(e,t4.i,t,"utf8"),t4},i16:e=>(t5(2),t3.writeUInt16BE(e,t4.i),t4.i+=2,t4),i32:(e,t)=>(t||0===t?t3.writeUInt32BE(e,t):(t5(4),t3.writeUInt32BE(e,t4.i),t4.i+=4),t4),z:e=>(t5(e),t3.fill(0,t4.i,t4.i+e),t4.i+=e,t4),raw:e=>(t3=Buffer.concat([t3.subarray(0,t4.i),e]),t4.i=t3.length,t4),end(e=1){t3.writeUInt32BE(t4.i-e,e);let t=t3.subarray(0,t4.i);return t4.i=0,t3=Buffer.allocUnsafe(256),t}});function t5(e){if(t3.length-t4.i<e){let t=t3,r=t.length;t3=Buffer.allocUnsafe(r+(r>>1)+e),t.copy(t3)}}let t8=function e(t,r={},{onopen:n=rn,onend:i=rn,onclose:s=rn}={}){let{sslnegotiation:a,ssl:o,max:l,user:c,host:u,port:d,database:h,parsers:f,transform:p,onnotice:g,onnotify:m,onparameter:y,max_pipeline:b,keep_alive:w,backoff:v,target_session_attrs:_}=t,S=t2(),E=t6++,x={pid:null,secret:null},T=rc(e_,t.idle_timeout),P=rc(e_,t.max_lifetime),A=rc(function(){ew(td("CONNECT_TIMEOUT",t,O)),O.destroy()},t.connect_timeout),O=null,C,R=null,k=new t1,N=Buffer.alloc(0),I=t.fetch_types,$={},j={},D=Math.random().toString(36).slice(2),L=1,M=0,U=0,q=0,B=0,F=0,Q=0,H=0,V=null,K=null,W=!1,z=null,J=null,G=null,X=null,Y=null,Z=null,ee=null,et=null,er=null,en=null,ei={queue:r.closed,idleTimer:T,connect(e){G=e,em()},terminate:eS,execute:eo,cancel:ea,end:e_,count:0,id:E};return r.closed&&r.closed.push(ei),ei;async function es(){let e;try{e=t.socket?await Promise.resolve(t.socket(t)):new tG.default.Socket}catch(e){eb(e);return}return e.on("error",eb),e.on("close",eE),e.on("drain",ef),e}async function ea({pid:e,secret:t},r,n){try{C=t4().i32(16).i32(0x4d2162e).i32(e).i32(t).end(16),await eg(),O.once("error",n),O.once("close",r)}catch(e){n(e)}}function eo(e){if(W)return ev(e,td("CONNECTION_DESTROYED",t));if(Y)return ev(e,tf("COPY_IN_PROGRESS","You cannot execute queries during copy"));if(!e.cancelled)try{var r;let n,i,s;return e.state=x,er?S.push(e):(er=e).active=!0,r=e,n=[],i=[],s=t_(r,r.strings[0],r.args[0],n,i,t),r.tagged||r.args.forEach(e=>tw(e,n,i,t)),r.prepare=t.prepare&&(!("prepare"in r.options)||r.options.prepare),r.string=s,r.signature=r.prepare&&i+s,r.onlyDescribe&&delete j[r.signature],r.parameters=r.parameters||n,r.prepared=r.prepare&&r.signature in j,r.describeFirst=r.onlyDescribe||n.length&&!r.prepared,r.statement=r.prepared?j[r.signature]:{string:s,types:i,name:r.prepare?D+L++:""},"function"==typeof t.debug&&t.debug(E,s,n,i),eu(function(e){var t;if(e.parameters.length>=65534)throw tf("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return e.options.simple?t4().Q().str(e.statement.string+t4.N).end():e.describeFirst?Buffer.concat([el(e),t7]):e.prepare?e.prepared?ec(e):Buffer.concat([el(e),ec(e)]):(t=e,Buffer.concat([eI(t.statement.string,t.parameters,t.statement.types),rr,ec(t)]))}(e))&&!e.describeFirst&&!e.cursorFn&&S.length<b&&(!e.options.onexecute||e.options.onexecute(ei))}catch(e){return 0===S.length&&eu(t9),ew(e),!0}}function el(e){return Buffer.concat([eI(e.statement.string,e.parameters,e.statement.types,e.statement.name),function(e,t=""){return t4().D().str("S").str(t+t4.N).end()}("S",e.statement.name)])}function ec(e){return Buffer.concat([function(e,r,n="",i=""){let s,a;return t4().B().str(i+t4.N).str(n+t4.N).i16(0).i16(e.length),e.forEach((n,i)=>{if(null===n)return t4.i32(0xffffffff);a=r[i],e[i]=n=a in t.serializers?t.serializers[a](n):""+n,s=t4.i,t4.inc(4).str(n).i32(t4.i-s-4,s)}),t4.i16(0),t4.end()}(e.parameters,e.statement.types,e.statement.name,e.cursorName),e.cursorFn?e$("",e.cursorRows):rt])}function eu(e,t){return(Z=Z?Buffer.concat([Z,e]):Buffer.from(e),t||Z.length>=1024)?ed(t):(null===K&&(K=setImmediate(ed)),!0)}function ed(e){let t=O.write(Z,e);return null!==K&&clearImmediate(K),Z=K=null,t}async function eh(){if("direct"!==a&&(eu(re),!await new Promise(e=>O.once("data",t=>e(83===t[0])))&&"prefer"===o))return ey();let e={socket:O,servername:tG.default.isIP(O.host)?void 0:O.host};"direct"===a&&(e.ALPNProtocols=["postgresql"]),"require"===o||"allow"===o||"prefer"===o?e.rejectUnauthorized=!1:"object"==typeof o&&Object.assign(e,o),O.removeAllListeners(),(O=tX.default.connect(e)).on("secureConnect",ey),O.on("error",eb),O.on("close",eE),O.on("drain",ef)}function ef(){er||n(ei)}function ep(r){if(!z||(z.push(r),!((U-=r.length)>0)))for(N=z?Buffer.concat(z,F-U):0===N.length?r:Buffer.concat([N,r],N.length+r.length);N.length>4;){if((F=N.readUInt32BE(1))>=N.length){U=F-N.length,z=[N];break}try{!function(r,i=r[0]){(68===i?function(e){let t,r,n,i=7,s=er.isRaw?Array(er.statement.columns.length):{};for(let a=0;a<er.statement.columns.length;a++)r=er.statement.columns[a],t=e.readInt32BE(i),i+=4,n=-1===t?null:!0===er.isRaw?e.subarray(i,i+=t):void 0===r.parser?e.toString("utf8",i,i+=t):!0===r.parser.array?r.parser(e.toString("utf8",i+1,i+=t)):r.parser(e.toString("utf8",i,i+=t)),er.isRaw?s[a]=!0===er.isRaw?n:p.value.from?p.value.from(n,r):n:s[r.name]=p.value.from?p.value.from(n,r):n;er.forEachFn?er.forEachFn(p.row.from?p.row.from(s):s,k):k[H++]=p.row.from?p.row.from(s):s}:100===i?function(e){Y&&(Y.push(e.subarray(5))||O.pause())}:65===i?function(e){if(!m)return;let t=9;for(;0!==e[t++];);m(e.toString("utf8",9,t-1),e.toString("utf8",t,e.length-1))}:83===i?function(e){let[r,n]=e.toString("utf8",5,e.length-1).split(t4.N);$[r]=n,t.parameters[r]!==n&&(t.parameters[r]=n,y&&y(r,n))}:90===i?function(r){var i,s,a,o;if(er?R?er.retried?ew(er.retried):er.prepared&&ri.has(R.routine)?(i=er,s=R,delete j[i.signature],i.retried=s,eo(i)):ew(R):er.resolve(J||k):R&&ew(R),er=J=R=null,k=new t1,A.cancel(),G){if(_)if(!$.in_hot_standby||!$.default_transaction_read_only)return function(){let e=new tc([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],eo,null,{simple:!0});e.resolve=([[e],[t]])=>{$.default_transaction_read_only=e.transaction_read_only,$.in_hot_standby=t.pg_is_in_recovery?"on":"off"},e.execute()}();else{if(a=_,o=$,"read-write"===a&&"on"===o.default_transaction_read_only||"read-only"===a&&"off"===o.default_transaction_read_only||"primary"===a&&"on"===o.in_hot_standby||"standby"===a&&"off"===o.in_hot_standby||"prefer-standby"===a&&"off"===o.in_hot_standby&&t.host[B])return eS()}return I?(G.reserve&&(G=null),ek()):(G&&!G.reserve&&eo(G),t.shared.retries=B=0,void(G=null))}for(;S.length&&(er=S.shift())&&(er.active=!0,er.cancelled);)e(t).cancel(er.state,er.cancelled.resolve,er.cancelled.reject);er||(ei.reserved?ei.reserved.release||73!==r[5]?ei.reserved():X?eS():(ei.reserved=null,n(ei)):X?eS():n(ei))}:67===i?function(e){H=0;for(let t=e.length-1;t>0;t--)if(32===e[t]&&e[t+1]<58&&null===k.count&&(k.count=+e.toString("utf8",t+1,e.length-1)),e[t-1]>=65){k.command=e.toString("utf8",5,t),k.state=x;break}return(en&&(en(),en=null),"BEGIN"!==k.command||1===l||ei.reserved)?er.options.simple?ex():void(er.cursorFn&&(k.count&&er.cursorFn(k),eu(t9))):ew(tf("UNSAFE_TRANSACTION","Only use sql.begin, sql.reserved or max: 1"))}:50===i?ex:49===i?function(){er.parsing=!1}:116===i?function(e){let t=e.readUInt16BE(5);for(let r=0;r<t;++r)er.statement.types[r]||(er.statement.types[r]=e.readUInt32BE(7+4*r));er.prepare&&(j[er.signature]=er.statement),er.describeFirst&&!er.onlyDescribe&&(eu(ec(er)),er.describeFirst=!1)}:84===i?function(e){let t;k.command&&((J=J||[k]).push(k=new t1),k.count=null,er.statement.columns=null);let r=e.readUInt16BE(5),n=7;er.statement.columns=Array(r);for(let i=0;i<r;++i){for(t=n;0!==e[n++];);let r=e.readUInt32BE(n),s=e.readUInt16BE(n+4),a=e.readUInt32BE(n+6);er.statement.columns[i]={name:p.column.from?p.column.from(e.toString("utf8",t,n-1)):e.toString("utf8",t,n-1),parser:f[a],table:r,number:s,type:a},n+=18}if(k.statement=er.statement,er.onlyDescribe)return er.resolve(er.statement),eu(t9)}:82===i?eT:110===i?function(){if(k.statement=er.statement,k.statement.columns=[],er.onlyDescribe)return er.resolve(er.statement),eu(t9)}:75===i?function(e){x.pid=e.readUInt32BE(5),x.secret=e.readUInt32BE(9)}:69===i?function(e){er?((er.cursorFn||er.describeFirst)&&eu(t9),R=th(ra(e))):ew(th(ra(e)))}:115===i?eN:51===i?function(){k.count&&er.cursorFn(k),er.resolve(k)}:71===i?function(){Y=new tZ.default.Writable({autoDestroy:!0,write(e,t,r){O.write(t4().d().raw(e).end(),r)},destroy(e,t){t(e),O.write(t4().f().str(e+t4.N).end()),Y=null},final(e){O.write(t4().c().end()),en=e,Y=null}}),er.resolve(Y)}:78===i?function(e){g?g(ra(e)):console.log(ra(e))}:72===i?function(){Y=new tZ.default.Readable({read(){O.resume()}}),er.resolve(Y)}:99===i?function(){Y&&Y.push(null),Y=null}:73===i?function(){}:86===i?function(){ew(tp("FunctionCallResponse"))}:118===i?function(){ew(tp("NegotiateProtocolVersion"))}:87===i?function(){Y=new tZ.default.Duplex({autoDestroy:!0,read(){O.resume()},write(e,t,r){O.write(t4().d().raw(e).end(),r)},destroy(e,t){t(e),O.write(t4().f().str(e+t4.N).end()),Y=null},final(e){O.write(t4().c().end()),en=e}}),er.resolve(Y)}:function(e){console.error("Postgres.js : Unknown Message:",e[0])})(r)}(N.subarray(0,F+1))}catch(e){er&&(er.cursorFn||er.describeFirst)&&eu(t9),ew(e)}N=N.subarray(F+1),U=0,z=null}}async function eg(){if(W=!1,$={},O||(O=await es()),O){if(A.start(),t.socket)return o?eh():ey();if(O.on("connect",o?eh:ey),t.path)return O.connect(t.path);O.ssl=o,O.connect(d[q],u[q]),O.host=u[q],O.port=d[q],q=(q+1)%d.length}}function em(){setTimeout(eg,M?Math.max(0,M+Q-t0.performance.now()):0)}function ey(){try{j={},I=t.fetch_types,D=Math.random().toString(36).slice(2),L=1,P.start(),O.on("data",ep),w&&O.setKeepAlive&&O.setKeepAlive(!0,1e3*w);let e=C||t4().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:c,database:h,client_encoding:"UTF8"},t.connection)).filter(([,e])=>e).map(([e,t])=>e+t4.N+t).join(t4.N)).z(2).end(0);eu(e)}catch(e){eb(e)}}function eb(e){if(ei.queue!==r.connecting||!t.host[B+1])for(ew(e);S.length;)ev(S.shift(),e)}function ew(e){Y&&(Y.destroy(e),Y=null),er&&ev(er,e),G&&(ev(G,e),G=null)}function ev(e,r){if(e.reserve)return e.reject(r);r&&"object"==typeof r||(r=Error(r)),"query"in r||"parameters"in r||Object.defineProperties(r,{stack:{value:r.stack+e.origin.replace(/.*\n/,"\n"),enumerable:t.debug},query:{value:e.string,enumerable:t.debug},parameters:{value:e.parameters,enumerable:t.debug},args:{value:e.args,enumerable:t.debug},types:{value:e.statement&&e.statement.types,enumerable:t.debug}}),e.reject(r)}function e_(){return X||(ei.reserved||i(ei),ei.reserved||G||er||0!==S.length?X=new Promise(e=>ee=e):(eS(),new Promise(e=>O&&"closed"!==O.readyState?O.once("close",e):e())))}function eS(){W=!0,(Y||er||G||S.length)&&eb(td("CONNECTION_DESTROYED",t)),clearImmediate(K),O&&(O.removeListener("data",ep),O.removeListener("connect",ey),"open"===O.readyState&&O.end(t4().X().end())),ee&&(ee(),X=ee=null)}async function eE(e){if(N=Buffer.alloc(0),U=0,z=null,clearImmediate(K),O.removeListener("data",ep),O.removeListener("connect",ey),T.cancel(),P.cancel(),A.cancel(),O.removeAllListeners(),O=null,G)return em();!e&&(er||S.length)&&eb(td("CONNECTION_CLOSED",t,O)),M=t0.performance.now(),e&&t.shared.retries++,Q=("function"==typeof v?v(t.shared.retries):v)*1e3,s(ei,td("CONNECTION_CLOSED",t,O))}function ex(){k.statement||(k.statement=er.statement),k.columns=er.statement.columns}async function eT(e,t=e.readUInt32BE(5)){(3===t?eP:5===t?eA:10===t?eO:11===t?eC:12===t?function(e){e.toString("utf8",9).split(t4.N,1)[0].slice(2)!==V&&(ew(tf("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),O.destroy())}:0!==t?function(e,t){console.error("Postgres.js : Unknown Auth:",t)}:rn)(e,t)}async function eP(){let e=await eR();eu(t4().p().str(e).z(1).end())}async function eA(e){let t="md5"+await ro(Buffer.concat([Buffer.from(await ro(await eR()+c)),e.subarray(9)]));eu(t4().p().str(t).z(1).end())}async function eO(){et=(await tY.default.randomBytes(18)).toString("base64"),t4().p().str("SCRAM-SHA-256"+t4.N);let e=t4.i;eu(t4.inc(4).str("n,,n=*,r="+et).i32(t4.i-e-4,e).end())}async function eC(e){var t;let r=e.toString("utf8",9).split(",").reduce((e,t)=>(e[t[0]]=t.slice(2),e),{}),n=await tY.default.pbkdf2Sync(await eR(),Buffer.from(r.s,"base64"),parseInt(r.i),32,"sha256"),i=await rl(n,"Client Key"),s="n=*,r="+et+",r="+r.r+",s="+r.s+",i="+r.i+",c=biws,r="+r.r;V=(await rl(await rl(n,"Server Key"),s)).toString("base64");let a="c=biws,r="+r.r+",p="+(function(e,t){let r=Math.max(e.length,t.length),n=Buffer.allocUnsafe(r);for(let i=0;i<r;i++)n[i]=e[i]^t[i];return n})(i,Buffer.from(await rl(await (t=i,tY.default.createHash("sha256").update(t).digest()),s))).toString("base64");eu(t4().p().str(a).end())}function eR(){return Promise.resolve("function"==typeof t.pass?t.pass():t.pass)}async function ek(){I=!1,(await new tc([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],eo)).forEach(({oid:e,typarray:r})=>(function(e,r){if(t.parsers[r]&&t.serializers[r])return;let n=t.parsers[e];t.shared.typeArrayMap[e]=r,t.parsers[r]=e=>(tU.i=tU.last=0,function e(t,r,n,i){let s=[],a=1020===i?";":",";for(;t.i<r.length;t.i++){if(t.char=r[t.i],t.quoted)"\\"===t.char?t.str+=r[++t.i]:'"'===t.char?(s.push(n?n(t.str):t.str),t.str="",t.quoted='"'===r[t.i+1],t.last=t.i+2):t.str+=t.char;else if('"'===t.char)t.quoted=!0;else if("{"===t.char)t.last=++t.i,s.push(e(t,r,n,i));else if("}"===t.char){t.quoted=!1,t.last<t.i&&s.push(n?n(r.slice(t.last,t.i)):r.slice(t.last,t.i)),t.last=t.i+1;break}else t.char===a&&"}"!==t.p&&'"'!==t.p&&(s.push(n?n(r.slice(t.last,t.i)):r.slice(t.last,t.i)),t.last=t.i+1);t.p=t.char}return t.last<t.i&&s.push(n?n(r.slice(t.last,t.i+1)):r.slice(t.last,t.i+1)),s}(tU,e,n,r)),t.parsers[r].array=!0,t.serializers[r]=n=>tM(n,t.serializers[e],t,r)})(e,r))}async function eN(){try{let e=await Promise.resolve(er.cursorFn(k));H=0,e===tl?eu(function(e=""){return Buffer.concat([t4().C().str("P").str(e+t4.N).end(),t4().S().end()])}(er.portal)):(k=new t1,eu(e$("",er.cursorRows)))}catch(e){eu(t9),er.reject(e)}}function eI(e,t,r,n=""){return t4().P().str(n+t4.N).str(e+t4.N).i16(t.length),t.forEach((e,t)=>t4.i32(r[t]||0)),t4.end()}function e$(e="",t=0){return Buffer.concat([t4().E().str(e+t4.N).i32(t).end(),t7])}},t6=1,t9=t4().S().end(),t7=t4().H().end(),re=t4().i32(8).i32(0x4d2162f).end(8),rt=Buffer.concat([t4().E().str(t4.N).i32(0).end(),t9]),rr=t4().D().str("S").str(t4.N).end(),rn=()=>{},ri=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),rs={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function ra(e){let t={},r=5;for(let n=5;n<e.length-1;n++)0===e[n]&&(t[rs[e[r]]]=e.toString("utf8",r+1,n),r=n+1);return t}function ro(e){return tY.default.createHash("md5").update(e).digest("hex")}function rl(e,t){return tY.default.createHmac("sha256",e).update(t).digest()}function rc(e,t){let r;if(!(t="function"==typeof t?t():t))return{cancel:rn,start:rn};return{cancel(){r&&(clearTimeout(r),r=null)},start(){r&&clearTimeout(r),r=setTimeout(n,1e3*t,arguments)}};function n(t){e.apply(null,t),r=null}}let ru=()=>{};function rd(e,t,r,n){let i,s,a,o=n.raw?Array(t.length):{};for(let l=0;l<t.length;l++)i=e[r++],s=t[l],a=110===i?null:117===i?void 0:void 0===s.parser?e.toString("utf8",r+4,r+=4+e.readUInt32BE(r)):!0===s.parser.array?s.parser(e.toString("utf8",r+5,r+=4+e.readUInt32BE(r))):s.parser(e.toString("utf8",r+4,r+=4+e.readUInt32BE(r))),n.raw?o[l]=!0===n.raw?a:n.value.from?n.value.from(a,s):a:o[s.name]=n.value.from?n.value.from(a,s):a;return{i:r,row:n.row.from?n.row.from(o):o}}function rh(e,t,r=393216){return new Promise(async(n,i)=>{await e.begin(async e=>{let i;t||([{oid:t}]=await e`select lo_creat(-1) as oid`);let[{fd:s}]=await e`select lo_open(${t}, ${r}) as fd`,a={writable:l,readable:o,close:()=>e`select lo_close(${s})`.then(i),tell:()=>e`select lo_tell64(${s})`,read:t=>e`select loread(${s}, ${t}) as data`,write:t=>e`select lowrite(${s}, ${t})`,truncate:t=>e`select lo_truncate64(${s}, ${t})`,seek:(t,r=0)=>e`select lo_lseek64(${s}, ${t}, ${r})`,size:()=>e`
          select
            lo_lseek64(${s}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return n(a),new Promise(async e=>i=e);async function o({highWaterMark:e=16384,start:t=0,end:r=1/0}={}){let n=r-t;return t&&await a.seek(t),new tZ.default.Readable({highWaterMark:e,async read(e){let t=e>n?e-n:e;n-=e;let[{data:r}]=await a.read(t);this.push(r),r.length<e&&this.push(null)}})}async function l({highWaterMark:e=16384,start:t=0}={}){return t&&await a.seek(t),new tZ.default.Writable({highWaterMark:e,write(e,t,r){a.write(e).then(()=>r(),r)}})}}).catch(i)})}Object.assign(rp,{PostgresError:tu,toPascal:tB,pascal:tz,toCamel:tq,camel:tW,toKebab:tF,kebab:tJ,fromPascal:tH,fromCamel:tQ,fromKebab:tV,BigInt:{to:20,from:[20],parse:e=>BigInt(e),serialize:e=>e.toString()}});let rf=rp;function rp(e,t){let r=function(e,t){var r;if(e&&e.shared)return e;let n=process.env,i=(e&&"string"!=typeof e?e:t)||{},{url:s,multihost:a}=function(e){if(!e||"string"!=typeof e)return{url:{searchParams:new Map}};let t=e;t=decodeURIComponent((t=t.slice(t.indexOf("://")+3).split(/[?/]/)[0]).slice(t.indexOf("@")+1));let r=new URL(e.replace(t,t.split(",")[0]));return{url:{username:decodeURIComponent(r.username),password:decodeURIComponent(r.password),host:r.host,hostname:r.hostname,port:r.port,pathname:r.pathname,searchParams:r.searchParams},multihost:t.indexOf(",")>-1&&t}}(e),o=[...s.searchParams].reduce((e,[t,r])=>(e[t]=r,e),{}),l=i.hostname||i.host||a||s.hostname||n.PGHOST||"localhost",c=i.port||s.port||n.PGPORT||5432,u=i.user||i.username||s.username||n.PGUSERNAME||n.PGUSER||function(){try{return tn.default.userInfo().username}catch(e){return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}();i.no_prepare&&(i.prepare=!1),o.sslmode&&(o.ssl=o.sslmode,delete o.sslmode),"timeout"in i&&(console.log("The timeout option is deprecated, use idle_timeout instead"),i.idle_timeout=i.timeout),"system"===o.sslrootcert&&(o.ssl="verify-full");let d=["idle_timeout","connect_timeout","max_lifetime","max_pipeline","backoff","keep_alive"],h={max:globalThis.Cloudflare?3:10,ssl:!1,sslnegotiation:null,idle_timeout:null,connect_timeout:30,max_lifetime:rm,max_pipeline:100,backoff:rg,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(l)?l:l.split(",").map(e=>e.split(":")[0]),port:Array.isArray(c)?c:l.split(",").map(e=>parseInt(e.split(":")[1]||c)),path:i.path||l.indexOf("/")>-1&&l+"/.s.PGSQL."+c,database:i.database||i.db||(s.pathname||"").slice(1)||n.PGDATABASE||u,user:u,pass:i.pass||i.password||s.password||n.PGPASSWORD||"",...Object.entries(h).reduce((e,[t,r])=>{let s=t in i?i[t]:t in o?"disable"!==o[t]&&"false"!==o[t]&&o[t]:n["PG"+t.toUpperCase()]||r;return e[t]="string"==typeof s&&d.includes(t)?+s:s,e},{}),connection:{application_name:n.PGAPPNAME||"postgres.js",...i.connection,...Object.entries(o).reduce((e,[t,r])=>(t in h||(e[t]=r),e),{})},types:i.types||{},target_session_attrs:function(e,t,r){let n=e.target_session_attrs||t.searchParams.get("target_session_attrs")||r.PGTARGETSESSIONATTRS;if(!n||["read-write","read-only","primary","standby","prefer-standby"].includes(n))return n;throw Error("target_session_attrs "+n+" is not supported")}(i,s,n),onnotice:i.onnotice,onnotify:i.onnotify,onclose:i.onclose,onparameter:i.onparameter,socket:i.socket,transform:{undefined:(r=i.transform||{undefined:void 0}).undefined,column:{from:"function"==typeof r.column?r.column:r.column&&r.column.from,to:r.column&&r.column.to},value:{from:"function"==typeof r.value?r.value:r.value&&r.value.from,to:r.value&&r.value.to},row:{from:"function"==typeof r.row?r.row:r.row&&r.row.from,to:r.row&&r.row.to}},parameters:{},shared:{retries:0,typeArrayMap:{}},...tk(i.types)}}(e,t),n=r.no_subscribe||function(e,t){let r=new Map,n="postgresjs_"+Math.random().toString(36).slice(2),i={},s,a,o=!1,l=d.sql=e({...t,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...t.connection,replication:"database"},onclose:async function(){o||(a=null,i.pid=i.secret=void 0,h(await f(l,n,t.publications)),r.forEach(e=>e.forEach(({onsubscribe:e})=>e())))},no_subscribe:!0}),c=l.end,u=l.close;return l.end=async()=>(o=!0,a&&await new Promise(e=>(a.once("close",e),a.end())),c()),l.close=async()=>(a&&await new Promise(e=>(a.once("close",e),a.end())),u()),d;async function d(e,o,c=ru,u=ru){e=function(e){let[,t,r,n]=e.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];return(t||"*")+(r?":"+(-1===r.indexOf(".")?"public."+r:r):"")+(n?"="+n:"")}(e),s||(s=f(l,n,t.publications));let p={fn:o,onsubscribe:c},g=r.has(e)?r.get(e).add(p):r.set(e,new Set([p])).get(e),m=()=>{g.delete(p),0===g.size&&r.delete(e)};return s.then(e=>(h(e),c(),a&&a.on("error",u),{unsubscribe:m,state:i,sql:l}))}function h(e){a=e.stream,i.pid=e.state.pid,i.secret=e.state.secret}async function f(e,r,n){if(!n)throw Error("Missing publication names");let i=await e.unsafe(`CREATE_REPLICATION_SLOT ${r} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[s]=i,a=await e.unsafe(`START_REPLICATION SLOT ${r} LOGICAL ${s.consistent_point} (proto_version '1', publication_names '${n}')`).writable(),o={lsn:Buffer.concat(s.consistent_point.split("/").map(e=>Buffer.from(("00000000"+e).slice(-8),"hex")))};return a.on("data",function(r){var n,i,s,c,u;let d;119===r[0]?(n=r.subarray(25),i=o,s=e.options.parsers,c=l,u=t.transform,Object.entries({R:e=>{let t=1,r=i[e.readUInt32BE(t)]={schema:e.toString("utf8",t+=4,t=e.indexOf(0,t))||"pg_catalog",table:e.toString("utf8",t+1,t=e.indexOf(0,t+1)),columns:Array(e.readUInt16BE(t+=2)),keys:[]};t+=2;let n=0,a;for(;t<e.length;)(a=r.columns[n++]={key:e[t++],name:u.column.from?u.column.from(e.toString("utf8",t,t=e.indexOf(0,t))):e.toString("utf8",t,t=e.indexOf(0,t)),type:e.readUInt32BE(t+=1),parser:s[e.readUInt32BE(t)],atttypmod:e.readUInt32BE(t+=4)}).key&&r.keys.push(a),t+=4},Y:()=>{},O:()=>{},B:e=>{var t;t=e.readBigInt64BE(9),i.date=new Date(Date.UTC(2e3,0,1)+Number(t/BigInt(1e3))),i.lsn=e.subarray(1,9)},I:e=>{let t=1,r=i[e.readUInt32BE(t)],{row:n}=rd(e,r.columns,t+=7,u);c(n,{command:"insert",relation:r})},D:e=>{let t=1,r=i[e.readUInt32BE(t)],n=75===e[t+=4];c(n||79===e[t]?rd(e,r.columns,t+=3,u).row:null,{command:"delete",relation:r,key:n})},U:e=>{let t=1,r=i[e.readUInt32BE(t)],n=75===e[t+=4],s=n||79===e[t]?rd(e,r.columns,t+=3,u):null;s&&(t=s.i);let{row:a}=rd(e,r.columns,t+3,u);c(a,{command:"update",relation:r,key:n,old:s&&s.row})},T:()=>{},C:()=>{}}).reduce((e,[t,r])=>(e[t.charCodeAt(0)]=r,e),{})[n[0]](n)):107===r[0]&&r[17]&&(o.lsn=r.subarray(1,9),(d=Buffer.alloc(34))[0]=114,d.fill(o.lsn,1),d.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),a.write(d))}),a.on("error",function(e){console.error("Unexpected error during logical streaming - reconnecting",e)}),a.on("close",e.close),{stream:a,state:i.state};function l(e,t){let r=t.relation.schema+"."+t.relation.table;p("*",e,t),p("*:"+r,e,t),t.relation.keys.length&&p("*:"+r+"="+t.relation.keys.map(t=>e[t.name]),e,t),p(t.command,e,t),p(t.command+":"+r,e,t),t.relation.keys.length&&p(t.command+":"+r+"="+t.relation.keys.map(t=>e[t.name]),e,t)}}function p(e,t,n){r.has(e)&&r.get(e).forEach(({fn:r})=>r(t,n,e))}}(rp,{...r}),i=!1,s=t2(),a=t2(),o=t2(),l=t2(),c=t2(),u=t2(),d=t2(),h=t2(),f={connecting:a,reserved:o,closed:l,ended:c,open:u,busy:d,full:h},p=[...Array(r.max)].map(()=>t8(r,f,{onopen:R,onend:C,onclose:k})),g=m(function(e){return i?e.reject(td("CONNECTION_ENDED",r,r)):u.length?E(u.shift(),e):l.length?O(l.shift(),e):void(d.length?E(d.shift(),e):s.push(e))});return Object.assign(g,{get parameters(){return r.parameters},largeObject:rh.bind(null,g),subscribe:n,CLOSE:tl,END:tl,PostgresError:tu,options:r,reserve:w,listen:y,begin:v,close:P,end:T}),g;function m(e){return e.debug=r.debug,Object.entries(r.types).reduce((e,[t,r])=>(e[t]=e=>new ty(e,r.to),e),t),Object.assign(n,{types:t,typed:t,unsafe:function(t,r=[],n={}){return 2!=arguments.length||Array.isArray(r)||(n=r,r=[]),new tc([t],r,e,x,{prepare:!1,...n,simple:"simple"in n?n.simple:0===r.length})},notify:b,array:function e(t,n){return Array.isArray(t)?new ty(t,n||(t.length?tj(t)||25:0),r.shared.typeArrayMap):e(Array.from(arguments))},json:S,file:function(t,r=[],n={}){return 2!=arguments.length||Array.isArray(r)||(n=r,r=[]),new tc([],r,r=>{ti.default.readFile(t,"utf8",(t,n)=>{if(t)return r.reject(t);r.strings=[n],e(r)})},x,{...n,simple:"simple"in n?n.simple:0===r.length})}}),n;function t(e,t){return new ty(e,t)}function n(t,...i){return t&&Array.isArray(t.raw)?new tc(t,i,e,x):"string"!=typeof t||i.length?new tb(t,i):new tm(r.transform.column.to?r.transform.column.to(t):t)}}async function y(e,t,n){let i={fn:t,onlisten:n},s=y.sql||(y.sql=rp({...r,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(y.channels).forEach(([e,{listeners:t}])=>{delete y.channels[e],Promise.all(t.map(t=>y(e,t.fn,t.onlisten).catch(()=>{})))})},onnotify(e,t){e in y.channels&&y.channels[e].listeners.forEach(e=>e.fn(t))}})),a=y.channels||(y.channels={});if(e in a){a[e].listeners.push(i);let t=await a[e].result;return i.onlisten&&i.onlisten(),{state:t.state,unlisten:l}}a[e]={result:s`listen ${s.unsafe('"'+e.replace(/"/g,'""')+'"')}`,listeners:[i]};let o=await a[e].result;return i.onlisten&&i.onlisten(),{state:o.state,unlisten:l};async function l(){if(e in a!=!1&&(a[e].listeners=a[e].listeners.filter(e=>e!==i),!a[e].listeners.length))return delete a[e],s`unlisten ${s.unsafe('"'+e.replace(/"/g,'""')+'"')}`}}async function b(e,t){return await g`select pg_notify(${e}, ${""+t})`}async function w(){let e=t2(),t=u.length?u.shift():await new Promise((e,t)=>{let r={reserve:e,reject:t};s.push(r),l.length&&O(l.shift(),r)});_(t,o),t.reserved=()=>e.length?t.execute(e.shift()):_(t,o),t.reserved.release=!0;let r=m(function(r){t.queue===h?e.push(r):t.execute(r)||_(t,h)});return r.release=()=>{t.reserved=null,R(t)},r}async function v(e,t){t||(t=e,e="");let r=t2(),n=0,i,s=null;try{return await g.unsafe("begin "+e.replace(/[^a-z ]/ig,""),[],{onexecute:function(e){i=e,_(e,o),e.reserved=()=>r.length?e.execute(r.shift()):_(e,o)}}).execute(),await Promise.race([a(i,t),new Promise((e,t)=>i.onclose=t)])}catch(e){throw e}async function a(e,t,i){let o,l,c=m(function(t){t.catch(e=>o||(o=e)),e.queue===h?r.push(t):e.execute(t)||_(e,h)});c.savepoint=function t(r,i){return r&&Array.isArray(r.raw)?t(e=>e.apply(e,arguments)):(1==arguments.length&&(i=r,r=null),a(e,i,"s"+n+++(r?"_"+r:"")))},c.prepare=e=>s=e.replace(/[^a-z0-9$-_. ]/gi),i&&await c`savepoint ${c(i)}`;try{if(l=await new Promise((e,r)=>{let n=t(c);Promise.resolve(Array.isArray(n)?Promise.all(n):n).then(e,r)}),o)throw o}catch(e){throw await (i?c`rollback to ${c(i)}`:c`rollback`),e instanceof tu&&"25P02"===e.code&&o||e}return i||(s?await c`prepare transaction '${c.unsafe(s)}'`:await c`commit`),l}}function _(e,t){return e.queue.remove(e),t.push(e),e.queue=t,t===u?e.idleTimer.start():e.idleTimer.cancel(),e}function S(e){return new ty(e,3802)}function E(e,t){return e.execute(t)?_(e,d):_(e,h)}function x(e){return new Promise((t,n)=>{e.state?e.active?t8(r).cancel(e.state,t,n):e.cancelled={resolve:t,reject:n}:(s.remove(e),e.cancelled=!0,e.reject(tf("57014","canceling statement due to user request")),t())})}async function T({timeout:e=null}={}){let t;return i||(await 1,i=Promise.race([new Promise(r=>null!==e&&(t=setTimeout(A,1e3*e,r))),Promise.all(p.map(e=>e.end()).concat(y.sql?y.sql.end({timeout:0}):[],n.sql?n.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(t)))}async function P(){await Promise.all(p.map(e=>e.end()))}async function A(e){for(await Promise.all(p.map(e=>e.terminate()));s.length;)s.shift().reject(td("CONNECTION_DESTROYED",r));e()}function O(e,t){return _(e,a),e.connect(t),e}function C(e){_(e,c)}function R(e){if(0===s.length)return _(e,u);let t=Math.ceil(s.length/(a.length+1)),r=!0;for(;r&&s.length&&t-- >0;){let t=s.shift();if(t.reserve)return t.reserve(e);r=e.execute(t)}r?_(e,d):_(e,h)}function k(e,t){_(e,l),e.reserved=null,e.onclose&&(e.onclose(t),e.onclose=null),r.onclose&&r.onclose(e.id),s.length&&O(e,s.shift())}}function rg(e){return(.5+Math.random()/2)*Math.min(3**e/100,20)}function rm(){return 60*(30+30*Math.random())}let ry=Symbol.for("drizzle:entityKind");function rb(e,t){if(!e||"object"!=typeof e)return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,ry))throw Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(e).constructor;if(r)for(;r;){if(ry in r&&r[ry]===t[ry])return!0;r=Object.getPrototypeOf(r)}return!1}Symbol.for("drizzle:hasOwnEntityKind");class rw{static [ry]="ConsoleLogWriter";write(e){console.log(e)}}class rv{static [ry]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new rw}logQuery(e,t){let r=t.map(e=>{try{return JSON.stringify(e)}catch{return String(e)}}),n=r.length?` -- params: [${r.join(", ")}]`:"";this.writer.write(`Query: ${e}${n}`)}}class r_{static [ry]="NoopLogger";logQuery(){}}class rS{static [ry]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}}class rE{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static [ry]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}class rx{static [ry]="ColumnBuilder";config;constructor(e,t,r){this.config={name:e,keyAsName:""===e,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){""===this.config.name&&(this.config.name=e)}}let rT=Symbol.for("drizzle:Name");class rP{static [ry]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:t,columns:r,foreignColumns:n}=e();return{name:t,columns:r,foreignTable:n[0].table,foreignColumns:n}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=void 0===e?"no action":e,this}onDelete(e){return this._onDelete=void 0===e?"no action":e,this}build(e){return new rA(e,this)}}class rA{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [ry]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:r}=this.reference(),n=t.map(e=>e.name),i=r.map(e=>e.name),s=[this.table[rT],...n,r[0].table[rT],...i];return e??`${s.join("_")}_fk`}}function rO(e,...t){return e(...t)}function rC(e,t){return`${e[rT]}_${t.join("_")}_unique`}class rR{constructor(e,t){this.name=t,this.columns=e}static [ry]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new rN(e,this.columns,this.nullsNotDistinctConfig,this.name)}}class rk{static [ry]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new rR(e,this.name)}}class rN{constructor(e,t,r,n){this.table=e,this.columns=t,this.name=n??rC(this.table,this.columns.map(e=>e.name)),this.nullsNotDistinct=r}static [ry]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}function rI(e,t,r){for(let n=t;n<e.length;n++){let i=e[n];if("\\"===i){n++;continue}if('"'===i)return[e.slice(t,n).replace(/\\/g,""),n+1];if(!r&&(","===i||"}"===i))return[e.slice(t,n).replace(/\\/g,""),n]}return[e.slice(t).replace(/\\/g,""),e.length]}class r$ extends rx{foreignKeyConfigs=[];static [ry]="PgColumnBuilder";array(e){return new rM(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:r,actions:n})=>rO((r,n)=>{let i=new rP(()=>({columns:[e],foreignColumns:[r()]}));return n.onUpdate&&i.onUpdate(n.onUpdate),n.onDelete&&i.onDelete(n.onDelete),i.build(t)},r,n))}buildExtraConfigColumn(e){return new rD(e,this.config)}}class rj extends rE{constructor(e,t){t.uniqueName||(t.uniqueName=rC(e,[t.name])),super(e,t),this.table=e}static [ry]="PgColumn"}class rD extends rj{static [ry]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class rL{static [ry]="IndexedColumn";constructor(e,t,r,n){this.name=e,this.keyAsName=t,this.type=r,this.indexConfig=n}name;keyAsName;type;indexConfig}class rM extends r${static [ry]="PgArrayBuilder";constructor(e,t,r){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=r}build(e){let t=this.config.baseBuilder.build(e);return new rU(e,this.config,t)}}class rU extends rj{constructor(e,t,r,n){super(e,t),this.baseColumn=r,this.range=n,this.size=t.size}size;static [ry]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(e){return"string"==typeof e&&(e=function(e){let[t]=function e(t,r=0){let n=[],i=r,s=!1;for(;i<t.length;){let a=t[i];if(","===a){(s||i===r)&&n.push(""),s=!0,i++;continue}if(s=!1,"\\"===a){i+=2;continue}if('"'===a){let[e,r]=rI(t,i+1,!0);n.push(e),i=r;continue}if("}"===a)return[n,i+1];if("{"===a){let[r,s]=e(t,i+1);n.push(r),i=s;continue}let[o,l]=rI(t,i,!1);n.push(o),i=l}return[n,i]}(e,1);return t}(e)),e.map(e=>this.baseColumn.mapFromDriverValue(e))}mapToDriverValue(e,t=!1){let r=e.map(e=>null===e?null:rb(this.baseColumn,rU)?this.baseColumn.mapToDriverValue(e,!0):this.baseColumn.mapToDriverValue(e));return t?r:function e(t){return`{${t.map(t=>Array.isArray(t)?e(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}(r)}}class rq extends r${static [ry]="PgEnumObjectColumnBuilder";constructor(e,t){super(e,"string","PgEnumObjectColumn"),this.config.enum=t}build(e){return new rB(e,this.config)}}class rB extends rj{static [ry]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}let rF=Symbol.for("drizzle:isPgEnum");class rQ extends r${static [ry]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new rH(e,this.config)}}class rH extends rj{static [ry]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}}class rV{static [ry]="Subquery";constructor(e,t,r,n=!1,i=[]){this._={brand:"Subquery",sql:e,selectedFields:t,alias:r,isWith:n,usedTables:i}}}class rK extends rV{static [ry]="WithSubquery"}let rW=(e,t)=>r?(n||(n=r.trace.getTracer("drizzle-orm","0.45.1")),rO((r,n)=>n.startActiveSpan(e,e=>{try{return t(e)}catch(t){throw e.setStatus({code:r.SpanStatusCode.ERROR,message:t instanceof Error?t.message:"Unknown error"}),t}finally{e.end()}}),r,n)):t(),rz=Symbol.for("drizzle:ViewBaseConfig"),rJ=Symbol.for("drizzle:Schema"),rG=Symbol.for("drizzle:Columns"),rX=Symbol.for("drizzle:ExtraConfigColumns"),rY=Symbol.for("drizzle:OriginalName"),rZ=Symbol.for("drizzle:BaseName"),r0=Symbol.for("drizzle:IsAlias"),r1=Symbol.for("drizzle:ExtraConfigBuilder"),r2=Symbol.for("drizzle:IsDrizzleTable");class r3{static [ry]="Table";static Symbol={Name:rT,Schema:rJ,OriginalName:rY,Columns:rG,ExtraConfigColumns:rX,BaseName:rZ,IsAlias:r0,ExtraConfigBuilder:r1};[rT];[rY];[rJ];[rG];[rX];[rZ];[r0]=!1;[r2]=!0;[r1]=void 0;constructor(e,t,r){this[rT]=this[rY]=e,this[rJ]=t,this[rZ]=r}}function r4(e){return`${e[rJ]??"public"}.${e[rT]}`}class r5{static [ry]="FakePrimitiveParam"}function r8(e){return null!=e&&"function"==typeof e.getSQL}class r6{static [ry]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new r9([this])}}class r9{constructor(e){for(const t of(this.queryChunks=e,e))if(rb(t,r3)){const e=t[r3.Symbol.Schema];this.usedTables.push(void 0===e?t[r3.Symbol.Name]:e+"."+t[r3.Symbol.Name])}}static [ry]="SQL";decoder=ne;shouldInlineParams=!1;usedTables=[];append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return rW("drizzle.buildSQL",t=>{let r=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,t){let r=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:n,escapeName:i,escapeParam:s,prepareTyping:a,inlineParams:o,paramStartIndex:l}=r;var c=e.map(e=>{if(rb(e,r6))return{sql:e.value.join(""),params:[]};if(rb(e,r7))return{sql:i(e.value),params:[]};if(void 0===e)return{sql:"",params:[]};if(Array.isArray(e)){let t=[new r6("(")];for(let[r,n]of e.entries())t.push(n),r<e.length-1&&t.push(new r6(", "));return t.push(new r6(")")),this.buildQueryFromSourceParams(t,r)}if(rb(e,r9))return this.buildQueryFromSourceParams(e.queryChunks,{...r,inlineParams:o||e.shouldInlineParams});if(rb(e,r3)){let t=e[r3.Symbol.Schema],r=e[r3.Symbol.Name];return{sql:void 0===t||e[r0]?i(r):i(t)+"."+i(r),params:[]}}if(rb(e,rE)){let r=n.getColumnCasing(e);if("indexes"===t.invokeSource)return{sql:i(r),params:[]};let s=e.table[r3.Symbol.Schema];return{sql:e.table[r0]||void 0===s?i(e.table[r3.Symbol.Name])+"."+i(r):i(s)+"."+i(e.table[r3.Symbol.Name])+"."+i(r),params:[]}}if(rb(e,nc)){let t=e[rz].schema,r=e[rz].name;return{sql:void 0===t||e[rz].isAlias?i(r):i(t)+"."+i(r),params:[]}}if(rb(e,nr)){if(rb(e.value,na))return{sql:s(l.value++,e),params:[e],typings:["none"]};let t=null===e.value?null:e.encoder.mapToDriverValue(e.value);if(rb(t,r9))return this.buildQueryFromSourceParams([t],r);if(o)return{sql:this.mapInlineParam(t,r),params:[]};let n=["none"];return a&&(n=[a(e.encoder)]),{sql:s(l.value++,t),params:[t],typings:n}}return rb(e,na)?{sql:s(l.value++,e),params:[e],typings:["none"]}:rb(e,r9.Aliased)&&void 0!==e.fieldAlias?{sql:i(e.fieldAlias),params:[]}:rb(e,rV)?e._.isWith?{sql:i(e._.alias),params:[]}:this.buildQueryFromSourceParams([new r6("("),e._.sql,new r6(") "),new r7(e._.alias)],r):e&&"function"==typeof e&&rF in e&&!0===e[rF]?e.schema?{sql:i(e.schema)+"."+i(e.enumName),params:[]}:{sql:i(e.enumName),params:[]}:r8(e)?e.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([e.getSQL()],r):this.buildQueryFromSourceParams([new r6("("),e.getSQL(),new r6(")")],r):o?{sql:this.mapInlineParam(e,r),params:[]}:{sql:s(l.value++,e),params:[e],typings:["none"]}});let u={sql:"",params:[]};for(let e of c)u.sql+=e.sql,u.params.push(...e.params),e.typings?.length&&(u.typings||(u.typings=[]),u.typings.push(...e.typings));return u}mapInlineParam(e,{escapeString:t}){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return e.toString();if("string"==typeof e)return t(e);if("object"==typeof e){let r=e.toString();return"[object Object]"===r?t(JSON.stringify(e)):t(r)}throw Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return void 0===e?this:new r9.Aliased(this,e)}mapWith(e){return this.decoder="function"==typeof e?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class r7{constructor(e){this.value=e}static [ry]="Name";brand;getSQL(){return new r9([this])}}let ne={mapFromDriverValue:e=>e},nt={mapToDriverValue:e=>e};({...ne,...nt});class nr{constructor(e,t=nt){this.value=e,this.encoder=t}static [ry]="Param";brand;getSQL(){return new r9([this])}}function nn(e,...t){let r=[];for(let[n,i]of((t.length>0||e.length>0&&""!==e[0])&&r.push(new r6(e[0])),t.entries()))r.push(i,new r6(e[n+1]));return new r9(r)}(fR=nn||(nn={})).empty=function(){return new r9([])},fR.fromList=function(e){return new r9(e)},fR.raw=function(e){return new r9([new r6(e)])},fR.join=function(e,t){let r=[];for(let[n,i]of e.entries())n>0&&void 0!==t&&r.push(t),r.push(i);return new r9(r)},fR.identifier=function(e){return new r7(e)},fR.placeholder=function(e){return new na(e)},fR.param=function(e,t){return new nr(e,t)};var ni=r9||(r9={});class ns{constructor(e,t){this.sql=e,this.fieldAlias=t}static [ry]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new ns(this.sql,this.fieldAlias)}}ni.Aliased=ns;class na{constructor(e){this.name=e}static [ry]="Placeholder";getSQL(){return new r9([this])}}function no(e,t){return e.map(e=>{if(rb(e,na)){if(!(e.name in t))throw Error(`No value for placeholder "${e.name}" was provided`);return t[e.name]}if(rb(e,nr)&&rb(e.value,na)){if(!(e.value.name in t))throw Error(`No value for placeholder "${e.value.name}" was provided`);return e.encoder.mapToDriverValue(t[e.value.name])}return e})}let nl=Symbol.for("drizzle:IsDrizzleView");class nc{static [ry]="View";[rz];[nl]=!0;constructor({name:e,schema:t,selectedFields:r,query:n}){this[rz]={name:e,originalName:e,schema:t,selectedFields:r,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new r9([this])}}rE.prototype.getSQL=function(){return new r9([this])},r3.prototype.getSQL=function(){return new r9([this])},rV.prototype.getSQL=function(){return new r9([this])};class nu{constructor(e){this.table=e}static [ry]="ColumnAliasProxyHandler";get(e,t){return"table"===t?this.table:e[t]}}class nd{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static [ry]="TableAliasProxyHandler";get(e,t){if(t===r3.Symbol.IsAlias)return!0;if(t===r3.Symbol.Name||this.replaceOriginalName&&t===r3.Symbol.OriginalName)return this.alias;if(t===rz)return{...e[rz],name:this.alias,isAlias:!0};if(t===r3.Symbol.Columns){let t=e[r3.Symbol.Columns];if(!t)return t;let r={};return Object.keys(t).map(n=>{r[n]=new Proxy(t[n],new nu(new Proxy(e,this)))}),r}let r=e[t];return rb(r,rE)?new Proxy(r,new nu(new Proxy(e,this))):r}}class nh{constructor(e){this.alias=e}static [ry]="RelationTableAliasProxyHandler";get(e,t){return"sourceTable"===t?nf(e.sourceTable,this.alias):e[t]}}function nf(e,t){return new Proxy(e,new nd(t,!1))}function np(e,t){return new Proxy(e,new nu(new Proxy(e.table,new nd(t,!1))))}function ng(e,t){return new r9.Aliased(nm(e.sql,t),e.fieldAlias)}function nm(e,t){return nn.join(e.queryChunks.map(e=>rb(e,rE)?np(e,t):rb(e,r9)?nm(e,t):rb(e,r9.Aliased)?ng(e,t):e))}class ny{static [ry]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,t){if("_"===t)return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(t===rz)return{...e[rz],selectedFields:new Proxy(e[rz].selectedFields,this)};if("symbol"==typeof t)return e[t];let r=(rb(e,rV)?e._.selectedFields:rb(e,nc)?e[rz].selectedFields:e)[t];if(rb(r,r9.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!r.isSelectionField)return r.sql;let e=r.clone();return e.isSelectionField=!0,e}if(rb(r,r9)){if("sql"===this.config.sqlBehavior)return r;throw Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return rb(r,rE)?this.config.alias?new Proxy(r,new nu(new Proxy(r.table,new nd(this.config.alias,this.config.replaceOriginalName??!1)))):r:"object"!=typeof r||null===r?r:new Proxy(r,new ny(this.config))}}function nb(e,t){return Object.entries(e).reduce((e,[r,n])=>{if("string"!=typeof r)return e;let i=t?[...t,r]:[r];return rb(n,rE)||rb(n,r9)||rb(n,r9.Aliased)||rb(n,rV)?e.push({path:i,field:n}):rb(n,r3)?e.push(...nb(n[r3.Symbol.Columns],i)):e.push(...nb(n,i)),e},[])}function nw(e,t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let[e,t]of r.entries())if(t!==n[e])return!1;return!0}function nv(e,t){let r=Object.entries(t).filter(([,e])=>void 0!==e).map(([t,r])=>rb(r,r9)||rb(r,rE)?[t,r]:[t,new nr(r,e[r3.Symbol.Columns][t])]);if(0===r.length)throw Error("No values to set");return Object.fromEntries(r)}function n_(e,t){for(let r of t)for(let t of Object.getOwnPropertyNames(r.prototype))"constructor"!==t&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(r.prototype,t)||Object.create(null))}function nS(e){return e[r3.Symbol.Columns]}function nE(e){return rb(e,rV)?e._.alias:rb(e,nc)?e[rz].name:rb(e,r9)?void 0:e[r3.Symbol.IsAlias]?e[r3.Symbol.Name]:e[r3.Symbol.BaseName]}function nx(e,t){return{name:"string"==typeof e&&e.length>0?e:"",config:"object"==typeof e?e:t}}let nT="u"<typeof TextDecoder?null:new TextDecoder;class nP extends r${static [ry]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class nA extends nP{static [ry]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new nO(e,this.config)}}class nO extends rj{static [ry]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class nC extends nP{static [ry]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new nR(e,this.config)}}class nR extends rj{static [ry]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function nk(e,t){let{name:r,config:n}=nx(e,t);return"number"===n.mode?new nA(r):new nC(r)}class nN extends r${static [ry]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new nI(e,this.config)}}class nI extends rj{static [ry]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class n$ extends r${static [ry]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new nj(e,this.config)}}class nj extends rj{static [ry]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function nD(e,t){let{name:r,config:n}=nx(e,t);return"number"===n.mode?new nN(r):new n$(r)}class nL extends r${static [ry]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new nM(e,this.config)}}class nM extends rj{static [ry]="PgBoolean";getSQLType(){return"boolean"}}function nU(e){return new nL(e??"")}class nq extends r${static [ry]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new nB(e,this.config)}}class nB extends rj{static [ry]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function nF(e,t={}){let{name:r,config:n}=nx(e,t);return new nq(r,n)}class nQ extends r${static [ry]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new nH(e,this.config)}}class nH extends rj{static [ry]="PgCidr";getSQLType(){return"cidr"}}function nV(e){return new nQ(e??"")}class nK extends r${static [ry]="PgCustomColumnBuilder";constructor(e,t,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=r}build(e){return new nW(e,this.config)}}class nW extends rj{static [ry]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function nz(e){return(t,r)=>{let{name:n,config:i}=nx(t,r);return new nK(n,i,e)}}class nJ extends r${static [ry]="PgDateColumnBaseBuilder";defaultNow(){return this.default(nn`now()`)}}class nG extends nJ{static [ry]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new nX(e,this.config)}}class nX extends rj{static [ry]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return"string"==typeof e?new Date(e):e}mapToDriverValue(e){return e.toISOString()}}class nY extends nJ{static [ry]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new nZ(e,this.config)}}class nZ extends rj{static [ry]="PgDateString";getSQLType(){return"date"}mapFromDriverValue(e){return"string"==typeof e?e:e.toISOString().slice(0,-14)}}function n0(e,t){let{name:r,config:n}=nx(e,t);return n?.mode==="date"?new nG(r):new nY(r)}class n1 extends r${static [ry]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new n2(e,this.config)}}class n2 extends rj{static [ry]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return"string"==typeof e?Number.parseFloat(e):e}}function n3(e){return new n1(e??"")}class n4 extends r${static [ry]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new n5(e,this.config)}}class n5 extends rj{static [ry]="PgInet";getSQLType(){return"inet"}}function n8(e){return new n4(e??"")}class n6 extends nP{static [ry]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new n9(e,this.config)}}class n9 extends rj{static [ry]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return"string"==typeof e?Number.parseInt(e):e}}function n7(e){return new n6(e??"")}class ie extends r${static [ry]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new it(e,this.config)}}class it extends rj{static [ry]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}}function ir(e,t={}){let{name:r,config:n}=nx(e,t);return new ie(r,n)}class ii extends r${static [ry]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new is(e,this.config)}}class is extends rj{static [ry]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function ia(e){return new ii(e??"")}class io extends r${static [ry]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new il(e,this.config)}}class il extends rj{static [ry]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if("string"==typeof e)try{return JSON.parse(e)}catch{}return e}}function ic(e){return new io(e??"")}class iu extends r${static [ry]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new id(e,this.config)}}class id extends rj{static [ry]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r),Number.parseFloat(n)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class ih extends r${static [ry]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new ip(e,this.config)}}class ip extends rj{static [ry]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,r,n]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(r),c:Number.parseFloat(n)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function ig(e,t){let{name:r,config:n}=nx(e,t);return n?.mode&&"tuple"!==n.mode?new ih(r):new iu(r)}class im extends r${static [ry]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new iy(e,this.config)}}class iy extends rj{static [ry]="PgMacaddr";getSQLType(){return"macaddr"}}function ib(e){return new im(e??"")}class iw extends r${static [ry]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new iv(e,this.config)}}class iv extends rj{static [ry]="PgMacaddr8";getSQLType(){return"macaddr8"}}function i_(e){return new iw(e??"")}class iS extends r${static [ry]="PgNumericBuilder";constructor(e,t,r){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=r}build(e){return new iE(e,this.config)}}class iE extends rj{static [ry]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"string"==typeof e?e:String(e)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class ix extends r${static [ry]="PgNumericNumberBuilder";constructor(e,t,r){super(e,"number","PgNumericNumber"),this.config.precision=t,this.config.scale=r}build(e){return new iT(e,this.config)}}class iT extends rj{static [ry]="PgNumericNumber";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}class iP extends r${static [ry]="PgNumericBigIntBuilder";constructor(e,t,r){super(e,"bigint","PgNumericBigInt"),this.config.precision=t,this.config.scale=r}build(e){return new iA(e,this.config)}}class iA extends rj{static [ry]="PgNumericBigInt";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function iO(e,t){let{name:r,config:n}=nx(e,t),i=n?.mode;return"number"===i?new ix(r,n?.precision,n?.scale):"bigint"===i?new iP(r,n?.precision,n?.scale):new iS(r,n?.precision,n?.scale)}class iC extends r${static [ry]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new iR(e,this.config)}}class iR extends rj{static [ry]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,r]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class ik extends r${static [ry]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new iN(e,this.config)}}class iN extends rj{static [ry]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if("string"==typeof e){let[t,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function iI(e,t){let{name:r,config:n}=nx(e,t);return n?.mode&&"tuple"!==n.mode?new ik(r):new iC(r)}function i$(e,t){let r=new DataView(new ArrayBuffer(8));for(let n=0;n<8;n++)r.setUint8(n,e[t+n]);return r.getFloat64(0,!0)}function ij(e){let t=function(e){let t=[];for(let r=0;r<e.length;r+=2)t.push(Number.parseInt(e.slice(r,r+2),16));return new Uint8Array(t)}(e),r=0,n=t[0];r+=1;let i=new DataView(t.buffer),s=i.getUint32(r,1===n);if(r+=4,0x20000000&s&&(i.getUint32(r,1===n),r+=4),(65535&s)==1){let e=i$(t,r),n=i$(t,r+=8);return r+=8,[e,n]}throw Error("Unsupported geometry type")}class iD extends r${static [ry]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new iL(e,this.config)}}class iL extends rj{static [ry]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ij(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class iM extends r${static [ry]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new iU(e,this.config)}}class iU extends rj{static [ry]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=ij(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function iq(e,t){let{name:r,config:n}=nx(e,t);return n?.mode&&"tuple"!==n.mode?new iM(r):new iD(r)}class iB extends r${static [ry]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new iF(e,this.config)}}class iF extends rj{static [ry]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>"string"==typeof e?Number.parseFloat(e):e}function iQ(e){return new iB(e??"")}class iH extends r${static [ry]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new iV(e,this.config)}}class iV extends rj{static [ry]="PgSerial";getSQLType(){return"serial"}}function iK(e){return new iH(e??"")}class iW extends nP{static [ry]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new iz(e,this.config)}}class iz extends rj{static [ry]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>"string"==typeof e?Number(e):e}function iJ(e){return new iW(e??"")}class iG extends r${static [ry]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new iX(e,this.config)}}class iX extends rj{static [ry]="PgSmallSerial";getSQLType(){return"smallserial"}}function iY(e){return new iG(e??"")}class iZ extends r${static [ry]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new i0(e,this.config)}}class i0 extends rj{static [ry]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function i1(e,t={}){let{name:r,config:n}=nx(e,t);return new iZ(r,n)}class i2 extends nJ{constructor(e,t,r){super(e,"string","PgTime"),this.withTimezone=t,this.precision=r,this.config.withTimezone=t,this.config.precision=r}static [ry]="PgTimeBuilder";build(e){return new i3(e,this.config)}}class i3 extends rj{static [ry]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`time${e}${this.withTimezone?" with time zone":""}`}}function i4(e,t={}){let{name:r,config:n}=nx(e,t);return new i2(r,n.withTimezone??!1,n.precision)}class i5 extends nJ{static [ry]="PgTimestampBuilder";constructor(e,t,r){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=r}build(e){return new i8(e,this.config)}}class i8 extends rj{static [ry]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":` (${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){return"string"==typeof e?new Date(this.withTimezone?e:e+"+0000"):e}mapToDriverValue=e=>e.toISOString()}class i6 extends nJ{static [ry]="PgTimestampStringBuilder";constructor(e,t,r){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=r}build(e){return new i9(e,this.config)}}class i9 extends rj{static [ry]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){let e=void 0===this.precision?"":`(${this.precision})`;return`timestamp${e}${this.withTimezone?" with time zone":""}`}mapFromDriverValue(e){if("string"==typeof e)return e;let t=e.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){let r=e.getTimezoneOffset();return`${t}${r<=0?"+":"-"}${Math.floor(Math.abs(r)/60).toString().padStart(2,"0")}`}return t}}function i7(e,t={}){let{name:r,config:n}=nx(e,t);return n?.mode==="string"?new i6(r,n.withTimezone??!1,n.precision):new i5(r,n?.withTimezone??!1,n?.precision)}class se extends r${static [ry]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(nn`gen_random_uuid()`)}build(e){return new st(e,this.config)}}class st extends rj{static [ry]="PgUUID";getSQLType(){return"uuid"}}function sr(e){return new se(e??"")}class sn extends r${static [ry]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new si(e,this.config)}}class si extends rj{static [ry]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function ss(e,t={}){let{name:r,config:n}=nx(e,t);return new sn(r,n)}class sa extends r${static [ry]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new so(e,this.config)}}class so extends rj{static [ry]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function sl(e,t){let{name:r,config:n}=nx(e,t);return new sa(r,n)}class sc extends r${static [ry]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new su(e,this.config)}}class su extends rj{static [ry]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function sd(e,t){let{name:r,config:n}=nx(e,t);return new sc(r,n)}class sh extends r${static [ry]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new sf(e,this.config)}}class sf extends rj{static [ry]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function sp(e,t){let{name:r,config:n}=nx(e,t);return new sh(r,n)}class sg extends r${static [ry]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new sm(e,this.config)}}class sm extends rj{static [ry]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(e=>Number.parseFloat(e))}}function sy(e,t){let{name:r,config:n}=nx(e,t);return new sg(r,n)}let sb=Symbol.for("drizzle:PgInlineForeignKeys"),sw=Symbol.for("drizzle:EnableRLS");class sv extends r3{static [ry]="PgTable";static Symbol=Object.assign({},r3.Symbol,{InlineForeignKeys:sb,EnableRLS:sw});[sb]=[];[sw]=!1;[r3.Symbol.ExtraConfigBuilder]=void 0;[r3.Symbol.ExtraConfigColumns]={}}let s_=(e,t,r)=>(function(e,t,r,n,i=e){let s=new sv(e,n,i),a="function"==typeof t?t({bigint:nk,bigserial:nD,boolean:nU,char:nF,cidr:nV,customType:nz,date:n0,doublePrecision:n3,inet:n8,integer:n7,interval:ir,json:ia,jsonb:ic,line:ig,macaddr:ib,macaddr8:i_,numeric:iO,point:iI,geometry:iq,real:iQ,serial:iK,smallint:iJ,smallserial:iY,text:i1,time:i4,timestamp:i7,uuid:sr,varchar:ss,bit:sl,halfvec:sd,sparsevec:sp,vector:sy}):t,o=Object.fromEntries(Object.entries(a).map(([e,t])=>{t.setName(e);let r=t.build(s);return s[sb].push(...t.buildForeignKeys(r,s)),[e,r]})),l=Object.fromEntries(Object.entries(a).map(([e,t])=>(t.setName(e),[e,t.buildExtraConfigColumn(s)]))),c=Object.assign(s,o);return c[r3.Symbol.Columns]=o,c[r3.Symbol.ExtraConfigColumns]=l,r&&(c[sv.Symbol.ExtraConfigBuilder]=r),Object.assign(c,{enableRLS:()=>(c[sv.Symbol.EnableRLS]=!0,c)})})(e,t,r,void 0);class sS{constructor(e,t){this.name=e,this.value=t}static [ry]="PgCheckBuilder";brand;build(e){return new sE(e,this)}}class sE{constructor(e,t){this.table=e,this.name=t.name,this.value=t.value}static [ry]="PgCheck";name;value}class sx{constructor(e,t){this.unique=e,this.name=t}static [ry]="PgIndexBuilderOn";on(...e){return new sT(e.map(e=>{if(rb(e,r9))return e;let t=new rL(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!1,this.name)}onOnly(...e){return new sT(e.map(e=>{if(rb(e,r9))return e;let t=new rL(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=e.defaultConfig,t}),this.unique,!0,this.name)}using(e,...t){return new sT(t.map(e=>{if(rb(e,r9))return e;let t=new rL(e.name,!!e.keyAsName,e.columnType,e.indexConfig);return e.indexConfig=JSON.parse(JSON.stringify(e.defaultConfig)),t}),this.unique,!0,this.name,e)}}class sT{static [ry]="PgIndexBuilder";config;constructor(e,t,r,n,i="btree"){this.config={name:n,columns:e,unique:t,only:r,method:i}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new sP(this.config,e)}}class sP{static [ry]="PgIndex";config;constructor(e,t){this.config={...e,table:t}}}class sA{constructor(e,t){this.name=e,t&&(this.as=t.as,this.for=t.for,this.to=t.to,this.using=t.using,this.withCheck=t.withCheck)}static [ry]="PgPolicy";as;for;to;using;withCheck;_linkedTable;link(e){return this._linkedTable=e,this}}function sO(...e){return e[0].columns?new sC(e[0].columns,e[0].name):new sC(e)}class sC{static [ry]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new sR(e,this.columns,this.name)}}class sR{constructor(e,t,r){this.table=e,this.columns=t,this.name=r}static [ry]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[sv.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}let sk=Symbol.for("drizzle:PgViewConfig");function sN(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(e=>e.toLowerCase()).join("_")}function sI(e){return(e.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((e,t,r)=>e+(0===r?t.toLowerCase():`${t[0].toUpperCase()}${t.slice(1)}`),"")}function s$(e){return e}class sj{static [ry]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert="snake_case"===e?sN:"camelCase"===e?sI:s$}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=e.table[r3.Symbol.Schema]??"public",r=e.table[r3.Symbol.OriginalName],n=`${t}.${r}.${e.name}`;return this.cache[n]||this.cacheTable(e.table),this.cache[n]}cacheTable(e){let t=e[r3.Symbol.Schema]??"public",r=e[r3.Symbol.OriginalName],n=`${t}.${r}`;if(!this.cachedTables[n]){for(let t of Object.values(e[r3.Symbol.Columns])){let e=`${n}.${t.name}`;this.cache[e]=this.convert(t.name)}this.cachedTables[n]=!0}}clearCache(){this.cache={},this.cachedTables={}}}class sD extends Error{static [ry]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}}class sL extends Error{constructor(e,t,r){super(`Failed query: ${e}
params: ${t}`),this.query=e,this.params=t,this.cause=r,Error.captureStackTrace(this,sL),r&&(this.cause=r)}}class sM extends sD{static [ry]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}function sU(e,t){return"object"!=typeof t||null===t||!("mapToDriverValue"in t)||"function"!=typeof t.mapToDriverValue||r8(e)||rb(e,nr)||rb(e,na)||rb(e,rE)||rb(e,r3)||rb(e,nc)?e:new nr(e,t)}let sq=(e,t)=>nn`${e} = ${sU(t,e)}`,sB=(e,t)=>nn`${e} <> ${sU(t,e)}`;function sF(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new r9(1===t.length?t:[new r6("("),nn.join(t,new r6(" and ")),new r6(")")])}function sQ(...e){let t=e.filter(e=>void 0!==e);if(0!==t.length)return new r9(1===t.length?t:[new r6("("),nn.join(t,new r6(" or ")),new r6(")")])}function sH(e){return nn`not ${e}`}let sV=(e,t)=>nn`${e} > ${sU(t,e)}`,sK=(e,t)=>nn`${e} >= ${sU(t,e)}`,sW=(e,t)=>nn`${e} < ${sU(t,e)}`,sz=(e,t)=>nn`${e} <= ${sU(t,e)}`;function sJ(e,t){return Array.isArray(t)?0===t.length?nn`false`:nn`${e} in ${t.map(t=>sU(t,e))}`:nn`${e} in ${sU(t,e)}`}function sG(e,t){return Array.isArray(t)?0===t.length?nn`true`:nn`${e} not in ${t.map(t=>sU(t,e))}`:nn`${e} not in ${sU(t,e)}`}function sX(e){return nn`${e} is null`}function sY(e){return nn`${e} is not null`}function sZ(e){return nn`exists ${e}`}function s0(e){return nn`not exists ${e}`}function s1(e,t,r){return nn`${e} between ${sU(t,e)} and ${sU(r,e)}`}function s2(e,t,r){return nn`${e} not between ${sU(t,e)} and ${sU(r,e)}`}function s3(e,t){return nn`${e} like ${t}`}function s4(e,t){return nn`${e} not like ${t}`}function s5(e,t){return nn`${e} ilike ${t}`}function s8(e,t){return nn`${e} not ilike ${t}`}function s6(e){return nn`${e} asc`}function s9(e){return nn`${e} desc`}class s7{constructor(e,t,r){this.sourceTable=e,this.referencedTable=t,this.relationName=r,this.referencedTableName=t[r3.Symbol.Name]}static [ry]="Relation";referencedTableName;fieldName}class ae{constructor(e,t){this.table=e,this.config=t}static [ry]="Relations"}class at extends s7{constructor(e,t,r,n){super(e,t,r?.relationName),this.config=r,this.isNullable=n}static [ry]="One";withFieldName(e){let t=new at(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}}class ar extends s7{constructor(e,t,r){super(e,t,r?.relationName),this.config=r}static [ry]="Many";withFieldName(e){let t=new ar(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}}function an(){return{and:sF,between:s1,eq:sq,exists:sZ,gt:sV,gte:sK,ilike:s5,inArray:sJ,isNull:sX,isNotNull:sY,like:s3,lt:sW,lte:sz,ne:sB,not:sH,notBetween:s2,notExists:s0,notLike:s4,notIlike:s8,notInArray:sG,or:sQ,sql:nn}}function ai(){return{sql:nn,asc:s6,desc:s9}}function as(e,t,r){if(rb(r,at)&&r.config)return{fields:r.config.fields,references:r.config.references};let n=t[r4(r.referencedTable)];if(!n)throw Error(`Table "${r.referencedTable[r3.Symbol.Name]}" not found in schema`);let i=e[n];if(!i)throw Error(`Table "${n}" not found in schema`);let s=r.sourceTable,a=t[r4(s)];if(!a)throw Error(`Table "${s[r3.Symbol.Name]}" not found in schema`);let o=[];for(let e of Object.values(i.relations))(r.relationName&&r!==e&&e.relationName===r.relationName||!r.relationName&&e.referencedTable===r.sourceTable)&&o.push(e);if(o.length>1)throw r.relationName?Error(`There are multiple relations with name "${r.relationName}" in table "${n}"`):Error(`There are multiple relations between "${n}" and "${r.sourceTable[r3.Symbol.Name]}". Please specify relation name`);if(o[0]&&rb(o[0],at)&&o[0].config)return{fields:o[0].config.references,references:o[0].config.fields};throw Error(`There is not enough information to infer relation "${a}.${r.fieldName}"`)}function aa(e){return{one:function(t,r){return new at(e,t,r,r?.fields.reduce((e,t)=>e&&t.notNull,!0)??!1)},many:function(t,r){return new ar(e,t,r)}}}function ao(e,t,r,n,i=e=>e){let s={};for(let[a,o]of n.entries())if(o.isJson){let n=t.relations[o.tsKey],l=r[a],c="string"==typeof l?JSON.parse(l):l;s[o.tsKey]=rb(n,at)?c&&ao(e,e[o.relationTableTsKey],c,o.selection,i):c.map(t=>ao(e,e[o.relationTableTsKey],t,o.selection,i))}else{let e,t=i(r[a]),n=o.field;e=rb(n,rE)?n:rb(n,r9)?n.decoder:n.sql.decoder,s[o.tsKey]=null===t?null:e.mapFromDriverValue(t)}return s}class al extends nc{static [ry]="PgViewBase"}class ac{static [ry]="PgDialect";casing;constructor(e){this.casing=new sj(e?.casing)}async migrate(e,t,r){let n="string"==typeof r?"__drizzle_migrations":r.migrationsTable??"__drizzle_migrations",i="string"==typeof r?"drizzle":r.migrationsSchema??"drizzle",s=nn`
			CREATE TABLE IF NOT EXISTS ${nn.identifier(i)}.${nn.identifier(n)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(nn`CREATE SCHEMA IF NOT EXISTS ${nn.identifier(i)}`),await t.execute(s);let a=(await t.all(nn`select id, hash, created_at from ${nn.identifier(i)}.${nn.identifier(n)} order by created_at desc limit 1`))[0];await t.transaction(async t=>{for await(let r of e)if(!a||Number(a.created_at)<r.folderMillis){for(let e of r.sql)await t.execute(nn.raw(e));await t.execute(nn`insert into ${nn.identifier(i)}.${nn.identifier(n)} ("hash", "created_at") values(${r.hash}, ${r.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[nn`with `];for(let[r,n]of e.entries())t.push(nn`${nn.identifier(n._.alias)} as (${n._.sql})`),r<e.length-1&&t.push(nn`, `);return t.push(nn` `),nn.join(t)}buildDeleteQuery({table:e,where:t,returning:r,withList:n}){let i=this.buildWithCTE(n),s=r?nn` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0,a=t?nn` where ${t}`:void 0;return nn`${i}delete from ${e}${a}${s}`}buildUpdateSet(e,t){let r=e[r3.Symbol.Columns],n=Object.keys(r).filter(e=>void 0!==t[e]||r[e]?.onUpdateFn!==void 0),i=n.length;return nn.join(n.flatMap((e,n)=>{let s=r[e],a=s.onUpdateFn?.(),o=t[e]??(rb(a,r9)?a:nn.param(a,s)),l=nn`${nn.identifier(this.casing.getColumnCasing(s))} = ${o}`;return n<i-1?[l,nn.raw(", ")]:[l]}))}buildUpdateQuery({table:e,set:t,where:r,returning:n,withList:i,from:s,joins:a}){let o=this.buildWithCTE(i),l=e[sv.Symbol.Name],c=e[sv.Symbol.Schema],u=e[sv.Symbol.OriginalName],d=l===u?void 0:l,h=nn`${c?nn`${nn.identifier(c)}.`:void 0}${nn.identifier(u)}${d&&nn` ${nn.identifier(d)}`}`,f=this.buildUpdateSet(e,t),p=s&&nn.join([nn.raw(" from "),this.buildFromTable(s)]),g=this.buildJoins(a),m=n?nn` returning ${this.buildSelection(n,{isSingleTable:!s})}`:void 0,y=r?nn` where ${r}`:void 0;return nn`${o}update ${h} set ${f}${p}${g}${y}${m}`}buildSelection(e,{isSingleTable:t=!1}={}){let r=e.length,n=e.flatMap(({field:e},n)=>{let i=[];if(rb(e,r9.Aliased)&&e.isSelectionField)i.push(nn.identifier(e.fieldAlias));else if(rb(e,r9.Aliased)||rb(e,r9)){let r=rb(e,r9.Aliased)?e.sql:e;t?i.push(new r9(r.queryChunks.map(e=>rb(e,rj)?nn.identifier(this.casing.getColumnCasing(e)):e))):i.push(r),rb(e,r9.Aliased)&&i.push(nn` as ${nn.identifier(e.fieldAlias)}`)}else if(rb(e,rE))t?i.push(nn.identifier(this.casing.getColumnCasing(e))):i.push(e);else if(rb(e,rV)){let t=Object.entries(e._.selectedFields);if(1===t.length){let r=t[0][1],n=rb(r,r9)?r.decoder:rb(r,rE)?{mapFromDriverValue:e=>r.mapFromDriverValue(e)}:r.sql.decoder;n&&(e._.sql.decoder=n)}i.push(e)}return n<r-1&&i.push(nn`, `),i});return nn.join(n)}buildJoins(e){if(!e||0===e.length)return;let t=[];for(let[r,n]of e.entries()){0===r&&t.push(nn` `);let i=n.table,s=n.lateral?nn` lateral`:void 0,a=n.on?nn` on ${n.on}`:void 0;if(rb(i,sv)){let e=i[sv.Symbol.Name],r=i[sv.Symbol.Schema],o=i[sv.Symbol.OriginalName],l=e===o?void 0:n.alias;t.push(nn`${nn.raw(n.joinType)} join${s} ${r?nn`${nn.identifier(r)}.`:void 0}${nn.identifier(o)}${l&&nn` ${nn.identifier(l)}`}${a}`)}else if(rb(i,nc)){let e=i[rz].name,r=i[rz].schema,o=i[rz].originalName,l=e===o?void 0:n.alias;t.push(nn`${nn.raw(n.joinType)} join${s} ${r?nn`${nn.identifier(r)}.`:void 0}${nn.identifier(o)}${l&&nn` ${nn.identifier(l)}`}${a}`)}else t.push(nn`${nn.raw(n.joinType)} join${s} ${i}${a}`);r<e.length-1&&t.push(nn` `)}return nn.join(t)}buildFromTable(e){if(rb(e,r3)&&e[r3.Symbol.IsAlias]){let t=nn`${nn.identifier(e[r3.Symbol.OriginalName])}`;return e[r3.Symbol.Schema]&&(t=nn`${nn.identifier(e[r3.Symbol.Schema])}.${t}`),nn`${t} ${nn.identifier(e[r3.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:r,where:n,having:i,table:s,joins:a,orderBy:o,groupBy:l,limit:c,offset:u,lockingClause:d,distinct:h,setOperators:f}){let p,g,m,y=r??nb(t);for(let e of y){let t;if(rb(e.field,rE)&&e.field.table[rT]!==(rb(s,rV)?s._.alias:rb(s,al)?s[rz].name:rb(s,r9)?void 0:s[rT])&&(t=e.field.table,!a?.some(({alias:e})=>e===(t[r3.Symbol.IsAlias]?t[rT]:t[r3.Symbol.BaseName])))){let t=e.field.table[rT];throw Error(`Your "${e.path.join("->")}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}}let b=!a||0===a.length,w=this.buildWithCTE(e);h&&(p=!0===h?nn` distinct`:nn` distinct on (${nn.join(h.on,nn`, `)})`);let v=this.buildSelection(y,{isSingleTable:b}),_=this.buildFromTable(s),S=this.buildJoins(a),E=n?nn` where ${n}`:void 0,x=i?nn` having ${i}`:void 0;o&&o.length>0&&(g=nn` order by ${nn.join(o,nn`, `)}`),l&&l.length>0&&(m=nn` group by ${nn.join(l,nn`, `)}`);let T="object"==typeof c||"number"==typeof c&&c>=0?nn` limit ${c}`:void 0,P=u?nn` offset ${u}`:void 0,A=nn.empty();if(d){let e=nn` for ${nn.raw(d.strength)}`;d.config.of&&e.append(nn` of ${nn.join(Array.isArray(d.config.of)?d.config.of:[d.config.of],nn`, `)}`),d.config.noWait?e.append(nn` nowait`):d.config.skipLocked&&e.append(nn` skip locked`),A.append(e)}let O=nn`${w}select${p} ${v} from ${_}${S}${E}${m}${x}${g}${T}${P}${A}`;return f.length>0?this.buildSetOperations(O,f):O}buildSetOperations(e,t){let[r,...n]=t;if(!r)throw Error("Cannot pass undefined values to any set operator");return 0===n.length?this.buildSetOperationQuery({leftSelect:e,setOperator:r}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:r}),n)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:r,rightSelect:n,limit:i,orderBy:s,offset:a}}){let o,l=nn`(${e.getSQL()}) `,c=nn`(${n.getSQL()})`;if(s&&s.length>0){let e=[];for(let t of s)if(rb(t,rj))e.push(nn.identifier(t.name));else if(rb(t,r9)){for(let e=0;e<t.queryChunks.length;e++){let r=t.queryChunks[e];rb(r,rj)&&(t.queryChunks[e]=nn.identifier(r.name))}e.push(nn`${t}`)}else e.push(nn`${t}`);o=nn` order by ${nn.join(e,nn`, `)} `}let u="object"==typeof i||"number"==typeof i&&i>=0?nn` limit ${i}`:void 0,d=nn.raw(`${t} ${r?"all ":""}`),h=a?nn` offset ${a}`:void 0;return nn`${l}${d}${c}${o}${u}${h}`}buildInsertQuery({table:e,values:t,onConflict:r,returning:n,withList:i,select:s,overridingSystemValue_:a}){let o=[],l=Object.entries(e[r3.Symbol.Columns]).filter(([e,t])=>!t.shouldDisableInsert()),c=l.map(([,e])=>nn.identifier(this.casing.getColumnCasing(e)));if(s)rb(t,r9)?o.push(t):o.push(t.getSQL());else for(let[e,r]of(o.push(nn.raw("values ")),t.entries())){let n=[];for(let[e,t]of l){let i=r[e];if(void 0===i||rb(i,nr)&&void 0===i.value)if(void 0!==t.defaultFn){let e=t.defaultFn(),r=rb(e,r9)?e:nn.param(e,t);n.push(r)}else if(t.default||void 0===t.onUpdateFn)n.push(nn`default`);else{let e=t.onUpdateFn(),r=rb(e,r9)?e:nn.param(e,t);n.push(r)}else n.push(i)}o.push(n),e<t.length-1&&o.push(nn`, `)}let u=this.buildWithCTE(i),d=nn.join(o),h=n?nn` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,f=r?nn` on conflict ${r}`:void 0,p=!0===a?nn`overriding system value `:void 0;return nn`${u}insert into ${e} ${c} ${p}${d}${f}${h}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:r}){let n=t?nn` concurrently`:void 0,i=r?nn` with no data`:void 0;return nn`refresh materialized view${n} ${e}${i}`}prepareTyping(e){if(rb(e,il)||rb(e,is))return"json";if(rb(e,iE))return"decimal";if(rb(e,i3))return"time";if(rb(e,i8)||rb(e,i9))return"timestamp";if(rb(e,nX)||rb(e,nZ))return"date";else if(rb(e,st))return"uuid";else return"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:r,table:n,tableConfig:i,queryConfig:s,tableAlias:a,nestedQueryRelation:o,joinOn:l}){let c,u=[],d,h,f=[],p,g=[];if(!0===s)u=Object.entries(i.columns).map(([e,t])=>({dbKey:t.name,tsKey:e,field:np(t,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let n=Object.fromEntries(Object.entries(i.columns).map(([e,t])=>[e,np(t,a)]));if(s.where){let e="function"==typeof s.where?s.where(n,an()):s.where;p=e&&nm(e,a)}let o=[],l=[];if(s.columns){let e=!1;for(let[t,r]of Object.entries(s.columns))void 0!==r&&t in i.columns&&(e||!0!==r||(e=!0),l.push(t));l.length>0&&(l=e?l.filter(e=>s.columns?.[e]===!0):Object.keys(i.columns).filter(e=>!l.includes(e)))}else l=Object.keys(i.columns);for(let e of l){let t=i.columns[e];o.push({tsKey:e,value:t})}let c=[];if(s.with&&(c=Object.entries(s.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:i.relations[e]}))),s.extras)for(let[e,t]of Object.entries("function"==typeof s.extras?s.extras(n,{sql:nn}):s.extras))o.push({tsKey:e,value:ng(t,a)});for(let{tsKey:e,value:t}of o)u.push({dbKey:rb(t,r9.Aliased)?t.fieldAlias:i.columns[e].name,tsKey:e,field:rb(t,rE)?np(t,a):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let m="function"==typeof s.orderBy?s.orderBy(n,ai()):s.orderBy??[];for(let{tsKey:n,queryConfig:i,relation:o}of(Array.isArray(m)||(m=[m]),f=m.map(e=>rb(e,rE)?np(e,a):nm(e,a)),d=s.limit,h=s.offset,c)){let s=as(t,r,o),l=r[r4(o.referencedTable)],c=`${a}_${n}`,d=sF(...s.fields.map((e,t)=>sq(np(s.references[t],c),np(e,a)))),h=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:r,table:e[l],tableConfig:t[l],queryConfig:rb(o,at)?!0===i?{limit:1}:{...i,limit:1}:i,tableAlias:c,joinOn:d,nestedQueryRelation:o}),f=nn`${nn.identifier(c)}.${nn.identifier("data")}`.as(n);g.push({on:nn`true`,table:new rV(h.sql,{},c),alias:c,joinType:"left",lateral:!0}),u.push({dbKey:n,tsKey:n,field:f,relationTableTsKey:l,isJson:!0,selection:h.selection})}}if(0===u.length)throw new sD({message:`No fields selected for table "${i.tsName}" ("${a}")`});if(p=sF(l,p),o){let e=nn`json_build_array(${nn.join(u.map(({field:e,tsKey:t,isJson:r})=>r?nn`${nn.identifier(`${a}_${t}`)}.${nn.identifier("data")}`:rb(e,r9.Aliased)?e.sql:e),nn`, `)})`;rb(o,ar)&&(e=nn`coalesce(json_agg(${e}${f.length>0?nn` order by ${nn.join(f,nn`, `)}`:void 0}), '[]'::json)`);let t=[{dbKey:"data",tsKey:"data",field:e.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:u}];void 0!==d||void 0!==h||f.length>0?(c=this.buildSelectQuery({table:nf(n,a),fields:{},fieldsFlat:[{path:[],field:nn.raw("*")}],where:p,limit:d,offset:h,orderBy:f,setOperators:[]}),p=void 0,d=void 0,h=void 0,f=[]):c=nf(n,a),c=this.buildSelectQuery({table:rb(c,sv)?c:new rV(c,{},a),fields:{},fieldsFlat:t.map(({field:e})=>({path:[],field:rb(e,rE)?np(e,a):e})),joins:g,where:p,limit:d,offset:h,orderBy:f,setOperators:[]})}else c=this.buildSelectQuery({table:nf(n,a),fields:{},fieldsFlat:u.map(({field:e})=>({path:[],field:rb(e,rE)?np(e,a):e})),joins:g,where:p,limit:d,offset:h,orderBy:f,setOperators:[]});return{tableTsKey:i.tsName,sql:c,selection:u}}}class au{static [ry]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class ad{static [ry]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let t,r=!!this.fields;return t=this.fields?this.fields:rb(e,rV)?Object.fromEntries(Object.keys(e._.selectedFields).map(t=>[t,e[t]])):rb(e,al)?e[rz].selectedFields:rb(e,r9)?{}:nS(e),new af({table:e,fields:t,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class ah extends au{static [ry]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:t,isPartialSelect:r,session:n,dialect:i,withList:s,distinct:a}){for(const o of(super(),this.config={withList:s,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=r,this.session=n,this.dialect=i,this._={selectedFields:t,config:this.config},this.tableName=nE(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},aN(e)))this.usedTables.add(o)}getUsedTables(){return[...this.usedTables]}createJoin(e,t){return(r,n)=>{let i=this.tableName,s=nE(r);for(let e of aN(r))this.usedTables.add(e);if("string"==typeof s&&this.config.joins?.some(e=>e.alias===s))throw Error(`Alias "${s}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof i&&(this.config.fields={[i]:this.config.fields}),"string"==typeof s&&!rb(r,r9))){let e=rb(r,rV)?r._.selectedFields:rb(r,nc)?r[rz].selectedFields:r[r3.Symbol.Columns];this.config.fields[s]=e}if("function"==typeof n&&(n=n(new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:n,table:r,joinType:e,alias:s,lateral:t}),"string"==typeof s)switch(e){case"left":this.joinsNotNullableMap[s]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[s]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[s]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[s]=!1}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,t){return r=>{let n="function"==typeof r?r(ag()):r;if(!nw(this.getSelectedFields(),n.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=e:this.config.orderBy=e;return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){let t=[];if(t.push(...aN(this.config.table)),this.config.joins)for(let e of this.config.joins)t.push(...aN(e.table));return new Proxy(new rV(this.getSQL(),this.config.fields,e,!1,[...new Set(t)]),new ny({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new ny({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=void 0===e?{config:{},enable:!0,autoInvalidate:!0}:!1===e?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}}class af extends ah{static [ry]="PgSelect";_prepare(e){let{session:t,config:r,dialect:n,joinsNotNullableMap:i,authToken:s,cacheConfig:a,usedTables:o}=this;if(!t)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:l}=r;return rW("drizzle.prepareQuery",()=>{let r=nb(l),c=t.prepareQuery(n.sqlToQuery(this.getSQL()),r,e,!0,void 0,{type:"select",tables:[...o]},a);return c.joinsNotNullableMap=i,c.setToken(s)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>rW("drizzle.operation",()=>this._prepare().execute(e,this.authToken))}function ap(e,t){return(r,n,...i)=>{let s=[n,...i].map(r=>({type:e,isAll:t,rightSelect:r}));for(let e of s)if(!nw(r.getSelectedFields(),e.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(s)}}n_(af,[rS]);let ag=()=>({union:am,unionAll:ay,intersect:ab,intersectAll:aw,except:av,exceptAll:a_}),am=ap("union",!1),ay=ap("union",!0),ab=ap("intersect",!1),aw=ap("intersect",!0),av=ap("except",!1),a_=ap("except",!0);class aS{static [ry]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=rb(e,ac)?e:void 0,this.dialectConfig=rb(e,ac)?void 0:e}$with=(e,t)=>{let r=this;return{as:n=>("function"==typeof n&&(n=n(r)),new Proxy(new rK(n.getSQL(),t??("getSelectedFields"in n?n.getSelectedFields()??{}:{}),e,!0),new ny({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;return{select:function(r){return new ad({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(e){return new ad({fields:e??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})},selectDistinctOn:function(e,r){return new ad({fields:r??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:e}})}}}select(e){return new ad({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new ad({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new ad({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new ac(this.dialectConfig)),this.dialect}}class aE{constructor(e,t){this.name=e,this.schema=t}static [ry]="PgDefaultViewBuilderCore";config={};with(e){return this.config.with=e,this}}class ax extends aE{static [ry]="PgViewBuilder";as(e){"function"==typeof e&&(e=e(new aS));let t=new ny({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),r=new Proxy(e.getSelectedFields(),t);return new Proxy(new aC({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:r,query:e.getSQL().inlineParams()}}),t)}}class aT extends aE{static [ry]="PgManualViewBuilder";columns;constructor(e,t,r){super(e,r),this.columns=nS(s_(e,t))}existing(){return new Proxy(new aC({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new ny({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new aC({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new ny({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class aP{constructor(e,t){this.name=e,this.schema=t}static [ry]="PgMaterializedViewBuilderCore";config={};using(e){return this.config.using=e,this}with(e){return this.config.with=e,this}tablespace(e){return this.config.tablespace=e,this}withNoData(){return this.config.withNoData=!0,this}}class aA extends aP{static [ry]="PgMaterializedViewBuilder";as(e){"function"==typeof e&&(e=e(new aS));let t=new ny({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),r=new Proxy(e.getSelectedFields(),t);return new Proxy(new ak({pgConfig:{with:this.config.with,using:this.config.using,tablespace:this.config.tablespace,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:r,query:e.getSQL().inlineParams()}}),t)}}class aO extends aP{static [ry]="PgManualMaterializedViewBuilder";columns;constructor(e,t,r){super(e,r),this.columns=nS(s_(e,t))}existing(){return new Proxy(new ak({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new ny({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(e){return new Proxy(new ak({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:e.inlineParams()}}),new ny({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}class aC extends al{static [ry]="PgView";[sk];constructor({pgConfig:e,config:t}){super(t),e&&(this[sk]={with:e.with})}}let aR=Symbol.for("drizzle:PgMaterializedViewConfig");class ak extends al{static [ry]="PgMaterializedView";[aR];constructor({pgConfig:e,config:t}){super(t),this[aR]={with:e?.with,using:e?.using,tablespace:e?.tablespace,withNoData:e?.withNoData}}}function aN(e){return rb(e,sv)?[e[rJ]?`${e[rJ]}.${e[r3.Symbol.BaseName]}`:e[r3.Symbol.BaseName]]:rb(e,rV)?e._.usedTables??[]:rb(e,r9)?e.usedTables??[]:[]}class aI extends rS{constructor(e,t,r,n){super(),this.session=t,this.dialect=r,this.config={table:e,withList:n}}static [ry]="PgDelete";config;cacheConfig;where(e){return this.config.where=e,this}returning(e=this.config.table[r3.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=nb(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return rW("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"delete",tables:aN(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>rW("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ny({alias:this.config.table[rT],sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class a${constructor(e,t,r,n,i){this.table=e,this.session=t,this.dialect=r,this.withList=n,this.overridingSystemValue_=i}static [ry]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(0===(e=Array.isArray(e)?e:[e]).length)throw Error("values() must be called with at least one value");let t=e.map(e=>{let t={},r=this.table[r3.Symbol.Columns];for(let n of Object.keys(e)){let i=e[n];t[n]=rb(i,r9)?i:new nr(i,r[n])}return t});return new aj(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t="function"==typeof e?e(new aS):e;if(!rb(t,r9)&&!nw(this.table[rG],t._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new aj(this.table,t,this.session,this.dialect,this.withList,!0)}}class aj extends rS{constructor(e,t,r,n,i,s,a){super(),this.session=r,this.dialect=n,this.config={table:e,values:t,withList:i,select:s,overridingSystemValue_:a}}static [ry]="PgInsert";config;cacheConfig;returning(e=this.config.table[r3.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=nb(e),this}onConflictDoNothing(e={}){if(void 0===e.target)this.config.onConflict=nn`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(e))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let r=e.where?nn` where ${e.where}`:void 0;this.config.onConflict=nn`(${nn.raw(t)})${r} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let t=e.where?nn` where ${e.where}`:void 0,r=e.targetWhere?nn` where ${e.targetWhere}`:void 0,n=e.setWhere?nn` where ${e.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,nv(this.config.table,e.set)),s="";return s=Array.isArray(e.target)?e.target.map(e=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(e))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=nn`(${nn.raw(s)})${r} do update set ${i}${t}${n}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return rW("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:aN(this.config.table)},this.cacheConfig))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>rW("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ny({alias:this.config.table[rT],sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class aD{constructor(e,t,r,n){this.table=e,this.session=t,this.dialect=r,this.withList=n}static [ry]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new aL(this.table,nv(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}}class aL extends rS{constructor(e,t,r,n,i){super(),this.session=r,this.dialect=n,this.config={set:t,table:e,withList:i,joins:[]},this.tableName=nE(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [ry]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from(e){let t=nE(e);return"string"==typeof t&&(this.joinsNotNullableMap[t]=!0),this.config.from=e,this}getTableLikeFields(e){return rb(e,sv)?e[r3.Symbol.Columns]:rb(e,rV)?e._.selectedFields:e[rz].selectedFields}createJoin(e){return(t,r)=>{let n=nE(t);if("string"==typeof n&&this.config.joins.some(e=>e.alias===n))throw Error(`Alias "${n}" is already used in this query`);if("function"==typeof r){let e=this.config.from&&!rb(this.config.from,r9)?this.getTableLikeFields(this.config.from):void 0;r=r(new Proxy(this.config.table[r3.Symbol.Columns],new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),e&&new Proxy(e,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:r,table:t,joinType:e,alias:n}),"string"==typeof n)switch(e){case"left":this.joinsNotNullableMap[n]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[n]=!0;break;case"inner":this.joinsNotNullableMap[n]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[n]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[r3.Symbol.Columns]),this.config.from)){let t=nE(this.config.from);if("string"==typeof t&&this.config.from&&!rb(this.config.from,r9)){let r=this.getTableLikeFields(this.config.from);e[t]=r}for(let t of this.config.joins){let r=nE(t.table);if("string"==typeof r&&!rb(t.table,r9)){let n=this.getTableLikeFields(t.table);e[r]=n}}}return this.config.returningFields=e,this.config.returning=nb(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0,void 0,{type:"insert",tables:aN(this.config.table)},this.cacheConfig);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ny({alias:this.config.table[rT],sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class aM extends r9{constructor(e){super(aM.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=aM.buildCount(e.source,e.filters)}sql;token;static [ry]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,t){return nn`(select count(*) from ${e}${nn.raw(" where ").if(t)}${t})`}static buildCount(e,t){return nn`select count(*) as count from ${e}${nn.raw(" where ").if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}}class aU{constructor(e,t,r,n,i,s,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=i,this.dialect=s,this.session=a}static [ry]="PgRelationalQueryBuilder";findMany(e){return new aq(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new aq(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}class aq extends rS{constructor(e,t,r,n,i,s,a,o,l){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=i,this.dialect=s,this.session=a,this.config=o,this.mode=l}static [ry]="PgRelationalQuery";_prepare(e){return rW("drizzle.prepareQuery",()=>{let{query:t,builtQuery:r}=this._toSQL();return this.session.prepareQuery(r,void 0,e,!0,(e,r)=>{let n=e.map(e=>ao(this.schema,this.tableConfig,e,t.selection,r));return"first"===this.mode?n[0]:n})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return rW("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}class aB extends rS{constructor(e,t,r,n){super(),this.execute=e,this.sql=t,this.query=r,this.mapBatchResult=n}static [ry]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}}class aF extends rS{constructor(e,t,r){super(),this.session=t,this.dialect=r,this.config={view:e}}static [ry]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return rW("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>rW("drizzle.operation",()=>this._prepare().execute(e,this.authToken))}class aQ{constructor(e,t,r){if(this.dialect=e,this.session=t,this._=r?{schema:r.schema,fullSchema:r.fullSchema,tableNamesMap:r.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(const[n,i]of Object.entries(this._.schema))this.query[n]=new aU(r.fullSchema,this._.schema,this._.tableNamesMap,r.fullSchema[n],i,e,t);this.$cache={invalidate:async e=>{}}}static [ry]="PgDatabase";query;$with=(e,t)=>{let r=this;return{as:n=>("function"==typeof n&&(n=n(new aS(r.dialect))),new Proxy(new rK(n.getSQL(),t??("getSelectedFields"in n?n.getSelectedFields()??{}:{}),e,!0),new ny({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new aM({source:e,filters:t,session:this.session})}$cache;with(...e){let t=this;return{select:function(r){return new ad({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e})},selectDistinct:function(r){return new ad({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})},selectDistinctOn:function(r,n){return new ad({fields:n??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:r}})},update:function(r){return new aD(r,t.session,t.dialect,e)},insert:function(r){return new a$(r,t.session,t.dialect,e)},delete:function(r){return new aI(r,t.session,t.dialect,e)}}}select(e){return new ad({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new ad({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new ad({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new aD(e,this.session,this.dialect)}insert(e){return new a$(e,this.session,this.dialect)}delete(e){return new aI(e,this.session,this.dialect)}refreshMaterializedView(e){return new aF(e,this.session,this.dialect)}authToken;execute(e){let t="string"==typeof e?nn.raw(e):e.getSQL(),r=this.dialect.sqlToQuery(t),n=this.session.prepareQuery(r,void 0,void 0,!1);return new aB(()=>n.execute(void 0,this.authToken),t,r,e=>n.mapResult(e,!0))}transaction(e,t){return this.session.transaction(e,t)}}class aH{static [ry]="Cache"}class aV extends aH{strategy(){return"all"}static [ry]="NoopCache";async get(e){}async put(e,t,r,n){}async onMutate(e){}}async function aK(e,t){let r=`${e}-${JSON.stringify(t)}`,n=new TextEncoder().encode(r);return[...new Uint8Array(await crypto.subtle.digest("SHA-256",n))].map(e=>e.toString(16).padStart(2,"0")).join("")}class aW{constructor(e,t,r,n){this.query=e,this.cache=t,this.queryMetadata=r,this.cacheConfig=n,t&&"all"===t.strategy()&&void 0===n&&(this.cacheConfig={enable:!0,autoInvalidate:!0}),this.cacheConfig?.enable||(this.cacheConfig=void 0)}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static [ry]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache(e,t,r){if(void 0===this.cache||rb(this.cache,aV)||void 0===this.queryMetadata||this.cacheConfig&&!this.cacheConfig.enable)try{return await r()}catch(r){throw new sL(e,t,r)}if(("insert"===this.queryMetadata.type||"update"===this.queryMetadata.type||"delete"===this.queryMetadata.type)&&this.queryMetadata.tables.length>0)try{let[e]=await Promise.all([r(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return e}catch(r){throw new sL(e,t,r)}if(!this.cacheConfig)try{return await r()}catch(r){throw new sL(e,t,r)}if("select"===this.queryMetadata.type){let n=await this.cache.get(this.cacheConfig.tag??await aK(e,t),this.queryMetadata.tables,void 0!==this.cacheConfig.tag,this.cacheConfig.autoInvalidate);if(void 0===n){let n;try{n=await r()}catch(r){throw new sL(e,t,r)}return await this.cache.put(this.cacheConfig.tag??await aK(e,t),n,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],void 0!==this.cacheConfig.tag,this.cacheConfig.config),n}return n}try{return await r()}catch(r){throw new sL(e,t,r)}}}class az{constructor(e){this.dialect=e}static [ry]="PgSession";execute(e,t){return rW("drizzle.operation",()=>rW("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){return Number((await this.execute(e,t))[0].count)}}class aJ extends aQ{constructor(e,t,r,n=0){super(e,t,r),this.schema=r,this.nestedIndex=n}static [ry]="PgTransaction";rollback(){throw new sM}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),"boolean"==typeof e.deferrable&&t.push(e.deferrable?"deferrable":"not deferrable"),nn.raw(t.join(" "))}setTransaction(e){return this.session.execute(nn`set transaction ${this.getTransactionConfigSQL(e)}`)}}class aG extends aW{constructor(e,t,r,n,i,s,a,o,l,c){super({sql:t,params:r},i,s,a),this.client=e,this.queryString=t,this.params=r,this.logger=n,this.fields=o,this._isResponseInArrayMode=l,this.customResultMapper=c}static [ry]="PostgresJsPreparedQuery";async execute(e={}){return rW("drizzle.execute",async t=>{let r=no(this.params,e);t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(r)}),this.logger.logQuery(this.queryString,r);let{fields:n,queryString:i,client:s,joinsNotNullableMap:a,customResultMapper:o}=this;if(!n&&!o)return rW("drizzle.driver.execute",()=>this.queryWithCache(i,r,async()=>await s.unsafe(i,r)));let l=await rW("drizzle.driver.execute",()=>(t?.setAttributes({"drizzle.query.text":i,"drizzle.query.params":JSON.stringify(r)}),this.queryWithCache(i,r,async()=>await s.unsafe(i,r).values())));return rW("drizzle.mapResponse",()=>o?o(l):l.map(e=>(function(e,t,r){let n={},i=e.reduce((e,{path:i,field:s},a)=>{let o;o=rb(s,rE)?s:rb(s,r9)?s.decoder:rb(s,rV)?s._.sql.decoder:s.sql.decoder;let l=e;for(let[e,c]of i.entries())if(e<i.length-1)c in l||(l[c]={}),l=l[c];else{let e=t[a],u=l[c]=null===e?null:o.mapFromDriverValue(e);if(r&&rb(s,rE)&&2===i.length){let e=i[0];e in n?"string"==typeof n[e]&&n[e]!==s.table[rT]&&(n[e]=!1):n[e]=null===u&&s.table[rT]}}return e},{});if(r&&Object.keys(n).length>0)for(let[e,t]of Object.entries(n))"string"!=typeof t||r[t]||(i[e]=null);return i})(n,e,a)))})}all(e={}){return rW("drizzle.execute",async t=>{let r=no(this.params,e);return t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(r)}),this.logger.logQuery(this.queryString,r),rW("drizzle.driver.execute",()=>(t?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(r)}),this.queryWithCache(this.queryString,r,async()=>this.client.unsafe(this.queryString,r))))})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class aX extends az{constructor(e,t,r,n={}){super(t),this.client=e,this.schema=r,this.options=n,this.logger=n.logger??new r_,this.cache=n.cache??new aV}static [ry]="PostgresJsSession";logger;cache;prepareQuery(e,t,r,n,i,s,a){return new aG(this.client,e.sql,e.params,this.logger,this.cache,s,a,t,n,i)}query(e,t){return this.logger.logQuery(e,t),this.client.unsafe(e,t).values()}queryObjects(e,t){return this.client.unsafe(e,t)}transaction(e,t){return this.client.begin(async r=>{let n=new aX(r,this.dialect,this.schema,this.options),i=new aY(this.dialect,n,this.schema);return t&&await i.setTransaction(t),e(i)})}}class aY extends aJ{constructor(e,t,r,n=0){super(e,t,r,n),this.session=t}static [ry]="PostgresJsTransaction";transaction(e){return this.session.client.savepoint(t=>{let r=new aX(t,this.dialect,this.schema,this.session.options);return e(new aY(this.dialect,r,this.schema))})}}class aZ extends aQ{static [ry]="PostgresJsDatabase"}function a0(e,t={}){let r,n,i=e=>e;for(let t of["1184","1082","1083","1114","1182","1185","1115","1231"])e.options.parsers[t]=i,e.options.serializers[t]=i;e.options.serializers["114"]=i,e.options.serializers["3802"]=i;let s=new ac({casing:t.casing});if(!0===t.logger?r=new rv:!1!==t.logger&&(r=t.logger),t.schema){let e=function(e,t){1===Object.keys(e).length&&"default"in e&&!rb(e.default,r3)&&(e=e.default);let r={},n={},i={};for(let[s,a]of Object.entries(e))if(rb(a,r3)){let e=r4(a),t=n[e];for(let n of(r[e]=s,i[s]={tsName:s,dbName:a[r3.Symbol.Name],schema:a[r3.Symbol.Schema],columns:a[r3.Symbol.Columns],relations:t?.relations??{},primaryKey:t?.primaryKey??[]},Object.values(a[r3.Symbol.Columns])))n.primary&&i[s].primaryKey.push(n);let o=a[r3.Symbol.ExtraConfigBuilder]?.(a[r3.Symbol.ExtraConfigColumns]);if(o)for(let e of Object.values(o))rb(e,sC)&&i[s].primaryKey.push(...e.columns)}else if(rb(a,ae)){let e,s=r4(a.table),o=r[s];for(let[r,l]of Object.entries(a.config(t(a.table))))if(o){let t=i[o];t.relations[r]=l,e&&t.primaryKey.push(...e)}else s in n||(n[s]={relations:{},primaryKey:e}),n[s].relations[r]=l}return{tables:i,tableNamesMap:r}}(t.schema,aa);n={fullSchema:t.schema,schema:e.tables,tableNamesMap:e.tableNamesMap}}let a=new aX(e,s,n,{logger:r,cache:t.cache}),o=new aZ(s,a,n);return o.$client=e,o.$cache=t.cache,o.$cache&&(o.$cache.invalidate=t.cache?.onMutate),o}function a1(...e){if("string"==typeof e[0])return a0(rf(e[0]),e[1]);if(function(e){if("object"!=typeof e||null===e||"Object"!==e.constructor.name)return!1;if("logger"in e){let t=typeof e.logger;return"boolean"===t||"object"===t&&"function"==typeof e.logger.logQuery||"undefined"===t}if("schema"in e){let t=typeof e.schema;return"object"===t||"undefined"===t}if("casing"in e){let t=typeof e.casing;return"string"===t||"undefined"===t}if("mode"in e)return"default"===e.mode&&"planetscale"===e.mode&&void 0===e.mode;if("connection"in e){let t=typeof e.connection;return"string"===t||"object"===t||"undefined"===t}if("client"in e){let t=typeof e.client;return"object"===t||"function"===t||"undefined"===t}return 0===Object.keys(e).length}(e[0])){let{connection:t,client:r,...n}=e[0];if(r)return a0(r,n);if("object"==typeof t&&void 0!==t.url){let{url:e,...r}=t;return a0(rf(e,r),n)}return a0(rf(t),n)}return a0(e[0],e[1])}(a1||(a1={})).mock=function(e){return a0({options:{parsers:{},serializers:{}}},e)};let a2=(fk="user_role",Array.isArray(fN=["USER","ADMIN","SUPER_ADMIN"])?d=Object.assign(e=>new rQ(e??"",d),{enumName:fk,enumValues:[...fN],schema:void 0,[rF]:!0}):(fy=void 0,h=Object.assign(e=>new rq(e??"",h),{enumName:fk,enumValues:Object.values(fN),schema:fy,[rF]:!0}))),a3=s_("user",{id:sr("id").primaryKey().defaultRandom(),name:i1("name"),email:i1("email").unique(),emailVerified:i7("emailVerified",{mode:"date"}),image:i1("image"),role:a2("role").default("USER").notNull(),createdAt:i7("created_at",{mode:"date"}).defaultNow().notNull(),updatedAt:i7("updated_at",{mode:"date"}).defaultNow().notNull()}),a4=s_("account",{userId:sr("userId").notNull().references(()=>a3.id,{onDelete:"cascade"}),type:i1("type").notNull(),provider:i1("provider").notNull(),providerAccountId:i1("providerAccountId").notNull(),refresh_token:i1("refresh_token"),access_token:i1("access_token"),expires_at:n7("expires_at"),token_type:i1("token_type"),scope:i1("scope"),id_token:i1("id_token"),session_state:i1("session_state")},e=>[sO({columns:[e.provider,e.providerAccountId]})]),a5=s_("session",{sessionToken:i1("sessionToken").primaryKey(),userId:sr("userId").notNull().references(()=>a3.id,{onDelete:"cascade"}),expires:i7("expires",{mode:"date"}).notNull()}),a8=s_("verificationToken",{identifier:i1("identifier").notNull(),token:i1("token").notNull(),expires:i7("expires",{mode:"date"}).notNull()},e=>[sO({columns:[e.identifier,e.token]})]),a6=s_("authenticator",{credentialID:i1("credentialID").notNull().unique(),userId:sr("userId").notNull().references(()=>a3.id,{onDelete:"cascade"}),providerAccountId:i1("providerAccountId").notNull(),credentialPublicKey:i1("credentialPublicKey").notNull(),counter:n7("counter").notNull(),credentialDeviceType:i1("credentialDeviceType").notNull(),credentialBackedUp:nU("credentialBackedUp").notNull(),transports:i1("transports")},e=>[sO({columns:[e.userId,e.credentialID]})]),a9={USER:"USER",ADMIN:"ADMIN",SUPER_ADMIN:"SUPER_ADMIN"};e.s(["UserRole",0,a9,"accounts",0,a4,"authenticators",0,a6,"sessions",0,a5,"userRoleEnum",0,a2,"users",0,a3,"verificationTokens",0,a8],94752);var a7=e.i(94752);let oe=a1(rf(process.env.DATABASE_URL),{schema:a7});class ot extends r9{constructor(e){super(ot.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=ot.buildCount(e.source,e.filters)}sql;static [ry]="MySqlCountBuilder";[Symbol.toStringTag]="MySqlCountBuilder";session;static buildEmbeddedCount(e,t){return nn`(select count(*) from ${e}${nn.raw(" where ").if(t)}${t})`}static buildCount(e,t){return nn`select count(*) as count from ${e}${nn.raw(" where ").if(t)}${t}`}then(e,t){return Promise.resolve(this.session.count(this.sql)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}}class or{constructor(e,t){this.name=e,this.value=t}static [ry]="MySqlCheckBuilder";brand;build(e){return new on(e,this)}}class on{constructor(e,t){this.table=e,this.name=t.name,this.value=t.value}static [ry]="MySqlCheck";name;value}class oi{static [ry]="MySqlForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(e,t){this.reference=()=>{let{name:t,columns:r,foreignColumns:n}=e();return{name:t,columns:r,foreignTable:n[0].table,foreignColumns:n}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new os(e,this)}}class os{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [ry]="MySqlForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:r}=this.reference(),n=t.map(e=>e.name),i=r.map(e=>e.name),s=[this.table[rT],...n,r[0].table[rT],...i];return e??`${s.join("_")}_fk`}}class oa{constructor(e,t){this.name=e,this.unique=t}static [ry]="MySqlIndexBuilderOn";on(...e){return new oo(this.name,e,this.unique)}}class oo{static [ry]="MySqlIndexBuilder";config;constructor(e,t,r){this.config={name:e,columns:t,unique:r}}using(e){return this.config.using=e,this}algorithm(e){return this.config.algorithm=e,this}lock(e){return this.config.lock=e,this}build(e){return new ol(this.config,e)}}class ol{static [ry]="MySqlIndex";config;constructor(e,t){this.config={...e,table:t}}}function oc(e,t){return`${e[rT]}_${t.join("_")}_unique`}class ou{constructor(e,t){this.name=t,this.columns=e}static [ry]="MySqlUniqueConstraintBuilder";columns;build(e){return new oh(e,this.columns,this.name)}}class od{static [ry]="MySqlUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new ou(e,this.name)}}class oh{constructor(e,t,r){this.table=e,this.columns=t,this.name=r??oc(this.table,this.columns.map(e=>e.name))}static [ry]="MySqlUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}class of extends rx{static [ry]="MySqlColumnBuilder";foreignKeyConfigs=[];references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,t){return this.config.generated={as:e,type:"always",mode:t?.mode??"virtual"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:r,actions:n})=>{let i;return i=new oi(()=>({columns:[e],foreignColumns:[r()]})),n.onUpdate&&i.onUpdate(n.onUpdate),n.onDelete&&i.onDelete(n.onDelete),i.build(t)})}}class op extends rE{constructor(e,t){t.uniqueName||(t.uniqueName=oc(e,[t.name])),super(e,t),this.table=e}static [ry]="MySqlColumn"}class og extends of{static [ry]="MySqlColumnBuilderWithAutoIncrement";constructor(e,t,r){super(e,t,r),this.config.autoIncrement=!1}autoincrement(){return this.config.autoIncrement=!0,this.config.hasDefault=!0,this}}class om extends op{static [ry]="MySqlColumnWithAutoIncrement";autoIncrement=this.config.autoIncrement}class oy extends og{static [ry]="MySqlBigInt53Builder";constructor(e,t=!1){super(e,"number","MySqlBigInt53"),this.config.unsigned=t}build(e){return new ob(e,this.config)}}class ob extends om{static [ry]="MySqlBigInt53";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}}class ow extends og{static [ry]="MySqlBigInt64Builder";constructor(e,t=!1){super(e,"bigint","MySqlBigInt64"),this.config.unsigned=t}build(e){return new ov(e,this.config)}}class ov extends om{static [ry]="MySqlBigInt64";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return BigInt(e)}}function o_(e,t){let{name:r,config:n}=nx(e,t);return"number"===n.mode?new oy(r,n.unsigned):new ow(r,n.unsigned)}class oS extends of{static [ry]="MySqlBinaryBuilder";constructor(e,t){super(e,"string","MySqlBinary"),this.config.length=t}build(e){return new oE(e,this.config)}}class oE extends op{static [ry]="MySqlBinary";length=this.config.length;mapFromDriverValue(e){if("string"==typeof e)return e;if(Buffer.isBuffer(e))return e.toString();let t=[];for(let r of e)t.push(49===r?"1":"0");return t.join("")}getSQLType(){return void 0===this.length?"binary":`binary(${this.length})`}}function ox(e,t={}){let{name:r,config:n}=nx(e,t);return new oS(r,n.length)}class oT extends of{static [ry]="MySqlBooleanBuilder";constructor(e){super(e,"boolean","MySqlBoolean")}build(e){return new oP(e,this.config)}}class oP extends op{static [ry]="MySqlBoolean";getSQLType(){return"boolean"}mapFromDriverValue(e){return"boolean"==typeof e?e:1===e}}function oA(e){return new oT(e??"")}class oO extends of{static [ry]="MySqlCharBuilder";constructor(e,t){super(e,"string","MySqlChar"),this.config.length=t.length,this.config.enum=t.enum}build(e){return new oC(e,this.config)}}class oC extends op{static [ry]="MySqlChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function oR(e,t={}){let{name:r,config:n}=nx(e,t);return new oO(r,n)}class ok extends of{static [ry]="MySqlCustomColumnBuilder";constructor(e,t,r){super(e,"custom","MySqlCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=r}build(e){return new oN(e,this.config)}}class oN extends op{static [ry]="MySqlCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function oI(e){return(t,r)=>{let{name:n,config:i}=nx(t,r);return new ok(n,i,e)}}class o$ extends of{static [ry]="MySqlDateBuilder";constructor(e){super(e,"date","MySqlDate")}build(e){return new oj(e,this.config)}}class oj extends op{static [ry]="MySqlDate";constructor(e,t){super(e,t)}getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}}class oD extends of{static [ry]="MySqlDateStringBuilder";constructor(e){super(e,"string","MySqlDateString")}build(e){return new oL(e,this.config)}}class oL extends op{static [ry]="MySqlDateString";constructor(e,t){super(e,t)}getSQLType(){return"date"}}function oM(e,t){let{name:r,config:n}=nx(e,t);return n?.mode==="string"?new oD(r):new o$(r)}class oU extends of{static [ry]="MySqlDateTimeBuilder";constructor(e,t){super(e,"date","MySqlDateTime"),this.config.fsp=t?.fsp}build(e){return new oq(e,this.config)}}class oq extends op{static [ry]="MySqlDateTime";fsp;constructor(e,t){super(e,t),this.fsp=t.fsp}getSQLType(){let e=void 0===this.fsp?"":`(${this.fsp})`;return`datetime${e}`}mapToDriverValue(e){return e.toISOString().replace("T"," ").replace("Z","")}mapFromDriverValue(e){return new Date(e.replace(" ","T")+"Z")}}class oB extends of{static [ry]="MySqlDateTimeStringBuilder";constructor(e,t){super(e,"string","MySqlDateTimeString"),this.config.fsp=t?.fsp}build(e){return new oF(e,this.config)}}class oF extends op{static [ry]="MySqlDateTimeString";fsp;constructor(e,t){super(e,t),this.fsp=t.fsp}getSQLType(){let e=void 0===this.fsp?"":`(${this.fsp})`;return`datetime${e}`}}function oQ(e,t){let{name:r,config:n}=nx(e,t);return n?.mode==="string"?new oB(r,n):new oU(r,n)}class oH extends og{static [ry]="MySqlDecimalBuilder";constructor(e,t){super(e,"string","MySqlDecimal"),this.config.precision=t?.precision,this.config.scale=t?.scale,this.config.unsigned=t?.unsigned}build(e){return new oV(e,this.config)}}class oV extends om{static [ry]="MySqlDecimal";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;mapFromDriverValue(e){return"string"==typeof e?e:String(e)}getSQLType(){let e="";return void 0!==this.precision&&void 0!==this.scale?e+=`decimal(${this.precision},${this.scale})`:void 0===this.precision?e+="decimal":e+=`decimal(${this.precision})`,e="decimal(10,0)"===e||"decimal(10)"===e?"decimal":e,this.unsigned?`${e} unsigned`:e}}class oK extends og{static [ry]="MySqlDecimalNumberBuilder";constructor(e,t){super(e,"number","MySqlDecimalNumber"),this.config.precision=t?.precision,this.config.scale=t?.scale,this.config.unsigned=t?.unsigned}build(e){return new oW(e,this.config)}}class oW extends om{static [ry]="MySqlDecimalNumber";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}mapToDriverValue=String;getSQLType(){let e="";return void 0!==this.precision&&void 0!==this.scale?e+=`decimal(${this.precision},${this.scale})`:void 0===this.precision?e+="decimal":e+=`decimal(${this.precision})`,e="decimal(10,0)"===e||"decimal(10)"===e?"decimal":e,this.unsigned?`${e} unsigned`:e}}class oz extends og{static [ry]="MySqlDecimalBigIntBuilder";constructor(e,t){super(e,"bigint","MySqlDecimalBigInt"),this.config.precision=t?.precision,this.config.scale=t?.scale,this.config.unsigned=t?.unsigned}build(e){return new oJ(e,this.config)}}class oJ extends om{static [ry]="MySqlDecimalBigInt";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){let e="";return void 0!==this.precision&&void 0!==this.scale?e+=`decimal(${this.precision},${this.scale})`:void 0===this.precision?e+="decimal":e+=`decimal(${this.precision})`,e="decimal(10,0)"===e||"decimal(10)"===e?"decimal":e,this.unsigned?`${e} unsigned`:e}}function oG(e,t={}){let{name:r,config:n}=nx(e,t),i=n?.mode;return"number"===i?new oK(r,n):"bigint"===i?new oz(r,n):new oH(r,n)}class oX extends og{static [ry]="MySqlDoubleBuilder";constructor(e,t){super(e,"number","MySqlDouble"),this.config.precision=t?.precision,this.config.scale=t?.scale,this.config.unsigned=t?.unsigned}build(e){return new oY(e,this.config)}}class oY extends om{static [ry]="MySqlDouble";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let e="";return void 0!==this.precision&&void 0!==this.scale?e+=`double(${this.precision},${this.scale})`:void 0===this.precision?e+="double":e+=`double(${this.precision})`,this.unsigned?`${e} unsigned`:e}}function oZ(e,t){let{name:r,config:n}=nx(e,t);return new oX(r,n)}class o0 extends of{static [ry]="MySqlEnumColumnBuilder";constructor(e,t){super(e,"string","MySqlEnumColumn"),this.config.enumValues=t}build(e){return new o1(e,this.config)}}class o1 extends op{static [ry]="MySqlEnumColumn";enumValues=this.config.enumValues;getSQLType(){return`enum(${this.enumValues.map(e=>`'${e}'`).join(",")})`}}class o2 extends of{static [ry]="MySqlEnumObjectColumnBuilder";constructor(e,t){super(e,"string","MySqlEnumObjectColumn"),this.config.enumValues=t}build(e){return new o3(e,this.config)}}class o3 extends op{static [ry]="MySqlEnumObjectColumn";enumValues=this.config.enumValues;getSQLType(){return`enum(${this.enumValues.map(e=>`'${e}'`).join(",")})`}}function o4(e,t){if("string"==typeof e&&Array.isArray(t)||Array.isArray(e)){let r="string"==typeof e&&e.length>0?e:"",n=("string"==typeof e?t:e)??[];if(0===n.length)throw Error(`You have an empty array for "${r}" enum values`);return new o0(r,n)}if("string"==typeof e&&"object"==typeof t||"object"==typeof e){let r="object"==typeof e?"":e,n="object"==typeof e?Object.values(e):"object"==typeof t?Object.values(t):[];if(0===n.length)throw Error(`You have an empty array for "${r}" enum values`);return new o2(r,n)}}class o5 extends og{static [ry]="MySqlFloatBuilder";constructor(e,t){super(e,"number","MySqlFloat"),this.config.precision=t?.precision,this.config.scale=t?.scale,this.config.unsigned=t?.unsigned}build(e){return new o8(e,this.config)}}class o8 extends om{static [ry]="MySqlFloat";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let e="";return void 0!==this.precision&&void 0!==this.scale?e+=`float(${this.precision},${this.scale})`:void 0===this.precision?e+="float":e+=`float(${this.precision})`,this.unsigned?`${e} unsigned`:e}}function o6(e,t){let{name:r,config:n}=nx(e,t);return new o5(r,n)}class o9 extends og{static [ry]="MySqlIntBuilder";constructor(e,t){super(e,"number","MySqlInt"),this.config.unsigned=!!t&&t.unsigned}build(e){return new o7(e,this.config)}}class o7 extends om{static [ry]="MySqlInt";getSQLType(){return`int${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function le(e,t){let{name:r,config:n}=nx(e,t);return new o9(r,n)}class lt extends of{static [ry]="MySqlJsonBuilder";constructor(e){super(e,"json","MySqlJson")}build(e){return new lr(e,this.config)}}class lr extends op{static [ry]="MySqlJson";getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}}function ln(e){return new lt(e??"")}class li extends og{static [ry]="MySqlMediumIntBuilder";constructor(e,t){super(e,"number","MySqlMediumInt"),this.config.unsigned=!!t&&t.unsigned}build(e){return new ls(e,this.config)}}class ls extends om{static [ry]="MySqlMediumInt";getSQLType(){return`mediumint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function la(e,t){let{name:r,config:n}=nx(e,t);return new li(r,n)}class lo extends og{static [ry]="MySqlRealBuilder";constructor(e,t){super(e,"number","MySqlReal"),this.config.precision=t?.precision,this.config.scale=t?.scale}build(e){return new ll(e,this.config)}}class ll extends om{static [ry]="MySqlReal";precision=this.config.precision;scale=this.config.scale;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`real(${this.precision}, ${this.scale})`:void 0===this.precision?"real":`real(${this.precision})`}}function lc(e,t={}){let{name:r,config:n}=nx(e,t);return new lo(r,n)}class lu extends og{static [ry]="MySqlSerialBuilder";constructor(e){super(e,"number","MySqlSerial"),this.config.hasDefault=!0,this.config.autoIncrement=!0}build(e){return new ld(e,this.config)}}class ld extends om{static [ry]="MySqlSerial";getSQLType(){return"serial"}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function lh(e){return new lu(e??"")}class lf extends og{static [ry]="MySqlSmallIntBuilder";constructor(e,t){super(e,"number","MySqlSmallInt"),this.config.unsigned=!!t&&t.unsigned}build(e){return new lp(e,this.config)}}class lp extends om{static [ry]="MySqlSmallInt";getSQLType(){return`smallint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function lg(e,t){let{name:r,config:n}=nx(e,t);return new lf(r,n)}class lm extends of{static [ry]="MySqlTextBuilder";constructor(e,t,r){super(e,"string","MySqlText"),this.config.textType=t,this.config.enumValues=r.enum}build(e){return new ly(e,this.config)}}class ly extends op{static [ry]="MySqlText";textType=this.config.textType;enumValues=this.config.enumValues;getSQLType(){return this.textType}}function lb(e,t={}){let{name:r,config:n}=nx(e,t);return new lm(r,"text",n)}function lw(e,t={}){let{name:r,config:n}=nx(e,t);return new lm(r,"tinytext",n)}function lv(e,t={}){let{name:r,config:n}=nx(e,t);return new lm(r,"mediumtext",n)}function l_(e,t={}){let{name:r,config:n}=nx(e,t);return new lm(r,"longtext",n)}class lS extends of{static [ry]="MySqlTimeBuilder";constructor(e,t){super(e,"string","MySqlTime"),this.config.fsp=t?.fsp}build(e){return new lE(e,this.config)}}class lE extends op{static [ry]="MySqlTime";fsp=this.config.fsp;getSQLType(){let e=void 0===this.fsp?"":`(${this.fsp})`;return`time${e}`}}function lx(e,t){let{name:r,config:n}=nx(e,t);return new lS(r,n)}class lT extends of{static [ry]="MySqlDateColumnBuilder";defaultNow(){return this.default(nn`(now())`)}onUpdateNow(){return this.config.hasOnUpdateNow=!0,this.config.hasDefault=!0,this}}class lP extends op{static [ry]="MySqlDateColumn";hasOnUpdateNow=this.config.hasOnUpdateNow}class lA extends lT{static [ry]="MySqlTimestampBuilder";constructor(e,t){super(e,"date","MySqlTimestamp"),this.config.fsp=t?.fsp}build(e){return new lO(e,this.config)}}class lO extends lP{static [ry]="MySqlTimestamp";fsp=this.config.fsp;getSQLType(){let e=void 0===this.fsp?"":`(${this.fsp})`;return`timestamp${e}`}mapFromDriverValue(e){return new Date(e+"+0000")}mapToDriverValue(e){return e.toISOString().slice(0,-1).replace("T"," ")}}class lC extends lT{static [ry]="MySqlTimestampStringBuilder";constructor(e,t){super(e,"string","MySqlTimestampString"),this.config.fsp=t?.fsp}build(e){return new lR(e,this.config)}}class lR extends lP{static [ry]="MySqlTimestampString";fsp=this.config.fsp;getSQLType(){let e=void 0===this.fsp?"":`(${this.fsp})`;return`timestamp${e}`}}function lk(e,t={}){let{name:r,config:n}=nx(e,t);return n?.mode==="string"?new lC(r,n):new lA(r,n)}class lN extends og{static [ry]="MySqlTinyIntBuilder";constructor(e,t){super(e,"number","MySqlTinyInt"),this.config.unsigned=!!t&&t.unsigned}build(e){return new lI(e,this.config)}}class lI extends om{static [ry]="MySqlTinyInt";getSQLType(){return`tinyint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(e){return"string"==typeof e?Number(e):e}}function l$(e,t){let{name:r,config:n}=nx(e,t);return new lN(r,n)}class lj extends of{static [ry]="MySqlVarBinaryBuilder";constructor(e,t){super(e,"string","MySqlVarBinary"),this.config.length=t?.length}build(e){return new lD(e,this.config)}}class lD extends op{static [ry]="MySqlVarBinary";length=this.config.length;mapFromDriverValue(e){if("string"==typeof e)return e;if(Buffer.isBuffer(e))return e.toString();let t=[];for(let r of e)t.push(49===r?"1":"0");return t.join("")}getSQLType(){return void 0===this.length?"varbinary":`varbinary(${this.length})`}}function lL(e,t){let{name:r,config:n}=nx(e,t);return new lj(r,n)}class lM extends of{static [ry]="MySqlVarCharBuilder";constructor(e,t){super(e,"string","MySqlVarChar"),this.config.length=t.length,this.config.enum=t.enum}build(e){return new lU(e,this.config)}}class lU extends op{static [ry]="MySqlVarChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function lq(e,t){let{name:r,config:n}=nx(e,t);return new lM(r,n)}class lB extends of{static [ry]="MySqlYearBuilder";constructor(e){super(e,"number","MySqlYear")}build(e){return new lF(e,this.config)}}class lF extends op{static [ry]="MySqlYear";getSQLType(){return"year"}}function lQ(e){return new lB(e??"")}let lH=Symbol.for("drizzle:MySqlInlineForeignKeys");class lV extends r3{static [ry]="MySqlTable";static Symbol=Object.assign({},r3.Symbol,{InlineForeignKeys:lH});[r3.Symbol.Columns];[lH]=[];[r3.Symbol.ExtraConfigBuilder]=void 0}let lK=(e,t,r)=>(function(e,t,r,n,i=e){let s=new lV(e,n,i),a=Object.fromEntries(Object.entries("function"==typeof t?t({bigint:o_,binary:ox,boolean:oA,char:oR,customType:oI,date:oM,datetime:oQ,decimal:oG,double:oZ,mysqlEnum:o4,float:o6,int:le,json:ln,mediumint:la,real:lc,serial:lh,smallint:lg,text:lb,time:lx,timestamp:lk,tinyint:l$,varbinary:lL,varchar:lq,year:lQ,longtext:l_,mediumtext:lv,tinytext:lw}):t).map(([e,t])=>{t.setName(e);let r=t.build(s);return s[lH].push(...t.buildForeignKeys(r,s)),[e,r]})),o=Object.assign(s,a);return o[r3.Symbol.Columns]=a,o[r3.Symbol.ExtraConfigColumns]=a,r&&(o[lV.Symbol.ExtraConfigBuilder]=r),o})(e,t,r,void 0,e);function lW(...e){return e[0].columns?new lz(e[0].columns,e[0].name):new lz(e)}class lz{static [ry]="MySqlPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new lJ(e,this.columns,this.name)}}class lJ{constructor(e,t,r){this.table=e,this.columns=t,this.name=r}static [ry]="MySqlPrimaryKey";columns;name;getName(){return this.name??`${this.table[lV.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}function lG(e){return rb(e,lV)?[`${e[r3.Symbol.BaseName]}`]:rb(e,rV)?e._.usedTables??[]:rb(e,r9)?e.usedTables??[]:[]}function lX(e){return e.map(e=>"object"==typeof e?e.config.name:e)}function lY(e){return Array.isArray(e)?e:[e]}Symbol.for("drizzle:MySqlViewConfig");class lZ extends rS{constructor(e,t,r,n){super(),this.table=e,this.session=t,this.dialect=r,this.config={table:e,withList:n}}static [ry]="MySqlDelete";config;where(e){return this.config.where=e,this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.table[r3.Symbol.Columns],new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.orderBy=r}else this.config.orderBy=e;return this}limit(e){return this.config.limit=e,this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,void 0,void 0,void 0,{type:"delete",tables:lG(this.config.table)})}execute=e=>this.prepare().execute(e);createIterator=()=>{let e=this;return async function*(t){yield*e.prepare().iterator(t)}};iterator=this.createIterator();$dynamic(){return this}}class l0 extends nc{static [ry]="MySqlViewBase"}class l1{static [ry]="MySqlDialect";casing;constructor(e){this.casing=new sj(e?.casing)}async migrate(e,t,r){let n=r.migrationsTable??"__drizzle_migrations",i=nn`
			create table if not exists ${nn.identifier(n)} (
				id serial primary key,
				hash text not null,
				created_at bigint
			)
		`;await t.execute(i);let s=(await t.all(nn`select id, hash, created_at from ${nn.identifier(n)} order by created_at desc limit 1`))[0];await t.transaction(async t=>{for(let r of e)if(!s||Number(s.created_at)<r.folderMillis){for(let e of r.sql)await t.execute(nn.raw(e));await t.execute(nn`insert into ${nn.identifier(n)} (\`hash\`, \`created_at\`) values(${r.hash}, ${r.folderMillis})`)}})}escapeName(e){return`\`${e}\``}escapeParam(e){return"?"}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[nn`with `];for(let[r,n]of e.entries())t.push(nn`${nn.identifier(n._.alias)} as (${n._.sql})`),r<e.length-1&&t.push(nn`, `);return t.push(nn` `),nn.join(t)}buildDeleteQuery({table:e,where:t,returning:r,withList:n,limit:i,orderBy:s}){let a=this.buildWithCTE(n),o=r?nn` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0,l=t?nn` where ${t}`:void 0,c=this.buildOrderBy(s),u=this.buildLimit(i);return nn`${a}delete from ${e}${l}${c}${u}${o}`}buildUpdateSet(e,t){let r=e[r3.Symbol.Columns],n=Object.keys(r).filter(e=>void 0!==t[e]||r[e]?.onUpdateFn!==void 0),i=n.length;return nn.join(n.flatMap((e,n)=>{let s=r[e],a=s.onUpdateFn?.(),o=t[e]??(rb(a,r9)?a:nn.param(a,s)),l=nn`${nn.identifier(this.casing.getColumnCasing(s))} = ${o}`;return n<i-1?[l,nn.raw(", ")]:[l]}))}buildUpdateQuery({table:e,set:t,where:r,returning:n,withList:i,limit:s,orderBy:a}){let o=this.buildWithCTE(i),l=this.buildUpdateSet(e,t),c=n?nn` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,u=r?nn` where ${r}`:void 0,d=this.buildOrderBy(a),h=this.buildLimit(s);return nn`${o}update ${e} set ${l}${u}${d}${h}${c}`}buildSelection(e,{isSingleTable:t=!1}={}){let r=e.length,n=e.flatMap(({field:e},n)=>{let i=[];if(rb(e,r9.Aliased)&&e.isSelectionField)i.push(nn.identifier(e.fieldAlias));else if(rb(e,r9.Aliased)||rb(e,r9)){let r=rb(e,r9.Aliased)?e.sql:e;t?i.push(new r9(r.queryChunks.map(e=>rb(e,op)?nn.identifier(this.casing.getColumnCasing(e)):e))):i.push(r),rb(e,r9.Aliased)&&i.push(nn` as ${nn.identifier(e.fieldAlias)}`)}else if(rb(e,rE))t?i.push(nn.identifier(this.casing.getColumnCasing(e))):i.push(e);else if(rb(e,rV)){let t=Object.entries(e._.selectedFields);if(1===t.length){let r=t[0][1],n=rb(r,r9)?r.decoder:rb(r,rE)?{mapFromDriverValue:e=>r.mapFromDriverValue(e)}:r.sql.decoder;n&&(e._.sql.decoder=n)}i.push(e)}return n<r-1&&i.push(nn`, `),i});return nn.join(n)}buildLimit(e){return"object"==typeof e||"number"==typeof e&&e>=0?nn` limit ${e}`:void 0}buildOrderBy(e){return e&&e.length>0?nn` order by ${nn.join(e,nn`, `)}`:void 0}buildIndex({indexes:e,indexFor:t}){return e&&e.length>0?nn` ${nn.raw(t)} INDEX (${nn.raw(e.join(", "))})`:void 0}buildSelectQuery({withList:e,fields:t,fieldsFlat:r,where:n,having:i,table:s,joins:a,orderBy:o,groupBy:l,limit:c,offset:u,lockingClause:d,distinct:h,setOperators:f,useIndex:p,forceIndex:g,ignoreIndex:m}){let y,b=r??nb(t);for(let e of b){let t;if(rb(e.field,rE)&&e.field.table[rT]!==(rb(s,rV)?s._.alias:rb(s,l0)?s[rz].name:rb(s,r9)?void 0:s[rT])&&(t=e.field.table,!a?.some(({alias:e})=>e===(t[r3.Symbol.IsAlias]?t[rT]:t[r3.Symbol.BaseName])))){let t=e.field.table[rT];throw Error(`Your "${e.path.join("->")}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}}let w=!a||0===a.length,v=this.buildWithCTE(e),_=h?nn` distinct`:void 0,S=this.buildSelection(b,{isSingleTable:w}),E=rb(s,r3)&&s[r3.Symbol.IsAlias]?nn`${nn`${nn.identifier(s[r3.Symbol.Schema]??"")}.`.if(s[r3.Symbol.Schema])}${nn.identifier(s[r3.Symbol.OriginalName])} ${nn.identifier(s[r3.Symbol.Name])}`:s,x=[];if(a)for(let[e,t]of a.entries()){0===e&&x.push(nn` `);let r=t.table,n=t.lateral?nn` lateral`:void 0,i=t.on?nn` on ${t.on}`:void 0;if(rb(r,lV)){let e=r[lV.Symbol.Name],s=r[lV.Symbol.Schema],a=r[lV.Symbol.OriginalName],o=e===a?void 0:t.alias,l=this.buildIndex({indexes:t.useIndex,indexFor:"USE"}),c=this.buildIndex({indexes:t.forceIndex,indexFor:"FORCE"}),u=this.buildIndex({indexes:t.ignoreIndex,indexFor:"IGNORE"});x.push(nn`${nn.raw(t.joinType)} join${n} ${s?nn`${nn.identifier(s)}.`:void 0}${nn.identifier(a)}${l}${c}${u}${o&&nn` ${nn.identifier(o)}`}${i}`)}else if(rb(r,nc)){let e=r[rz].name,s=r[rz].schema,a=r[rz].originalName,o=e===a?void 0:t.alias;x.push(nn`${nn.raw(t.joinType)} join${n} ${s?nn`${nn.identifier(s)}.`:void 0}${nn.identifier(a)}${o&&nn` ${nn.identifier(o)}`}${i}`)}else x.push(nn`${nn.raw(t.joinType)} join${n} ${r}${i}`);e<a.length-1&&x.push(nn` `)}let T=nn.join(x),P=n?nn` where ${n}`:void 0,A=i?nn` having ${i}`:void 0,O=this.buildOrderBy(o),C=l&&l.length>0?nn` group by ${nn.join(l,nn`, `)}`:void 0,R=this.buildLimit(c),k=u?nn` offset ${u}`:void 0,N=this.buildIndex({indexes:p,indexFor:"USE"}),I=this.buildIndex({indexes:g,indexFor:"FORCE"}),$=this.buildIndex({indexes:m,indexFor:"IGNORE"});if(d){let{config:e,strength:t}=d;y=nn` for ${nn.raw(t)}`,e.noWait?y.append(nn` nowait`):e.skipLocked&&y.append(nn` skip locked`)}let j=nn`${v}select${_} ${S} from ${E}${N}${I}${$}${T}${P}${C}${A}${O}${R}${k}${y}`;return f.length>0?this.buildSetOperations(j,f):j}buildSetOperations(e,t){let[r,...n]=t;if(!r)throw Error("Cannot pass undefined values to any set operator");return 0===n.length?this.buildSetOperationQuery({leftSelect:e,setOperator:r}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:r}),n)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:r,rightSelect:n,limit:i,orderBy:s,offset:a}}){let o,l=nn`(${e.getSQL()}) `,c=nn`(${n.getSQL()})`;if(s&&s.length>0){let e=[];for(let t of s)if(rb(t,op))e.push(nn.identifier(this.casing.getColumnCasing(t)));else if(rb(t,r9)){for(let e=0;e<t.queryChunks.length;e++){let r=t.queryChunks[e];rb(r,op)&&(t.queryChunks[e]=nn.identifier(this.casing.getColumnCasing(r)))}e.push(nn`${t}`)}else e.push(nn`${t}`);o=nn` order by ${nn.join(e,nn`, `)} `}let u="object"==typeof i||"number"==typeof i&&i>=0?nn` limit ${i}`:void 0,d=nn.raw(`${t} ${r?"all ":""}`),h=a?nn` offset ${a}`:void 0;return nn`${l}${d}${c}${o}${u}${h}`}buildInsertQuery({table:e,values:t,ignore:r,onConflict:n,select:i}){let s=[],a=Object.entries(e[r3.Symbol.Columns]).filter(([e,t])=>!t.shouldDisableInsert()),o=a.map(([,e])=>nn.identifier(this.casing.getColumnCasing(e))),l=[];if(i)rb(t,r9)?s.push(t):s.push(t.getSQL());else for(let[e,r]of(s.push(nn.raw("values ")),t.entries())){let n={},i=[];for(let[e,t]of a){let s=r[e];if(void 0===s||rb(s,nr)&&void 0===s.value)if(void 0!==t.defaultFn){let r=t.defaultFn();n[e]=r;let s=rb(r,r9)?r:nn.param(r,t);i.push(s)}else if(t.default||void 0===t.onUpdateFn)i.push(nn`default`);else{let e=t.onUpdateFn(),r=rb(e,r9)?e:nn.param(e,t);i.push(r)}else t.defaultFn&&rb(s,nr)&&(n[e]=s.value),i.push(s)}l.push(n),s.push(i),e<t.length-1&&s.push(nn`, `)}let c=nn.join(s),u=r?nn` ignore`:void 0,d=n?nn` on duplicate key ${n}`:void 0;return{sql:nn`insert${u} into ${e} ${o} ${c}${d}`,generatedIds:l}}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:t})}buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:r,table:n,tableConfig:i,queryConfig:s,tableAlias:a,nestedQueryRelation:o,joinOn:l}){let c,u,d,h,f,p=[],g=[];if(!0===s)p=Object.entries(i.columns).map(([e,t])=>({dbKey:t.name,tsKey:e,field:np(t,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let n=Object.fromEntries(Object.entries(i.columns).map(([e,t])=>[e,np(t,a)]));if(s.where){let e="function"==typeof s.where?s.where(n,an()):s.where;h=e&&nm(e,a)}let o=[],l=[];if(s.columns){let e=!1;for(let[t,r]of Object.entries(s.columns))void 0!==r&&t in i.columns&&(e||!0!==r||(e=!0),l.push(t));l.length>0&&(l=e?l.filter(e=>s.columns?.[e]===!0):Object.keys(i.columns).filter(e=>!l.includes(e)))}else l=Object.keys(i.columns);for(let e of l){let t=i.columns[e];o.push({tsKey:e,value:t})}let f=[];if(s.with&&(f=Object.entries(s.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:i.relations[e]}))),s.extras)for(let[e,t]of Object.entries("function"==typeof s.extras?s.extras(n,{sql:nn}):s.extras))o.push({tsKey:e,value:ng(t,a)});for(let{tsKey:e,value:t}of o)p.push({dbKey:rb(t,r9.Aliased)?t.fieldAlias:i.columns[e].name,tsKey:e,field:rb(t,rE)?np(t,a):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let m="function"==typeof s.orderBy?s.orderBy(n,ai()):s.orderBy??[];for(let{tsKey:n,queryConfig:i,relation:o}of(Array.isArray(m)||(m=[m]),d=m.map(e=>rb(e,rE)?np(e,a):nm(e,a)),c=s.limit,u=s.offset,f)){let s=as(t,r,o),l=r[r4(o.referencedTable)],c=`${a}_${n}`,u=sF(...s.fields.map((e,t)=>sq(np(s.references[t],c),np(e,a)))),d=this.buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:r,table:e[l],tableConfig:t[l],queryConfig:rb(o,at)?!0===i?{limit:1}:{...i,limit:1}:i,tableAlias:c,joinOn:u,nestedQueryRelation:o}),h=nn`${nn.identifier(c)}.${nn.identifier("data")}`.as(n);g.push({on:nn`true`,table:new rV(d.sql,{},c),alias:c,joinType:"left",lateral:!0}),p.push({dbKey:n,tsKey:n,field:h,relationTableTsKey:l,isJson:!0,selection:d.selection})}}if(0===p.length)throw new sD({message:`No fields selected for table "${i.tsName}" ("${a}")`});if(h=sF(l,h),o){let e=nn`json_array(${nn.join(p.map(({field:e,tsKey:t,isJson:r})=>r?nn`${nn.identifier(`${a}_${t}`)}.${nn.identifier("data")}`:rb(e,r9.Aliased)?e.sql:e),nn`, `)})`;rb(o,ar)&&(e=nn`coalesce(json_arrayagg(${e}), json_array())`);let t=[{dbKey:"data",tsKey:"data",field:e.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:p}];void 0!==c||void 0!==u||(d?.length??0)>0?(f=this.buildSelectQuery({table:nf(n,a),fields:{},fieldsFlat:[{path:[],field:nn.raw("*")},...(d?.length??0)>0?[{path:[],field:nn`row_number() over (order by ${nn.join(d,nn`, `)})`}]:[]],where:h,limit:c,offset:u,setOperators:[]}),h=void 0,c=void 0,u=void 0,d=void 0):f=nf(n,a),f=this.buildSelectQuery({table:rb(f,lV)?f:new rV(f,{},a),fields:{},fieldsFlat:t.map(({field:e})=>({path:[],field:rb(e,rE)?np(e,a):e})),joins:g,where:h,limit:c,offset:u,orderBy:d,setOperators:[]})}else f=this.buildSelectQuery({table:nf(n,a),fields:{},fieldsFlat:p.map(({field:e})=>({path:[],field:rb(e,rE)?np(e,a):e})),joins:g,where:h,limit:c,offset:u,orderBy:d,setOperators:[]});return{tableTsKey:i.tsName,sql:f,selection:p}}buildRelationalQueryWithoutLateralSubqueries({fullSchema:e,schema:t,tableNamesMap:r,table:n,tableConfig:i,queryConfig:s,tableAlias:a,nestedQueryRelation:o,joinOn:l}){let c,u=[],d,h,f=[],p;if(!0===s)u=Object.entries(i.columns).map(([e,t])=>({dbKey:t.name,tsKey:e,field:np(t,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let n=Object.fromEntries(Object.entries(i.columns).map(([e,t])=>[e,np(t,a)]));if(s.where){let e="function"==typeof s.where?s.where(n,an()):s.where;p=e&&nm(e,a)}let o=[],l=[];if(s.columns){let e=!1;for(let[t,r]of Object.entries(s.columns))void 0!==r&&t in i.columns&&(e||!0!==r||(e=!0),l.push(t));l.length>0&&(l=e?l.filter(e=>s.columns?.[e]===!0):Object.keys(i.columns).filter(e=>!l.includes(e)))}else l=Object.keys(i.columns);for(let e of l){let t=i.columns[e];o.push({tsKey:e,value:t})}let c=[];if(s.with&&(c=Object.entries(s.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:i.relations[e]}))),s.extras)for(let[e,t]of Object.entries("function"==typeof s.extras?s.extras(n,{sql:nn}):s.extras))o.push({tsKey:e,value:ng(t,a)});for(let{tsKey:e,value:t}of o)u.push({dbKey:rb(t,r9.Aliased)?t.fieldAlias:i.columns[e].name,tsKey:e,field:rb(t,rE)?np(t,a):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let g="function"==typeof s.orderBy?s.orderBy(n,ai()):s.orderBy??[];for(let{tsKey:n,queryConfig:i,relation:o}of(Array.isArray(g)||(g=[g]),f=g.map(e=>rb(e,rE)?np(e,a):nm(e,a)),d=s.limit,h=s.offset,c)){let s=as(t,r,o),l=r[r4(o.referencedTable)],c=`${a}_${n}`,d=sF(...s.fields.map((e,t)=>sq(np(s.references[t],c),np(e,a)))),h=this.buildRelationalQueryWithoutLateralSubqueries({fullSchema:e,schema:t,tableNamesMap:r,table:e[l],tableConfig:t[l],queryConfig:rb(o,at)?!0===i?{limit:1}:{...i,limit:1}:i,tableAlias:c,joinOn:d,nestedQueryRelation:o}),f=nn`(${h.sql})`;rb(o,ar)&&(f=nn`coalesce(${f}, json_array())`);let p=f.as(n);u.push({dbKey:n,tsKey:n,field:p,relationTableTsKey:l,isJson:!0,selection:h.selection})}}if(0===u.length)throw new sD({message:`No fields selected for table "${i.tsName}" ("${a}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(p=sF(l,p),o){let e=nn`json_array(${nn.join(u.map(({field:e})=>rb(e,op)?nn.identifier(this.casing.getColumnCasing(e)):rb(e,r9.Aliased)?e.sql:e),nn`, `)})`;rb(o,ar)&&(e=nn`json_arrayagg(${e})`);let t=[{dbKey:"data",tsKey:"data",field:e,isJson:!0,relationTableTsKey:i.tsName,selection:u}];void 0!==d||void 0!==h||f.length>0?(c=this.buildSelectQuery({table:nf(n,a),fields:{},fieldsFlat:[{path:[],field:nn.raw("*")},...f.length>0?[{path:[],field:nn`row_number() over (order by ${nn.join(f,nn`, `)})`}]:[]],where:p,limit:d,offset:h,setOperators:[]}),p=void 0,d=void 0,h=void 0,f=void 0):c=nf(n,a),c=this.buildSelectQuery({table:rb(c,lV)?c:new rV(c,{},a),fields:{},fieldsFlat:t.map(({field:e})=>({path:[],field:rb(e,rE)?np(e,a):e})),where:p,limit:d,offset:h,orderBy:f,setOperators:[]})}else c=this.buildSelectQuery({table:nf(n,a),fields:{},fieldsFlat:u.map(({field:e})=>({path:[],field:rb(e,rE)?np(e,a):e})),where:p,limit:d,offset:h,orderBy:f,setOperators:[]});return{tableTsKey:i.tsName,sql:c,selection:u}}}class l2{static [ry]="MySqlSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}from(e,t){let r,n=!!this.fields;r=this.fields?this.fields:rb(e,rV)?Object.fromEntries(Object.keys(e._.selectedFields).map(t=>[t,e[t]])):rb(e,l0)?e[rz].selectedFields:rb(e,r9)?{}:nS(e);let i=[],s=[],a=[];return rb(e,lV)&&t&&"string"!=typeof t&&(t.useIndex&&(i=lX(lY(t.useIndex))),t.forceIndex&&(s=lX(lY(t.forceIndex))),t.ignoreIndex&&(a=lX(lY(t.ignoreIndex)))),new l4({table:e,fields:r,isPartialSelect:n,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct,useIndex:i,forceIndex:s,ignoreIndex:a})}}class l3 extends au{static [ry]="MySqlSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:t,isPartialSelect:r,session:n,dialect:i,withList:s,distinct:a,useIndex:o,forceIndex:l,ignoreIndex:c}){for(const u of(super(),this.config={withList:s,table:e,fields:{...t},distinct:a,setOperators:[],useIndex:o,forceIndex:l,ignoreIndex:c},this.isPartialSelect=r,this.session=n,this.dialect=i,this._={selectedFields:t,config:this.config},this.tableName=nE(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},lG(e)))this.usedTables.add(u)}getUsedTables(){return[...this.usedTables]}createJoin(e,t){return(r,n,i)=>{let s="cross"===e,a=s?void 0:n,o=s?n:i,l=this.tableName,c=nE(r);for(let e of lG(r))this.usedTables.add(e);if("string"==typeof c&&this.config.joins?.some(e=>e.alias===c))throw Error(`Alias "${c}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof l&&(this.config.fields={[l]:this.config.fields}),"string"==typeof c&&!rb(r,r9))){let e=rb(r,rV)?r._.selectedFields:rb(r,nc)?r[rz].selectedFields:r[r3.Symbol.Columns];this.config.fields[c]=e}"function"==typeof a&&(a=a(new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]);let u=[],d=[],h=[];if(rb(r,lV)&&o&&"string"!=typeof o&&(o.useIndex&&(u=lX(lY(o.useIndex))),o.forceIndex&&(d=lX(lY(o.forceIndex))),o.ignoreIndex&&(h=lX(lY(o.ignoreIndex)))),this.config.joins.push({on:a,table:r,joinType:e,alias:c,useIndex:u,forceIndex:d,ignoreIndex:h,lateral:t}),"string"==typeof c)switch(e){case"left":this.joinsNotNullableMap[c]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[c]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[c]=!0}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator(e,t){return r=>{let n="function"==typeof r?r(l8()):r;if(!nw(this.getSelectedFields(),n.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=e:this.config.orderBy=e;return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){let t=[];if(t.push(...lG(this.config.table)),this.config.joins)for(let e of this.config.joins)t.push(...lG(e.table));return new Proxy(new rV(this.getSQL(),this.config.fields,e,!1,[...new Set(t)]),new ny({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new ny({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache(e){return this.cacheConfig=void 0===e?{config:{},enable:!0,autoInvalidate:!0}:!1===e?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}}class l4 extends l3{static [ry]="MySqlSelect";prepare(){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let e=nb(this.config.fields),t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),e,void 0,void 0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}execute=e=>this.prepare().execute(e);createIterator=()=>{let e=this;return async function*(t){yield*e.prepare().iterator(t)}};iterator=this.createIterator()}function l5(e,t){return(r,n,...i)=>{let s=[n,...i].map(r=>({type:e,isAll:t,rightSelect:r}));for(let e of s)if(!nw(r.getSelectedFields(),e.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(s)}}n_(l4,[rS]);let l8=()=>({union:l6,unionAll:l9,intersect:l7,intersectAll:ce,except:ct,exceptAll:cr}),l6=l5("union",!1),l9=l5("union",!0),l7=l5("intersect",!1),ce=l5("intersect",!0),ct=l5("except",!1),cr=l5("except",!0);class cn{static [ry]="MySqlQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=rb(e,l1)?e:void 0,this.dialectConfig=rb(e,l1)?void 0:e}$with=(e,t)=>{let r=this;return{as:n=>("function"==typeof n&&(n=n(r)),new Proxy(new rK(n.getSQL(),t??("getSelectedFields"in n?n.getSelectedFields()??{}:{}),e,!0),new ny({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;return{select:function(r){return new l2({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(r){return new l2({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e,distinct:!0})}}}select(e){return new l2({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new l2({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new l1(this.dialectConfig)),this.dialect}}class ci{constructor(e,t,r){this.table=e,this.session=t,this.dialect=r}static [ry]="MySqlInsertBuilder";shouldIgnore=!1;ignore(){return this.shouldIgnore=!0,this}values(e){if(0===(e=Array.isArray(e)?e:[e]).length)throw Error("values() must be called with at least one value");let t=e.map(e=>{let t={},r=this.table[r3.Symbol.Columns];for(let n of Object.keys(e)){let i=e[n];t[n]=rb(i,r9)?i:new nr(i,r[n])}return t});return new cs(this.table,t,this.shouldIgnore,this.session,this.dialect)}select(e){let t="function"==typeof e?e(new cn):e;if(!rb(t,r9)&&!nw(this.table[rG],t._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new cs(this.table,t,this.shouldIgnore,this.session,this.dialect,!0)}}class cs extends rS{constructor(e,t,r,n,i,s){super(),this.session=n,this.dialect=i,this.config={table:e,values:t,select:s,ignore:r}}static [ry]="MySqlInsert";config;cacheConfig;onDuplicateKeyUpdate(e){let t=this.dialect.buildUpdateSet(this.config.table,nv(this.config.table,e.set));return this.config.onConflict=nn`update ${t}`,this}$returningId(){let e=[];for(let[t,r]of Object.entries(this.config.table[r3.Symbol.Columns]))r.primary&&e.push({field:r,path:[t]});return this.config.returning=e,this}getSQL(){return this.dialect.buildInsertQuery(this.config).sql}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}prepare(){let{sql:e,generatedIds:t}=this.dialect.buildInsertQuery(this.config);return this.session.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,t,this.config.returning,{type:"insert",tables:lG(this.config.table)},this.cacheConfig)}execute=e=>this.prepare().execute(e);createIterator=()=>{let e=this;return async function*(t){yield*e.prepare().iterator(t)}};iterator=this.createIterator();$dynamic(){return this}}class ca{constructor(e,t,r,n){this.table=e,this.session=t,this.dialect=r,this.withList=n}static [ry]="MySqlUpdateBuilder";set(e){return new co(this.table,nv(this.table,e),this.session,this.dialect,this.withList)}}class co extends rS{constructor(e,t,r,n,i){super(),this.session=r,this.dialect=n,this.config={set:t,table:e,withList:i}}static [ry]="MySqlUpdate";config;cacheConfig;where(e){return this.config.where=e,this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.table[r3.Symbol.Columns],new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.orderBy=r}else this.config.orderBy=e;return this}limit(e){return this.config.limit=e,this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,void 0,void 0,this.config.returning,{type:"insert",tables:lG(this.config.table)},this.cacheConfig)}execute=e=>this.prepare().execute(e);createIterator=()=>{let e=this;return async function*(t){yield*e.prepare().iterator(t)}};iterator=this.createIterator();$dynamic(){return this}}class cl{constructor(e,t,r,n,i,s,a,o){this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=i,this.dialect=s,this.session=a,this.mode=o}static [ry]="MySqlRelationalQueryBuilder";findMany(e){return new cc(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many",this.mode)}findFirst(e){return new cc(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first",this.mode)}}class cc extends rS{constructor(e,t,r,n,i,s,a,o,l,c){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=i,this.dialect=s,this.session=a,this.config=o,this.queryMode=l,this.mode=c}static [ry]="MySqlRelationalQuery";prepare(){let{query:e,builtQuery:t}=this._toSQL();return this.session.prepareQuery(t,void 0,t=>{let r=t.map(t=>ao(this.schema,this.tableConfig,t,e.selection));return"first"===this.queryMode?r[0]:r})}_getQuery(){return"planetscale"===this.mode?this.dialect.buildRelationalQueryWithoutLateralSubqueries({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}):this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}_toSQL(){let e=this._getQuery();return{builtQuery:this.dialect.sqlToQuery(e.sql),query:e}}getSQL(){return this._getQuery().sql}toSQL(){return this._toSQL().builtQuery}execute(){return this.prepare().execute()}}class cu{constructor(e,t,r,n){if(this.dialect=e,this.session=t,this.mode=n,this._=r?{schema:r.schema,fullSchema:r.fullSchema,tableNamesMap:r.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={},this._.schema)for(const[n,i]of Object.entries(this._.schema))this.query[n]=new cl(r.fullSchema,this._.schema,this._.tableNamesMap,r.fullSchema[n],i,e,t,this.mode);this.$cache={invalidate:async e=>{}}}static [ry]="MySqlDatabase";query;$with=(e,t)=>{let r=this;return{as:n=>("function"==typeof n&&(n=n(new cn(r.dialect))),new Proxy(new rK(n.getSQL(),t??("getSelectedFields"in n?n.getSelectedFields()??{}:{}),e,!0),new ny({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new ot({source:e,filters:t,session:this.session})}$cache;with(...e){let t=this;return{select:function(r){return new l2({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e})},selectDistinct:function(r){return new l2({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})},update:function(r){return new ca(r,t.session,t.dialect,e)},delete:function(r){return new lZ(r,t.session,t.dialect,e)}}}select(e){return new l2({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new l2({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(e){return new ca(e,this.session,this.dialect)}insert(e){return new ci(e,this.session,this.dialect)}delete(e){return new lZ(e,this.session,this.dialect)}execute(e){return this.session.execute("string"==typeof e?nn.raw(e):e.getSQL())}transaction(e,t){return this.session.transaction(e,t)}}class cd{static [ry]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(e,t){this.reference=()=>{let{name:t,columns:r,foreignColumns:n}=e();return{name:t,columns:r,foreignTable:n[0].table,foreignColumns:n}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e,this}onDelete(e){return this._onDelete=e,this}build(e){return new ch(e,this)}}class ch{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static [ry]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:r}=this.reference(),n=t.map(e=>e.name),i=r.map(e=>e.name),s=[this.table[rT],...n,r[0].table[rT],...i];return e??`${s.join("_")}_fk`}}function cf(e,t){return`${e[rT]}_${t.join("_")}_unique`}class cp{constructor(e,t){this.name=t,this.columns=e}static [ry]="SQLiteUniqueConstraintBuilder";columns;build(e){return new cm(e,this.columns,this.name)}}class cg{static [ry]="SQLiteUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new cp(e,this.name)}}class cm{constructor(e,t,r){this.table=e,this.columns=t,this.name=r??cf(this.table,this.columns.map(e=>e.name))}static [ry]="SQLiteUniqueConstraint";columns;name;getName(){return this.name}}class cy extends rx{static [ry]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e){return this.config.isUnique=!0,this.config.uniqueName=e,this}generatedAlwaysAs(e,t){return this.config.generated={as:e,type:"always",mode:t?.mode??"virtual"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:r,actions:n})=>{let i;return i=new cd(()=>({columns:[e],foreignColumns:[r()]})),n.onUpdate&&i.onUpdate(n.onUpdate),n.onDelete&&i.onDelete(n.onDelete),i.build(t)})}}class cb extends rE{constructor(e,t){t.uniqueName||(t.uniqueName=cf(e,[t.name])),super(e,t),this.table=e}static [ry]="SQLiteColumn"}class cw extends cy{static [ry]="SQLiteBigIntBuilder";constructor(e){super(e,"bigint","SQLiteBigInt")}build(e){return new cv(e,this.config)}}class cv extends cb{static [ry]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(e){return"u">typeof Buffer&&Buffer.from?BigInt((Buffer.isBuffer(e)?e:e instanceof ArrayBuffer?Buffer.from(e):e.buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Buffer.from(e)).toString("utf8")):BigInt(nT.decode(e))}mapToDriverValue(e){return Buffer.from(e.toString())}}class c_ extends cy{static [ry]="SQLiteBlobJsonBuilder";constructor(e){super(e,"json","SQLiteBlobJson")}build(e){return new cS(e,this.config)}}class cS extends cb{static [ry]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(e){return"u">typeof Buffer&&Buffer.from?JSON.parse((Buffer.isBuffer(e)?e:e instanceof ArrayBuffer?Buffer.from(e):e.buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Buffer.from(e)).toString("utf8")):JSON.parse(nT.decode(e))}mapToDriverValue(e){return Buffer.from(JSON.stringify(e))}}class cE extends cy{static [ry]="SQLiteBlobBufferBuilder";constructor(e){super(e,"buffer","SQLiteBlobBuffer")}build(e){return new cx(e,this.config)}}class cx extends cb{static [ry]="SQLiteBlobBuffer";mapFromDriverValue(e){return Buffer.isBuffer(e)?e:Buffer.from(e)}getSQLType(){return"blob"}}function cT(e,t){let{name:r,config:n}=nx(e,t);return n?.mode==="json"?new c_(r):n?.mode==="bigint"?new cw(r):new cE(r)}class cP extends cy{static [ry]="SQLiteCustomColumnBuilder";constructor(e,t,r){super(e,"custom","SQLiteCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=r}build(e){return new cA(e,this.config)}}class cA extends cb{static [ry]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return"function"==typeof this.mapFrom?this.mapFrom(e):e}mapToDriverValue(e){return"function"==typeof this.mapTo?this.mapTo(e):e}}function cO(e){return(t,r)=>{let{name:n,config:i}=nx(t,r);return new cP(n,i,e)}}class cC extends cy{static [ry]="SQLiteBaseIntegerBuilder";constructor(e,t,r){super(e,t,r),this.config.autoIncrement=!1}primaryKey(e){return e?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class cR extends cb{static [ry]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class ck extends cC{static [ry]="SQLiteIntegerBuilder";constructor(e){super(e,"number","SQLiteInteger")}build(e){return new cN(e,this.config)}}class cN extends cR{static [ry]="SQLiteInteger"}class cI extends cC{static [ry]="SQLiteTimestampBuilder";constructor(e,t){super(e,"date","SQLiteTimestamp"),this.config.mode=t}defaultNow(){return this.default(nn`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(e){return new c$(e,this.config)}}class c$ extends cR{static [ry]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(e){return new Date("timestamp"===this.config.mode?1e3*e:e)}mapToDriverValue(e){let t=e.getTime();return"timestamp"===this.config.mode?Math.floor(t/1e3):t}}class cj extends cC{static [ry]="SQLiteBooleanBuilder";constructor(e,t){super(e,"boolean","SQLiteBoolean"),this.config.mode=t}build(e){return new cD(e,this.config)}}class cD extends cR{static [ry]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(e){return 1===Number(e)}mapToDriverValue(e){return+!!e}}function cL(e,t){let{name:r,config:n}=nx(e,t);return n?.mode==="timestamp"||n?.mode==="timestamp_ms"?new cI(r,n.mode):n?.mode==="boolean"?new cj(r,n.mode):new ck(r)}class cM extends cy{static [ry]="SQLiteNumericBuilder";constructor(e){super(e,"string","SQLiteNumeric")}build(e){return new cU(e,this.config)}}class cU extends cb{static [ry]="SQLiteNumeric";mapFromDriverValue(e){return"string"==typeof e?e:String(e)}getSQLType(){return"numeric"}}class cq extends cy{static [ry]="SQLiteNumericNumberBuilder";constructor(e){super(e,"number","SQLiteNumericNumber")}build(e){return new cB(e,this.config)}}class cB extends cb{static [ry]="SQLiteNumericNumber";mapFromDriverValue(e){return"number"==typeof e?e:Number(e)}mapToDriverValue=String;getSQLType(){return"numeric"}}class cF extends cy{static [ry]="SQLiteNumericBigIntBuilder";constructor(e){super(e,"bigint","SQLiteNumericBigInt")}build(e){return new cQ(e,this.config)}}class cQ extends cb{static [ry]="SQLiteNumericBigInt";mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return"numeric"}}function cH(e,t){let{name:r,config:n}=nx(e,t),i=n?.mode;return"number"===i?new cq(r):"bigint"===i?new cF(r):new cM(r)}class cV extends cy{static [ry]="SQLiteRealBuilder";constructor(e){super(e,"number","SQLiteReal")}build(e){return new cK(e,this.config)}}class cK extends cb{static [ry]="SQLiteReal";getSQLType(){return"real"}}function cW(e){return new cV(e??"")}class cz extends cy{static [ry]="SQLiteTextBuilder";constructor(e,t){super(e,"string","SQLiteText"),this.config.enumValues=t.enum,this.config.length=t.length}build(e){return new cJ(e,this.config)}}class cJ extends cb{static [ry]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(e,t){super(e,t)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class cG extends cy{static [ry]="SQLiteTextJsonBuilder";constructor(e){super(e,"json","SQLiteTextJson")}build(e){return new cX(e,this.config)}}class cX extends cb{static [ry]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(e){return JSON.parse(e)}mapToDriverValue(e){return JSON.stringify(e)}}function cY(e,t={}){let{name:r,config:n}=nx(e,t);return"json"===n.mode?new cG(r):new cz(r,n)}let cZ=Symbol.for("drizzle:SQLiteInlineForeignKeys");class c0 extends r3{static [ry]="SQLiteTable";static Symbol=Object.assign({},r3.Symbol,{InlineForeignKeys:cZ});[r3.Symbol.Columns];[cZ]=[];[r3.Symbol.ExtraConfigBuilder]=void 0}let c1=(e,t,r)=>(function(e,t,r,n,i=e){let s=new c0(e,void 0,i),a=Object.fromEntries(Object.entries("function"==typeof t?t({blob:cT,customType:cO,integer:cL,numeric:cH,real:cW,text:cY}):t).map(([e,t])=>{t.setName(e);let r=t.build(s);return s[cZ].push(...t.buildForeignKeys(r,s)),[e,r]})),o=Object.assign(s,a);return o[r3.Symbol.Columns]=a,o[r3.Symbol.ExtraConfigColumns]=a,r&&(o[c0.Symbol.ExtraConfigBuilder]=r),o})(e,t,r);class c2 extends nc{static [ry]="SQLiteViewBase"}class c3{static [ry]="SQLiteDialect";casing;constructor(e){this.casing=new sj(e?.casing)}escapeName(e){return`"${e}"`}escapeParam(e){return"?"}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[nn`with `];for(let[r,n]of e.entries())t.push(nn`${nn.identifier(n._.alias)} as (${n._.sql})`),r<e.length-1&&t.push(nn`, `);return t.push(nn` `),nn.join(t)}buildDeleteQuery({table:e,where:t,returning:r,withList:n,limit:i,orderBy:s}){let a=this.buildWithCTE(n),o=r?nn` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0,l=t?nn` where ${t}`:void 0,c=this.buildOrderBy(s),u=this.buildLimit(i);return nn`${a}delete from ${e}${l}${o}${c}${u}`}buildUpdateSet(e,t){let r=e[r3.Symbol.Columns],n=Object.keys(r).filter(e=>void 0!==t[e]||r[e]?.onUpdateFn!==void 0),i=n.length;return nn.join(n.flatMap((e,n)=>{let s=r[e],a=s.onUpdateFn?.(),o=t[e]??(rb(a,r9)?a:nn.param(a,s)),l=nn`${nn.identifier(this.casing.getColumnCasing(s))} = ${o}`;return n<i-1?[l,nn.raw(", ")]:[l]}))}buildUpdateQuery({table:e,set:t,where:r,returning:n,withList:i,joins:s,from:a,limit:o,orderBy:l}){let c=this.buildWithCTE(i),u=this.buildUpdateSet(e,t),d=a&&nn.join([nn.raw(" from "),this.buildFromTable(a)]),h=this.buildJoins(s),f=n?nn` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,p=r?nn` where ${r}`:void 0,g=this.buildOrderBy(l),m=this.buildLimit(o);return nn`${c}update ${e} set ${u}${d}${h}${p}${f}${g}${m}`}buildSelection(e,{isSingleTable:t=!1}={}){let r=e.length,n=e.flatMap(({field:e},n)=>{let i=[];if(rb(e,r9.Aliased)&&e.isSelectionField)i.push(nn.identifier(e.fieldAlias));else if(rb(e,r9.Aliased)||rb(e,r9)){let r=rb(e,r9.Aliased)?e.sql:e;t?i.push(new r9(r.queryChunks.map(e=>rb(e,rE)?nn.identifier(this.casing.getColumnCasing(e)):e))):i.push(r),rb(e,r9.Aliased)&&i.push(nn` as ${nn.identifier(e.fieldAlias)}`)}else if(rb(e,rE)){let r=e.table[r3.Symbol.Name];"SQLiteNumericBigInt"===e.columnType?t?i.push(nn`cast(${nn.identifier(this.casing.getColumnCasing(e))} as text)`):i.push(nn`cast(${nn.identifier(r)}.${nn.identifier(this.casing.getColumnCasing(e))} as text)`):t?i.push(nn.identifier(this.casing.getColumnCasing(e))):i.push(nn`${nn.identifier(r)}.${nn.identifier(this.casing.getColumnCasing(e))}`)}else if(rb(e,rV)){let t=Object.entries(e._.selectedFields);if(1===t.length){let r=t[0][1],n=rb(r,r9)?r.decoder:rb(r,rE)?{mapFromDriverValue:e=>r.mapFromDriverValue(e)}:r.sql.decoder;n&&(e._.sql.decoder=n)}i.push(e)}return n<r-1&&i.push(nn`, `),i});return nn.join(n)}buildJoins(e){if(!e||0===e.length)return;let t=[];if(e)for(let[r,n]of e.entries()){0===r&&t.push(nn` `);let i=n.table,s=n.on?nn` on ${n.on}`:void 0;if(rb(i,c0)){let e=i[c0.Symbol.Name],r=i[c0.Symbol.Schema],a=i[c0.Symbol.OriginalName],o=e===a?void 0:n.alias;t.push(nn`${nn.raw(n.joinType)} join ${r?nn`${nn.identifier(r)}.`:void 0}${nn.identifier(a)}${o&&nn` ${nn.identifier(o)}`}${s}`)}else t.push(nn`${nn.raw(n.joinType)} join ${i}${s}`);r<e.length-1&&t.push(nn` `)}return nn.join(t)}buildLimit(e){return"object"==typeof e||"number"==typeof e&&e>=0?nn` limit ${e}`:void 0}buildOrderBy(e){let t=[];if(e)for(let[r,n]of e.entries())t.push(n),r<e.length-1&&t.push(nn`, `);return t.length>0?nn` order by ${nn.join(t)}`:void 0}buildFromTable(e){return rb(e,r3)&&e[r3.Symbol.IsAlias]?nn`${nn`${nn.identifier(e[r3.Symbol.Schema]??"")}.`.if(e[r3.Symbol.Schema])}${nn.identifier(e[r3.Symbol.OriginalName])} ${nn.identifier(e[r3.Symbol.Name])}`:e}buildSelectQuery({withList:e,fields:t,fieldsFlat:r,where:n,having:i,table:s,joins:a,orderBy:o,groupBy:l,limit:c,offset:u,distinct:d,setOperators:h}){let f=r??nb(t);for(let e of f){let t;if(rb(e.field,rE)&&e.field.table[rT]!==(rb(s,rV)?s._.alias:rb(s,c2)?s[rz].name:rb(s,r9)?void 0:s[rT])&&(t=e.field.table,!a?.some(({alias:e})=>e===(t[r3.Symbol.IsAlias]?t[rT]:t[r3.Symbol.BaseName])))){let t=e.field.table[rT];throw Error(`Your "${e.path.join("->")}" field references a column "${t}"."${e.field.name}", but the table "${t}" is not part of the query! Did you forget to join it?`)}}let p=!a||0===a.length,g=this.buildWithCTE(e),m=d?nn` distinct`:void 0,y=this.buildSelection(f,{isSingleTable:p}),b=this.buildFromTable(s),w=this.buildJoins(a),v=n?nn` where ${n}`:void 0,_=i?nn` having ${i}`:void 0,S=[];if(l)for(let[e,t]of l.entries())S.push(t),e<l.length-1&&S.push(nn`, `);let E=S.length>0?nn` group by ${nn.join(S)}`:void 0,x=this.buildOrderBy(o),T=this.buildLimit(c),P=u?nn` offset ${u}`:void 0,A=nn`${g}select${m} ${y} from ${b}${w}${v}${E}${_}${x}${T}${P}`;return h.length>0?this.buildSetOperations(A,h):A}buildSetOperations(e,t){let[r,...n]=t;if(!r)throw Error("Cannot pass undefined values to any set operator");return 0===n.length?this.buildSetOperationQuery({leftSelect:e,setOperator:r}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:r}),n)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:r,rightSelect:n,limit:i,orderBy:s,offset:a}}){let o,l=nn`${e.getSQL()} `,c=nn`${n.getSQL()}`;if(s&&s.length>0){let e=[];for(let t of s)if(rb(t,cb))e.push(nn.identifier(t.name));else if(rb(t,r9)){for(let e=0;e<t.queryChunks.length;e++){let r=t.queryChunks[e];rb(r,cb)&&(t.queryChunks[e]=nn.identifier(this.casing.getColumnCasing(r)))}e.push(nn`${t}`)}else e.push(nn`${t}`);o=nn` order by ${nn.join(e,nn`, `)}`}let u="object"==typeof i||"number"==typeof i&&i>=0?nn` limit ${i}`:void 0,d=nn.raw(`${t} ${r?"all ":""}`),h=a?nn` offset ${a}`:void 0;return nn`${l}${d}${c}${o}${u}${h}`}buildInsertQuery({table:e,values:t,onConflict:r,returning:n,withList:i,select:s}){let a=[],o=Object.entries(e[r3.Symbol.Columns]).filter(([e,t])=>!t.shouldDisableInsert()),l=o.map(([,e])=>nn.identifier(this.casing.getColumnCasing(e)));if(s)rb(t,r9)?a.push(t):a.push(t.getSQL());else for(let[e,r]of(a.push(nn.raw("values ")),t.entries())){let n=[];for(let[e,t]of o){let i=r[e];if(void 0===i||rb(i,nr)&&void 0===i.value){let e;if(null!==t.default&&void 0!==t.default)e=rb(t.default,r9)?t.default:nn.param(t.default,t);else if(void 0!==t.defaultFn){let r=t.defaultFn();e=rb(r,r9)?r:nn.param(r,t)}else if(t.default||void 0===t.onUpdateFn)e=nn`null`;else{let r=t.onUpdateFn();e=rb(r,r9)?r:nn.param(r,t)}n.push(e)}else n.push(i)}a.push(n),e<t.length-1&&a.push(nn`, `)}let c=this.buildWithCTE(i),u=nn.join(a),d=n?nn` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,h=r?.length?nn.join(r):void 0;return nn`${c}insert into ${e} ${l} ${u}${h}${d}`}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:t})}buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:r,table:n,tableConfig:i,queryConfig:s,tableAlias:a,nestedQueryRelation:o,joinOn:l}){let c,u=[],d,h,f=[],p,g=[];if(!0===s)u=Object.entries(i.columns).map(([e,t])=>({dbKey:t.name,tsKey:e,field:np(t,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let n=Object.fromEntries(Object.entries(i.columns).map(([e,t])=>[e,np(t,a)]));if(s.where){let e="function"==typeof s.where?s.where(n,an()):s.where;p=e&&nm(e,a)}let o=[],l=[];if(s.columns){let e=!1;for(let[t,r]of Object.entries(s.columns))void 0!==r&&t in i.columns&&(e||!0!==r||(e=!0),l.push(t));l.length>0&&(l=e?l.filter(e=>s.columns?.[e]===!0):Object.keys(i.columns).filter(e=>!l.includes(e)))}else l=Object.keys(i.columns);for(let e of l){let t=i.columns[e];o.push({tsKey:e,value:t})}let c=[];if(s.with&&(c=Object.entries(s.with).filter(e=>!!e[1]).map(([e,t])=>({tsKey:e,queryConfig:t,relation:i.relations[e]}))),s.extras)for(let[e,t]of Object.entries("function"==typeof s.extras?s.extras(n,{sql:nn}):s.extras))o.push({tsKey:e,value:ng(t,a)});for(let{tsKey:e,value:t}of o)u.push({dbKey:rb(t,r9.Aliased)?t.fieldAlias:i.columns[e].name,tsKey:e,field:rb(t,rE)?np(t,a):t,relationTableTsKey:void 0,isJson:!1,selection:[]});let g="function"==typeof s.orderBy?s.orderBy(n,ai()):s.orderBy??[];for(let{tsKey:n,queryConfig:i,relation:o}of(Array.isArray(g)||(g=[g]),f=g.map(e=>rb(e,rE)?np(e,a):nm(e,a)),d=s.limit,h=s.offset,c)){let s=as(t,r,o),l=r[r4(o.referencedTable)],c=`${a}_${n}`,d=sF(...s.fields.map((e,t)=>sq(np(s.references[t],c),np(e,a)))),h=this.buildRelationalQuery({fullSchema:e,schema:t,tableNamesMap:r,table:e[l],tableConfig:t[l],queryConfig:rb(o,at)?!0===i?{limit:1}:{...i,limit:1}:i,tableAlias:c,joinOn:d,nestedQueryRelation:o}),f=nn`(${h.sql})`.as(n);u.push({dbKey:n,tsKey:n,field:f,relationTableTsKey:l,isJson:!0,selection:h.selection})}}if(0===u.length)throw new sD({message:`No fields selected for table "${i.tsName}" ("${a}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(p=sF(l,p),o){let e=nn`json_array(${nn.join(u.map(({field:e})=>rb(e,cb)?nn.identifier(this.casing.getColumnCasing(e)):rb(e,r9.Aliased)?e.sql:e),nn`, `)})`;rb(o,ar)&&(e=nn`coalesce(json_group_array(${e}), json_array())`);let t=[{dbKey:"data",tsKey:"data",field:e.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:u}];void 0!==d||void 0!==h||f.length>0?(c=this.buildSelectQuery({table:nf(n,a),fields:{},fieldsFlat:[{path:[],field:nn.raw("*")}],where:p,limit:d,offset:h,orderBy:f,setOperators:[]}),p=void 0,d=void 0,h=void 0,f=void 0):c=nf(n,a),c=this.buildSelectQuery({table:rb(c,c0)?c:new rV(c,{},a),fields:{},fieldsFlat:t.map(({field:e})=>({path:[],field:rb(e,rE)?np(e,a):e})),joins:g,where:p,limit:d,offset:h,orderBy:f,setOperators:[]})}else c=this.buildSelectQuery({table:nf(n,a),fields:{},fieldsFlat:u.map(({field:e})=>({path:[],field:rb(e,rE)?np(e,a):e})),joins:g,where:p,limit:d,offset:h,orderBy:f,setOperators:[]});return{tableTsKey:i.tsName,sql:c,selection:u}}}class c4 extends c3{static [ry]="SQLiteSyncDialect";migrate(e,t,r){let n=void 0===r||"string"==typeof r?"__drizzle_migrations":r.migrationsTable??"__drizzle_migrations",i=nn`
			CREATE TABLE IF NOT EXISTS ${nn.identifier(n)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;t.run(i);let s=t.values(nn`SELECT id, hash, created_at FROM ${nn.identifier(n)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;t.run(nn`BEGIN`);try{for(let r of e)if(!s||Number(s[2])<r.folderMillis){for(let e of r.sql)t.run(nn.raw(e));t.run(nn`INSERT INTO ${nn.identifier(n)} ("hash", "created_at") VALUES(${r.hash}, ${r.folderMillis})`)}t.run(nn`COMMIT`)}catch(e){throw t.run(nn`ROLLBACK`),e}}}class c5 extends c3{static [ry]="SQLiteAsyncDialect";async migrate(e,t,r){let n=void 0===r||"string"==typeof r?"__drizzle_migrations":r.migrationsTable??"__drizzle_migrations",i=nn`
			CREATE TABLE IF NOT EXISTS ${nn.identifier(n)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await t.run(i);let s=(await t.values(nn`SELECT id, hash, created_at FROM ${nn.identifier(n)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await t.transaction(async t=>{for(let r of e)if(!s||Number(s[2])<r.folderMillis){for(let e of r.sql)await t.run(nn.raw(e));await t.run(nn`INSERT INTO ${nn.identifier(n)} ("hash", "created_at") VALUES(${r.hash}, ${r.folderMillis})`)}})}}class c8{constructor(e,t){this.name=e,this.value=t}static [ry]="SQLiteCheckBuilder";brand;build(e){return new c6(e,this)}}class c6{constructor(e,t){this.table=e,this.name=t.name,this.value=t.value}static [ry]="SQLiteCheck";name;value}class c9{constructor(e,t){this.name=e,this.unique=t}static [ry]="SQLiteIndexBuilderOn";on(...e){return new c7(this.name,e,this.unique)}}class c7{static [ry]="SQLiteIndexBuilder";config;constructor(e,t,r){this.config={name:e,columns:t,unique:r,where:void 0}}where(e){return this.config.where=e,this}build(e){return new ue(this.config,e)}}class ue{static [ry]="SQLiteIndex";config;constructor(e,t){this.config={...e,table:t}}}function ut(...e){return e[0].columns?new ur(e[0].columns,e[0].name):new ur(e)}class ur{static [ry]="SQLitePrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new un(e,this.columns,this.name)}}class un{constructor(e,t,r){this.table=e,this.columns=t,this.name=r}static [ry]="SQLitePrimaryKey";columns;name;getName(){return this.name??`${this.table[c0.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}}function ui(e){return rb(e,c0)?[`${e[r3.Symbol.BaseName]}`]:rb(e,rV)?e._.usedTables??[]:rb(e,r9)?e.usedTables??[]:[]}class us{static [ry]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,this.withList=e.withList,this.distinct=e.distinct}from(e){let t,r=!!this.fields;return t=this.fields?this.fields:rb(e,rV)?Object.fromEntries(Object.keys(e._.selectedFields).map(t=>[t,e[t]])):rb(e,c2)?e[rz].selectedFields:rb(e,r9)?{}:nS(e),new uo({table:e,fields:t,isPartialSelect:r,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class ua extends au{static [ry]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:e,fields:t,isPartialSelect:r,session:n,dialect:i,withList:s,distinct:a}){for(const o of(super(),this.config={withList:s,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=r,this.session=n,this.dialect=i,this._={selectedFields:t,config:this.config},this.tableName=nE(e),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{},ui(e)))this.usedTables.add(o)}getUsedTables(){return[...this.usedTables]}createJoin(e){return(t,r)=>{let n=this.tableName,i=nE(t);for(let e of ui(t))this.usedTables.add(e);if("string"==typeof i&&this.config.joins?.some(e=>e.alias===i))throw Error(`Alias "${i}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof n&&(this.config.fields={[n]:this.config.fields}),"string"==typeof i&&!rb(t,r9))){let e=rb(t,rV)?t._.selectedFields:rb(t,nc)?t[rz].selectedFields:t[r3.Symbol.Columns];this.config.fields[i]=e}if("function"==typeof r&&(r=r(new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:r,table:t,joinType:e,alias:i}),"string"==typeof i)switch(e){case"left":this.joinsNotNullableMap[i]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[i]=!0;break;case"cross":case"inner":this.joinsNotNullableMap[i]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([e])=>[e,!1])),this.joinsNotNullableMap[i]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");crossJoin=this.createJoin("cross");createSetOperator(e,t){return r=>{let n="function"==typeof r?r(uc()):r;if(!nw(this.getSelectedFields(),n.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return"function"==typeof e&&(e=e(new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.fields,new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=e:this.config.orderBy=e;return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){let t=[];if(t.push(...ui(this.config.table)),this.config.joins)for(let e of this.config.joins)t.push(...ui(e.table));return new Proxy(new rV(this.getSQL(),this.config.fields,e,!1,[...new Set(t)]),new ny({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new ny({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class uo extends ua{static [ry]="SQLiteSelect";_prepare(e=!0){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let t=nb(this.config.fields),r=this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),t,"all",!0,void 0,{type:"select",tables:[...this.usedTables]},this.cacheConfig);return r.joinsNotNullableMap=this.joinsNotNullableMap,r}$withCache(e){return this.cacheConfig=void 0===e?{config:{},enable:!0,autoInvalidate:!0}:!1===e?{enable:!1}:{enable:!0,autoInvalidate:!0,...e},this}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(){return this.all()}}function ul(e,t){return(r,n,...i)=>{let s=[n,...i].map(r=>({type:e,isAll:t,rightSelect:r}));for(let e of s)if(!nw(r.getSelectedFields(),e.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return r.addSetOperators(s)}}n_(uo,[rS]);let uc=()=>({union:uu,unionAll:ud,intersect:uh,except:uf}),uu=ul("union",!1),ud=ul("union",!0),uh=ul("intersect",!1),uf=ul("except",!1);class up{static [ry]="SQLiteQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=rb(e,c3)?e:void 0,this.dialectConfig=rb(e,c3)?void 0:e}$with=(e,t)=>{let r=this;return{as:n=>("function"==typeof n&&(n=n(r)),new Proxy(new rK(n.getSQL(),t??("getSelectedFields"in n?n.getSelectedFields()??{}:{}),e,!0),new ny({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;return{select:function(r){return new us({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e})},selectDistinct:function(r){return new us({fields:r??void 0,session:void 0,dialect:t.getDialect(),withList:e,distinct:!0})}}}select(e){return new us({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new us({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new c4(this.dialectConfig)),this.dialect}}class ug extends rS{constructor(e,t,r,n){super(),this.table=e,this.session=t,this.dialect=r,this.config={table:e,withList:n}}static [ry]="SQLiteDelete";config;where(e){return this.config.where=e,this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.table[r3.Symbol.Columns],new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.orderBy=r}else this.config.orderBy=e;return this}limit(e){return this.config.limit=e,this}returning(e=this.table[c0.Symbol.Columns]){return this.config.returning=nb(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e=!0){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"delete",tables:ui(this.config.table)})}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(e){return this._prepare().execute(e)}$dynamic(){return this}}class um{constructor(e,t,r,n){this.table=e,this.session=t,this.dialect=r,this.withList=n}static [ry]="SQLiteInsertBuilder";values(e){if(0===(e=Array.isArray(e)?e:[e]).length)throw Error("values() must be called with at least one value");let t=e.map(e=>{let t={},r=this.table[r3.Symbol.Columns];for(let n of Object.keys(e)){let i=e[n];t[n]=rb(i,r9)?i:new nr(i,r[n])}return t});return new uy(this.table,t,this.session,this.dialect,this.withList)}select(e){let t="function"==typeof e?e(new up):e;if(!rb(t,r9)&&!nw(this.table[rG],t._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new uy(this.table,t,this.session,this.dialect,this.withList,!0)}}class uy extends rS{constructor(e,t,r,n,i,s){super(),this.session=r,this.dialect=n,this.config={table:e,values:t,withList:i,select:s}}static [ry]="SQLiteInsert";config;returning(e=this.config.table[c0.Symbol.Columns]){return this.config.returning=nb(e),this}onConflictDoNothing(e={}){if(this.config.onConflict||(this.config.onConflict=[]),void 0===e.target)this.config.onConflict.push(nn` on conflict do nothing`);else{let t=Array.isArray(e.target)?nn`${e.target}`:nn`${[e.target]}`,r=e.where?nn` where ${e.where}`:nn``;this.config.onConflict.push(nn` on conflict ${t} do nothing${r}`)}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');this.config.onConflict||(this.config.onConflict=[]);let t=e.where?nn` where ${e.where}`:void 0,r=e.targetWhere?nn` where ${e.targetWhere}`:void 0,n=e.setWhere?nn` where ${e.setWhere}`:void 0,i=Array.isArray(e.target)?nn`${e.target}`:nn`${[e.target]}`,s=this.dialect.buildUpdateSet(this.config.table,nv(this.config.table,e.set));return this.config.onConflict.push(nn` on conflict ${i}${r} do update set ${s}${t}${n}`),this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e=!0){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:ui(this.config.table)})}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class ub{constructor(e,t,r,n){this.table=e,this.session=t,this.dialect=r,this.withList=n}static [ry]="SQLiteUpdateBuilder";set(e){return new uw(this.table,nv(this.table,e),this.session,this.dialect,this.withList)}}class uw extends rS{constructor(e,t,r,n,i){super(),this.session=r,this.dialect=n,this.config={set:t,table:e,withList:i,joins:[]}}static [ry]="SQLiteUpdate";config;from(e){return this.config.from=e,this}createJoin(e){return(t,r)=>{let n=nE(t);if("string"==typeof n&&this.config.joins.some(e=>e.alias===n))throw Error(`Alias "${n}" is already used in this query`);if("function"==typeof r){let e=this.config.from?rb(t,c0)?t[r3.Symbol.Columns]:rb(t,rV)?t._.selectedFields:rb(t,c2)?t[rz].selectedFields:void 0:void 0;r=r(new Proxy(this.config.table[r3.Symbol.Columns],new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),e&&new Proxy(e,new ny({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:r,table:t,joinType:e,alias:n}),this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}orderBy(...e){if("function"==typeof e[0]){let t=e[0](new Proxy(this.config.table[r3.Symbol.Columns],new ny({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.orderBy=r}else this.config.orderBy=e;return this}limit(e){return this.config.limit=e,this}returning(e=this.config.table[c0.Symbol.Columns]){return this.config.returning=nb(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e=!0){return this.session[e?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0,void 0,{type:"insert",tables:ui(this.config.table)})}prepare(){return this._prepare(!1)}run=e=>this._prepare().run(e);all=e=>this._prepare().all(e);get=e=>this._prepare().get(e);values=e=>this._prepare().values(e);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class uv extends r9{constructor(e){super(uv.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.session=e.session,this.sql=uv.buildCount(e.source,e.filters)}sql;static [ry]="SQLiteCountBuilderAsync";[Symbol.toStringTag]="SQLiteCountBuilderAsync";session;static buildEmbeddedCount(e,t){return nn`(select count(*) from ${e}${nn.raw(" where ").if(t)}${t})`}static buildCount(e,t){return nn`select count(*) from ${e}${nn.raw(" where ").if(t)}${t}`}then(e,t){return Promise.resolve(this.session.count(this.sql)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}}class u_{constructor(e,t,r,n,i,s,a,o){this.mode=e,this.fullSchema=t,this.schema=r,this.tableNamesMap=n,this.table=i,this.tableConfig=s,this.dialect=a,this.session=o}static [ry]="SQLiteAsyncRelationalQueryBuilder";findMany(e){return"sync"===this.mode?new uE(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many"):new uS(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return"sync"===this.mode?new uE(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first"):new uS(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}}class uS extends rS{constructor(e,t,r,n,i,s,a,o,l){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=i,this.dialect=s,this.session=a,this.config=o,this.mode=l}static [ry]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(e=!1){let{query:t,builtQuery:r}=this._toSQL();return this.session[e?"prepareOneTimeQuery":"prepareQuery"](r,void 0,"first"===this.mode?"get":"all",!0,(e,r)=>{let n=e.map(e=>ao(this.schema,this.tableConfig,e,t.selection,r));return"first"===this.mode?n[0]:n})}prepare(){return this._prepare(!1)}_toSQL(){let e=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return"first"===this.mode?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}}class uE extends uS{static [ry]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}}class ux extends rS{constructor(e,t,r,n,i){super(),this.execute=e,this.getSQL=t,this.dialect=n,this.mapBatchResult=i,this.config={action:r}}static [ry]="SQLiteRaw";config;getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}}class uT{constructor(e,t,r,n){this.resultKind=e,this.dialect=t,this.session=r,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={};const i=this.query;if(this._.schema)for(const[s,a]of Object.entries(this._.schema))i[s]=new u_(e,n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[s],a,t,r);this.$cache={invalidate:async e=>{}}}static [ry]="BaseSQLiteDatabase";query;$with=(e,t)=>{let r=this;return{as:n=>("function"==typeof n&&(n=n(new up(r.dialect))),new Proxy(new rK(n.getSQL(),t??("getSelectedFields"in n?n.getSelectedFields()??{}:{}),e,!0),new ny({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new uv({source:e,filters:t,session:this.session})}with(...e){let t=this;return{select:function(r){return new us({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e})},selectDistinct:function(r){return new us({fields:r??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})},update:function(r){return new ub(r,t.session,t.dialect,e)},insert:function(r){return new um(r,t.session,t.dialect,e)},delete:function(r){return new ug(r,t.session,t.dialect,e)}}}select(e){return new us({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new us({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(e){return new ub(e,this.session,this.dialect)}$cache;insert(e){return new um(e,this.session,this.dialect)}delete(e){return new ug(e,this.session,this.dialect)}run(e){let t="string"==typeof e?nn.raw(e):e.getSQL();return"async"===this.resultKind?new ux(async()=>this.session.run(t),()=>t,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(t)}all(e){let t="string"==typeof e?nn.raw(e):e.getSQL();return"async"===this.resultKind?new ux(async()=>this.session.all(t),()=>t,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(t)}get(e){let t="string"==typeof e?nn.raw(e):e.getSQL();return"async"===this.resultKind?new ux(async()=>this.session.get(t),()=>t,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(t)}values(e){let t="string"==typeof e?nn.raw(e):e.getSQL();return"async"===this.resultKind?new ux(async()=>this.session.values(t),()=>t,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(t)}transaction(e,t){return this.session.transaction(e,t)}}var uP=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},uA=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};function uO(e){let t=e?"__Secure-":"";return{sessionToken:{name:`${t}authjs.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},callbackUrl:{name:`${t}authjs.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},csrfToken:{name:`${e?"__Host-":""}authjs.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},pkceCodeVerifier:{name:`${t}authjs.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},state:{name:`${t}authjs.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}},nonce:{name:`${t}authjs.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e}},webauthnChallenge:{name:`${t}authjs.challenge`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:e,maxAge:900}}}}class uC{constructor(e,t,r){if(fI.add(this),f$.set(this,{}),fj.set(this,void 0),fD.set(this,void 0),uP(this,fD,r,"f"),uP(this,fj,e,"f"),!t)return;const{name:n}=e;for(const[e,r]of Object.entries(t))e.startsWith(n)&&r&&(uA(this,f$,"f")[e]=r)}get value(){return Object.keys(uA(this,f$,"f")).sort((e,t)=>parseInt(e.split(".").pop()||"0")-parseInt(t.split(".").pop()||"0")).map(e=>uA(this,f$,"f")[e]).join("")}chunk(e,t){let r=uA(this,fI,"m",fM).call(this);for(let n of uA(this,fI,"m",fL).call(this,{name:uA(this,fj,"f").name,value:e,options:{...uA(this,fj,"f").options,...t}}))r[n.name]=n;return Object.values(r)}clean(){return Object.values(uA(this,fI,"m",fM).call(this))}}f$=new WeakMap,fj=new WeakMap,fD=new WeakMap,fI=new WeakSet,fL=function(e){let t=Math.ceil(e.value.length/3936);if(1===t)return uA(this,f$,"f")[e.name]=e.value,[e];let r=[];for(let n=0;n<t;n++){let t=`${e.name}.${n}`,i=e.value.substr(3936*n,3936);r.push({...e,name:t,value:i}),uA(this,f$,"f")[t]=i}return uA(this,fD,"f").debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:160,valueSize:e.value.length,chunks:r.map(e=>e.value.length+160)}),r},fM=function(){let e={};for(let t in uA(this,f$,"f"))delete uA(this,f$,"f")?.[t],e[t]={name:t,value:"",options:{...uA(this,fj,"f").options,maxAge:0}};return e};class uR extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${r}`}}class uk extends uR{}uk.kind="signIn";class uN extends uR{}uN.type="AdapterError";class uI extends uR{}uI.type="AccessDenied";class u$ extends uR{}u$.type="CallbackRouteError";class uj extends uR{}uj.type="ErrorPageLoop";class uD extends uR{}uD.type="EventError";class uL extends uR{}uL.type="InvalidCallbackUrl";class uM extends uk{constructor(){super(...arguments),this.code="credentials"}}uM.type="CredentialsSignin";class uU extends uR{}uU.type="InvalidEndpoints";class uq extends uR{}uq.type="InvalidCheck";class uB extends uR{}uB.type="JWTSessionError";class uF extends uR{}uF.type="MissingAdapter";class uQ extends uR{}uQ.type="MissingAdapterMethods";class uH extends uR{}uH.type="MissingAuthorize";class uV extends uR{}uV.type="MissingSecret";class uK extends uk{}uK.type="OAuthAccountNotLinked";class uW extends uk{}uW.type="OAuthCallbackError";class uz extends uR{}uz.type="OAuthProfileParseError";class uJ extends uR{}uJ.type="SessionTokenError";class uG extends uR{}uG.type="SignOutError";class uX extends uR{}uX.type="UnknownAction";class uY extends uR{}uY.type="UnsupportedStrategy";class uZ extends uR{}uZ.type="InvalidProvider";class u0 extends uR{}u0.type="UntrustedHost";class u1 extends uR{}u1.type="Verification";class u2 extends uk{}u2.type="MissingCSRF";let u3=new Set(["CredentialsSignin","OAuthAccountNotLinked","OAuthCallbackError","AccessDenied","Verification","MissingCSRF","AccountNotLinked","WebAuthnVerificationError"]);class u4 extends uR{}u4.type="DuplicateConditionalUI";class u5 extends uR{}u5.type="MissingWebAuthnAutocomplete";class u8 extends uR{}u8.type="WebAuthnVerificationError";class u6 extends uk{}u6.type="AccountNotLinked";class u9 extends uR{}u9.type="ExperimentalFeatureNotEnabled";let u7=!1;function de(e,t){try{return/^https?:/.test(new URL(e,e.startsWith("/")?t:void 0).protocol)}catch{return!1}}let dt=!1,dr=!1,dn=!1,di=["createVerificationToken","useVerificationToken","getUserByEmail"],ds=["createUser","getUser","getUserByEmail","getUserByAccount","updateUser","linkAccount","createSession","getSessionAndUser","updateSession","deleteSession"],da=["createUser","getUser","linkAccount","getAccount","getAuthenticator","createAuthenticator","listAuthenticatorsByUserId","updateAuthenticatorCounter"];"function"!=typeof tY.hkdf||process.versions.electron||(i=async(...e)=>new Promise((t,r)=>{tY.hkdf(...e,(e,n)=>{e?r(e):t(new Uint8Array(n))})}));let dl=async(e,t,r,n,s)=>(i||((e,t,r,n,i)=>{let s=parseInt(e.substr(3),10)>>3||20,a=(0,tY.createHmac)(e,r.byteLength?r:new Uint8Array(s)).update(t).digest(),o=Math.ceil(i/s),l=new Uint8Array(s*o+n.byteLength+1),c=0,u=0;for(let t=1;t<=o;t++)l.set(n,u),l[u+n.byteLength]=t,l.set((0,tY.createHmac)(e,a).update(l.subarray(c,u+n.byteLength+1)).digest(),u),c=u,u+=s;return l.slice(0,i)}))(e,t,r,n,s);function dc(e,t){if("string"==typeof e)return new TextEncoder().encode(e);if(!(e instanceof Uint8Array))throw TypeError(`"${t}"" must be an instance of Uint8Array or a string`);return e}async function du(e,t,r,n,i){return dl(function(e){switch(e){case"sha256":case"sha384":case"sha512":case"sha1":return e;default:throw TypeError('unsupported "digest" value')}}(e),function(e){let t=dc(e,"ikm");if(!t.byteLength)throw TypeError('"ikm" must be at least one byte in length');return t}(t),dc(r,"salt"),function(e){let t=dc(e,"info");if(t.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return t}(n),function(e,t){if("number"!=typeof e||!Number.isInteger(e)||e<1)throw TypeError('"keylen" must be a positive integer');if(e>255*(parseInt(t.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return e}(i,e))}let dd=new TextEncoder,dh=new TextDecoder;function df(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let n of e)t.set(n,r),r+=n.length;return t}function dp(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function dg(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return dp(r,t,0),dp(r,e%0x100000000,4),r}function dm(e){let t=new Uint8Array(4);return dp(t,e),t}function dy(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n>127)throw TypeError("non-ASCII string encountered in encode()");t[r]=n}return t}function db(e){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof e?e:dh.decode(e),{alphabet:"base64url"});let t=e;t instanceof Uint8Array&&(t=dh.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/");try{var r=t;if(Uint8Array.fromBase64)return Uint8Array.fromBase64(r);let e=atob(r),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function dw(e){let t=e;return("string"==typeof t&&(t=dd.encode(t)),Uint8Array.prototype.toBase64)?t.toBase64({alphabet:"base64url",omitPadding:!0}):(function(e){if(Uint8Array.prototype.toBase64)return e.toBase64();let t=[];for(let r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join(""))})(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}e.s(["decode",()=>db,"encode",()=>dw],17756);let dv=Symbol();class d_ extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class dS extends d_{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class dE extends d_{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.claim=r,this.reason=n,this.payload=t}}class dx extends d_{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class dT extends d_{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class dP extends d_{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(e="decryption operation failed",t){super(e,t)}}class dA extends d_{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class dO extends d_{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class dC extends d_{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class dR extends d_{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}function dk(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new dT(`Unsupported JWE Algorithm: ${e}`)}}function dN(e,t){if(t.length<<3!==dk(e))throw new dA("Invalid Initialization Vector length")}function dI(e,t){let r=e.byteLength<<3;if(r!==t)throw new dA(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)}let d$=(e,t="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`);function dj(e,t,r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if("AES-GCM"!==e.algorithm.name)throw d$("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw d$(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if("AES-KW"!==e.algorithm.name)throw d$("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw d$(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":break;default:throw d$("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if("PBKDF2"!==e.algorithm.name)throw d$("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if("RSA-OAEP"!==e.algorithm.name)throw d$("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(parseInt(e.algorithm.hash.name.slice(4),10)!==r)throw d$(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}if(r&&!e.usages.includes(r))throw TypeError(`CryptoKey does not support this operation, its usages must include ${r}.`)}function dD(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let dL=(e,...t)=>dD("Key must be ",e,...t),dM=(e,t,...r)=>dD(`Key for the ${e} algorithm must be `,t,...r);function dU(e){if(!dq(e))throw Error("CryptoKey instance expected")}let dq=e=>{if(e?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return e instanceof CryptoKey}catch{return!1}},dB=e=>e?.[Symbol.toStringTag]==="KeyObject",dF=e=>dq(e)||dB(e);async function dQ(e,t,r,n,i){if(!(r instanceof Uint8Array))throw TypeError(dL(r,"Uint8Array"));let s=parseInt(e.slice(1,4),10),a=await crypto.subtle.importKey("raw",r.subarray(s>>3),"AES-CBC",!1,["encrypt"]),o=await crypto.subtle.importKey("raw",r.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),l=new Uint8Array(await crypto.subtle.encrypt({iv:n,name:"AES-CBC"},a,t)),c=df(i,n,l,dg(i.length<<3));return{ciphertext:l,tag:new Uint8Array((await crypto.subtle.sign("HMAC",o,c)).slice(0,s>>3)),iv:n}}async function dH(e,t,r,n,i){let s;r instanceof Uint8Array?s=await crypto.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(dj(r,e,"encrypt"),s=r);let a=new Uint8Array(await crypto.subtle.encrypt({additionalData:i,iv:n,name:"AES-GCM",tagLength:128},s,t)),o=a.slice(-16);return{ciphertext:a.slice(0,-16),tag:o,iv:n}}async function dV(e,t,r,n,i){if(!dq(r)&&!(r instanceof Uint8Array))throw TypeError(dL(r,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(n)dN(e,n);else n=crypto.getRandomValues(new Uint8Array(dk(e)>>3));switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&dI(r,parseInt(e.slice(-3),10)),dQ(e,t,r,n,i);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&dI(r,parseInt(e.slice(1,4),10)),dH(e,t,r,n,i);default:throw new dT("Unsupported JWE Content Encryption Algorithm")}}function dK(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function dW(e,t,r){return e instanceof Uint8Array?crypto.subtle.importKey("raw",e,"AES-KW",!0,[r]):(dj(e,t,r),e)}async function dz(e,t,r){let n=await dW(t,e,"wrapKey");dK(n,e);let i=await crypto.subtle.importKey("raw",r,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",i,n,"AES-KW"))}async function dJ(e,t,r){let n=await dW(t,e,"unwrapKey");dK(n,e);let i=await crypto.subtle.unwrapKey("raw",r,n,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",i))}async function dG(e,t){let r=`SHA-${e.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(r,t))}function dX(e){return df(dm(e.length),e)}async function dY(e,t,r){let n=t>>3,i=Math.ceil(n/32),s=new Uint8Array(32*i);for(let t=1;t<=i;t++){let n=new Uint8Array(4+e.length+r.length);n.set(dm(t),0),n.set(e,4),n.set(r,4+e.length);let i=await dG("sha256",n);s.set(i,(t-1)*32)}return s.slice(0,n)}async function dZ(e,t,r,n,i=new Uint8Array,s=new Uint8Array){var a;dj(e,"ECDH"),dj(t,"ECDH","deriveBits");let o=df(dX(dy(r)),dX(i),dX(s),dm(n),new Uint8Array);return dY(new Uint8Array(await crypto.subtle.deriveBits({name:e.algorithm.name,public:e},t,"X25519"===(a=e).algorithm.name?256:Math.ceil(parseInt(a.algorithm.namedCurve.slice(-3),10)/8)<<3)),n,o)}function d0(e){switch(e.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===e.algorithm.name}}async function d1(e,t,r,n){if(!(e instanceof Uint8Array)||e.length<8)throw new dA("PBES2 Salt Input must be 8 or more octets");let i=df(dy(t),Uint8Array.of(0),e),s=parseInt(t.slice(13,16),10),a={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:i},o=await (n instanceof Uint8Array?crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]):(dj(n,t,"deriveBits"),n));return new Uint8Array(await crypto.subtle.deriveBits(a,o,s))}async function d2(e,t,r,n=2048,i=crypto.getRandomValues(new Uint8Array(16))){let s=await d1(i,e,n,t);return{encryptedKey:await dz(e.slice(-6),s,r),p2c:n,p2s:dw(i)}}async function d3(e,t,r,n,i){let s=await d1(i,e,n,t);return dJ(e.slice(-6),s,r)}function d4(e,t){if(e.startsWith("RS")||e.startsWith("PS")){let{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}}let d5=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new dT(`alg ${e} is not supported either by JOSE or your javascript runtime`)}};async function d8(e,t,r){return dj(t,e,"encrypt"),d4(e,t),new Uint8Array(await crypto.subtle.encrypt(d5(e),t,r))}async function d6(e,t,r){return dj(t,e,"decrypt"),d4(e,t),new Uint8Array(await crypto.subtle.decrypt(d5(e),t,r))}function d9(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}let d7=e=>d9(e)&&"string"==typeof e.kty;async function he(e){if(!e.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:t,keyUsages:r}=function(e){let t,r;switch(e.kty){case"AKP":switch(e.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":t={name:e.alg},r=e.priv?["sign"]:["verify"];break;default:throw new dT('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new dT('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new dT('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":case"EdDSA":t={name:"Ed25519"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new dT('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new dT('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}(e),n={...e};return"AKP"!==n.kty&&delete n.alg,delete n.use,crypto.subtle.importKey("jwk",n,t,e.ext??(!e.d&&!e.priv),e.key_ops??r)}let ht=async(e,t,r,n=!1)=>{let i=(s||=new WeakMap).get(e);if(i?.[r])return i[r];let a=await he({...t,alg:r});return n&&Object.freeze(e),i?i[r]=a:s.set(e,{[r]:a}),a};async function hr(e,t){if(e instanceof Uint8Array||dq(e))return e;if(dB(e)){if("secret"===e.type)return e.export();if("toCryptoKey"in e&&"function"==typeof e.toCryptoKey)try{return((e,t)=>{let r,n=(s||=new WeakMap).get(e);if(n?.[t])return n[t];let i="public"===e.type,a=!!i;if("x25519"===e.asymmetricKeyType){switch(t){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}r=e.toCryptoKey(e.asymmetricKeyType,a,i?[]:["deriveBits"])}if("ed25519"===e.asymmetricKeyType){if("EdDSA"!==t&&"Ed25519"!==t)throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,a,[i?"verify":"sign"])}switch(e.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(t!==e.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");r=e.toCryptoKey(e.asymmetricKeyType,a,[i?"verify":"sign"])}if("rsa"===e.asymmetricKeyType){let n;switch(t){case"RSA-OAEP":n="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":n="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":n="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":n="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(t.startsWith("RSA-OAEP"))return e.toCryptoKey({name:"RSA-OAEP",hash:n},a,i?["encrypt"]:["decrypt"]);r=e.toCryptoKey({name:t.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:n},a,[i?"verify":"sign"])}if("ec"===e.asymmetricKeyType){let n=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(e.asymmetricKeyDetails?.namedCurve);if(!n)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===t&&"P-256"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},a,[i?"verify":"sign"])),"ES384"===t&&"P-384"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},a,[i?"verify":"sign"])),"ES512"===t&&"P-521"===n&&(r=e.toCryptoKey({name:"ECDSA",namedCurve:n},a,[i?"verify":"sign"])),t.startsWith("ECDH-ES")&&(r=e.toCryptoKey({name:"ECDH",namedCurve:n},a,i?[]:["deriveBits"]))}if(!r)throw TypeError("given KeyObject instance cannot be used for this algorithm");return n?n[t]=r:s.set(e,{[t]:r}),r})(e,t)}catch(e){if(e instanceof TypeError)throw e}let r=e.export({format:"jwk"});return ht(e,r,t)}if(d7(e))return e.k?db(e.k):ht(e,e,t,!0);throw Error("unreachable")}function hn(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new dT(`Unsupported JWE Algorithm: ${e}`)}}let hi=e=>crypto.getRandomValues(new Uint8Array(hn(e)>>3));async function hs(e){if(dB(e))if("secret"!==e.type)return e.export({format:"jwk"});else e=e.export();if(e instanceof Uint8Array)return{kty:"oct",k:dw(e)};if(!dq(e))throw TypeError(dL(e,"CryptoKey","KeyObject","Uint8Array"));if(!e.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:t,key_ops:r,alg:n,use:i,...s}=await crypto.subtle.exportKey("jwk",e);return"AKP"===s.kty&&(s.alg=n),s}async function ha(e){return hs(e)}async function ho(e,t){if(!(e instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let r={name:"HMAC",hash:"SHA-256"},n=await crypto.subtle.generateKey(r,!1,["sign"]),i=new Uint8Array(await crypto.subtle.sign(r,n,e)),s=new Uint8Array(await crypto.subtle.sign(r,n,t)),a=0,o=-1;for(;++o<32;)a|=i[o]^s[o];return 0===a}async function hl(e,t,r,n,i,s){let a,o;if(!(t instanceof Uint8Array))throw TypeError(dL(t,"Uint8Array"));let l=parseInt(e.slice(1,4),10),c=await crypto.subtle.importKey("raw",t.subarray(l>>3),"AES-CBC",!1,["decrypt"]),u=await crypto.subtle.importKey("raw",t.subarray(0,l>>3),{hash:`SHA-${l<<1}`,name:"HMAC"},!1,["sign"]),d=df(s,n,r,dg(s.length<<3)),h=new Uint8Array((await crypto.subtle.sign("HMAC",u,d)).slice(0,l>>3));try{a=await ho(i,h)}catch{}if(!a)throw new dP;try{o=new Uint8Array(await crypto.subtle.decrypt({iv:n,name:"AES-CBC"},c,r))}catch{}if(!o)throw new dP;return o}async function hc(e,t,r,n,i,s){let a;t instanceof Uint8Array?a=await crypto.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(dj(t,e,"decrypt"),a=t);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:s,iv:n,name:"AES-GCM",tagLength:128},a,df(r,i)))}catch{throw new dP}}async function hu(e,t,r,n,i,s){if(!dq(t)&&!(t instanceof Uint8Array))throw TypeError(dL(t,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!n)throw new dA("JWE Initialization Vector missing");if(!i)throw new dA("JWE Authentication Tag missing");switch(dN(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&dI(t,parseInt(e.slice(-3),10)),hl(e,t,r,n,i,s);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&dI(t,parseInt(e.slice(1,4),10)),hc(e,t,r,n,i,s);default:throw new dT("Unsupported JWE Content Encryption Algorithm")}}async function hd(e,t,r,n){let i=e.slice(0,7),s=await dV(i,r,t,n,new Uint8Array);return{encryptedKey:s.ciphertext,iv:dw(s.iv),tag:dw(s.tag)}}async function hh(e,t,r,n,i){return hu(e.slice(0,7),t,r,n,i,new Uint8Array)}async function hf(e,t,r,n,i={}){let s,a,o;switch(e){case"dir":o=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let l;if(dU(r),!d0(r))throw new dT("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:c,apv:u}=i;l=i.epk?await hr(i.epk,e):(await crypto.subtle.generateKey(r.algorithm,!0,["deriveBits"])).privateKey;let{x:d,y:h,crv:f,kty:p}=await ha(l),g=await dZ(r,l,"ECDH-ES"===e?t:e,"ECDH-ES"===e?hn(t):parseInt(e.slice(-5,-2),10),c,u);if(a={epk:{x:d,crv:f,kty:p}},"EC"===p&&(a.epk.y=h),c&&(a.apu=dw(c)),u&&(a.apv=dw(u)),"ECDH-ES"===e){o=g;break}o=n||hi(t);let m=e.slice(-6);s=await dz(m,g,o);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":o=n||hi(t),dU(r),s=await d8(e,r,o);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{o=n||hi(t);let{p2c:l,p2s:c}=i;({encryptedKey:s,...a}=await d2(e,r,o,l,c));break}case"A128KW":case"A192KW":case"A256KW":o=n||hi(t),s=await dz(e,r,o);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{o=n||hi(t);let{iv:l}=i;({encryptedKey:s,...a}=await hd(e,r,o,l));break}default:throw new dT('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:o,encryptedKey:s,parameters:a}}function hp(...e){let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}function hg(e,t,r,n,i){let s;if(void 0!==i.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let a of(s=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!s.has(a))throw new dT(`Extension Header Parameter "${a}" is not recognized`);if(void 0===i[a])throw new e(`Extension Header Parameter "${a}" is missing`);if(s.get(a)&&void 0===n[a])throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(n.crit)}let hm=e=>e?.[Symbol.toStringTag],hy=(e,t,r)=>{if(void 0!==t.use){let e;switch(r){case"sign":case"verify":e="sig";break;case"encrypt":case"decrypt":e="enc"}if(t.use!==e)throw TypeError(`Invalid key for this operation, its "use" must be "${e}" when present`)}if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, its "alg" must be "${e}" when present`);if(Array.isArray(t.key_ops)){let n;switch(!0){case"sign"===r||"verify"===r:case"dir"===e:case e.includes("CBC-HS"):n=r;break;case e.startsWith("PBES2"):n="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(e):n=!e.includes("GCM")&&e.endsWith("KW")?"encrypt"===r?"wrapKey":"unwrapKey":r;break;case"encrypt"===r&&e.startsWith("RSA"):n="wrapKey";break;case"decrypt"===r:n=e.startsWith("RSA")?"unwrapKey":"deriveBits"}if(n&&t.key_ops?.includes?.(n)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${n}" when present`)}return!0};function hb(e,t,r){switch(e.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":((e,t,r)=>{if(!(t instanceof Uint8Array)){if(d7(t)){if("oct"===t.kty&&"string"==typeof t.k&&hy(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!dF(t))throw TypeError(dM(e,t,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==t.type)throw TypeError(`${hm(t)} instances for symmetric algorithms must be of type "secret"`)}})(e,t,r);break;default:((e,t,r)=>{if(d7(t))switch(r){case"decrypt":case"sign":if("oct"!==t.kty&&("AKP"===t.kty&&"string"==typeof t.priv||"string"==typeof t.d)&&hy(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if("oct"!==t.kty&&void 0===t.d&&void 0===t.priv&&hy(e,t,r))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!dF(t))throw TypeError(dM(e,t,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===t.type)throw TypeError(`${hm(t)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===t.type)switch(r){case"sign":throw TypeError(`${hm(t)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${hm(t)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===t.type)switch(r){case"verify":throw TypeError(`${hm(t)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${hm(t)} instances for asymmetric algorithm encryption must be of type "public"`)}})(e,t,r)}}class hw{#e;#t;#r;#n;#i;#s;#a;#o;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#e=e}setKeyManagementParameters(e){if(this.#o)throw TypeError("setKeyManagementParameters can only be called once");return this.#o=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setSharedUnprotectedHeader(e){if(this.#r)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#r=e,this}setUnprotectedHeader(e){if(this.#n)throw TypeError("setUnprotectedHeader can only be called once");return this.#n=e,this}setAdditionalAuthenticatedData(e){return this.#i=e,this}setContentEncryptionKey(e){if(this.#s)throw TypeError("setContentEncryptionKey can only be called once");return this.#s=e,this}setInitializationVector(e){if(this.#a)throw TypeError("setInitializationVector can only be called once");return this.#a=e,this}async encrypt(e,t){let r,n,i,s,a,o;if(!this.#t&&!this.#n&&!this.#r)throw new dA("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!hp(this.#t,this.#n,this.#r))throw new dA("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let l={...this.#t,...this.#n,...this.#r};if(hg(dA,new Map,t?.crit,this.#t,l),void 0!==l.zip)throw new dT('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:c,enc:u}=l;if("string"!=typeof c||!c)throw new dA('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof u||!u)throw new dA('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#s&&("dir"===c||"ECDH-ES"===c))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${c}`);hb("dir"===c?u:c,e,"encrypt");{let i,s=await hr(e,c);({cek:n,encryptedKey:r,parameters:i}=await hf(c,u,s,this.#s,this.#o)),i&&(t&&dv in t?this.#n?this.#n={...this.#n,...i}:this.setUnprotectedHeader(i):this.#t?this.#t={...this.#t,...i}:this.setProtectedHeader(i))}if(this.#t?a=dy(s=dw(JSON.stringify(this.#t))):(s="",a=new Uint8Array),this.#i){let e=dy(o=dw(this.#i));i=df(a,dy("."),e)}else i=a;let{ciphertext:d,tag:h,iv:f}=await dV(u,this.#e,n,this.#a,i),p={ciphertext:dw(d)};return f&&(p.iv=dw(f)),h&&(p.tag=dw(h)),r&&(p.encrypted_key=dw(r)),o&&(p.aad=o),this.#t&&(p.protected=s),this.#r&&(p.unprotected=this.#r),this.#n&&(p.header=this.#n),p}}class hv{#l;constructor(e){this.#l=new hw(e)}setContentEncryptionKey(e){return this.#l.setContentEncryptionKey(e),this}setInitializationVector(e){return this.#l.setInitializationVector(e),this}setProtectedHeader(e){return this.#l.setProtectedHeader(e),this}setKeyManagementParameters(e){return this.#l.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this.#l.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}let h_=e=>Math.floor(e.getTime()/1e3),hS=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function hE(e){let t,r=hS.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t}function hx(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}let hT=e=>e.includes("/")?e.toLowerCase():`application/${e.toLowerCase()}`;class hP{#c;constructor(e){if(!d9(e))throw TypeError("JWT Claims Set MUST be an object");this.#c=structuredClone(e)}data(){return dd.encode(JSON.stringify(this.#c))}get iss(){return this.#c.iss}set iss(e){this.#c.iss=e}get sub(){return this.#c.sub}set sub(e){this.#c.sub=e}get aud(){return this.#c.aud}set aud(e){this.#c.aud=e}set jti(e){this.#c.jti=e}set nbf(e){"number"==typeof e?this.#c.nbf=hx("setNotBefore",e):e instanceof Date?this.#c.nbf=hx("setNotBefore",h_(e)):this.#c.nbf=h_(new Date)+hE(e)}set exp(e){"number"==typeof e?this.#c.exp=hx("setExpirationTime",e):e instanceof Date?this.#c.exp=hx("setExpirationTime",h_(e)):this.#c.exp=h_(new Date)+hE(e)}set iat(e){void 0===e?this.#c.iat=h_(new Date):e instanceof Date?this.#c.iat=hx("setIssuedAt",h_(e)):"string"==typeof e?this.#c.iat=hx("setIssuedAt",h_(new Date)+hE(e)):this.#c.iat=hx("setIssuedAt",e)}}class hA{#s;#a;#o;#t;#u;#d;#h;#f;constructor(e={}){this.#f=new hP(e)}setIssuer(e){return this.#f.iss=e,this}setSubject(e){return this.#f.sub=e,this}setAudience(e){return this.#f.aud=e,this}setJti(e){return this.#f.jti=e,this}setNotBefore(e){return this.#f.nbf=e,this}setExpirationTime(e){return this.#f.exp=e,this}setIssuedAt(e){return this.#f.iat=e,this}setProtectedHeader(e){if(this.#t)throw TypeError("setProtectedHeader can only be called once");return this.#t=e,this}setKeyManagementParameters(e){if(this.#o)throw TypeError("setKeyManagementParameters can only be called once");return this.#o=e,this}setContentEncryptionKey(e){if(this.#s)throw TypeError("setContentEncryptionKey can only be called once");return this.#s=e,this}setInitializationVector(e){if(this.#a)throw TypeError("setInitializationVector can only be called once");return this.#a=e,this}replicateIssuerAsHeader(){return this.#u=!0,this}replicateSubjectAsHeader(){return this.#d=!0,this}replicateAudienceAsHeader(){return this.#h=!0,this}async encrypt(e,t){let r=new hv(this.#f.data());return this.#t&&(this.#u||this.#d||this.#h)&&(this.#t={...this.#t,iss:this.#u?this.#f.iss:void 0,sub:this.#d?this.#f.sub:void 0,aud:this.#h?this.#f.aud:void 0}),r.setProtectedHeader(this.#t),this.#a&&r.setInitializationVector(this.#a),this.#s&&r.setContentEncryptionKey(this.#s),this.#o&&r.setKeyManagementParameters(this.#o),r.encrypt(e,t)}}var hO=e.i(17756),hO=hO;let hC=(e,t)=>{if("string"!=typeof e||!e)throw new dC(`${t} missing or invalid`)};async function hR(e,t){let r,n;if(d7(e))r=e;else if(dF(e))r=await ha(e);else throw TypeError(dL(e,"CryptoKey","KeyObject","JSON Web Key"));if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(r.kty){case"AKP":hC(r.alg,'"alg" (Algorithm) Parameter'),hC(r.pub,'"pub" (Public key) Parameter'),n={alg:r.alg,kty:r.kty,pub:r.pub};break;case"EC":hC(r.crv,'"crv" (Curve) Parameter'),hC(r.x,'"x" (X Coordinate) Parameter'),hC(r.y,'"y" (Y Coordinate) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x,y:r.y};break;case"OKP":hC(r.crv,'"crv" (Subtype of Key Pair) Parameter'),hC(r.x,'"x" (Public Key) Parameter'),n={crv:r.crv,kty:r.kty,x:r.x};break;case"RSA":hC(r.e,'"e" (Exponent) Parameter'),hC(r.n,'"n" (Modulus) Parameter'),n={e:r.e,kty:r.kty,n:r.n};break;case"oct":hC(r.k,'"k" (Key Value) Parameter'),n={k:r.k,kty:r.kty};break;default:throw new dT('"kty" (Key Type) Parameter missing or unsupported')}let i=dy(JSON.stringify(n));return dw(await dG(t,i))}async function hk(e,t,r){let n;if(!d9(e))throw TypeError("JWK must be an object");switch(t??=e.alg,n??=r?.extractable??e.ext,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return db(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new dT('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return he({...e,alg:t,ext:n});case"AKP":if("string"!=typeof e.alg||!e.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==t&&t!==e.alg)throw TypeError("JWK alg and alg option value mismatch");return he({...e,ext:n});case"EC":case"OKP":return he({...e,alg:t,ext:n});default:throw new dT('Unsupported "kty" (Key Type) Parameter value')}}async function hN(e,t,r,n,i){switch(e){case"dir":if(void 0!==r)throw new dA("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new dA("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i,s;if(!d9(n.epk))throw new dA('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(dU(t),!d0(t))throw new dT("ECDH with the provided key is not allowed or not supported by your javascript runtime");let a=await hk(n.epk,e);if(dU(a),void 0!==n.apu){if("string"!=typeof n.apu)throw new dA('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=db(n.apu)}catch{throw new dA("Failed to base64url decode the apu")}}if(void 0!==n.apv){if("string"!=typeof n.apv)throw new dA('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{s=db(n.apv)}catch{throw new dA("Failed to base64url decode the apv")}}let o=await dZ(a,t,"ECDH-ES"===e?n.enc:e,"ECDH-ES"===e?hn(n.enc):parseInt(e.slice(-5,-2),10),i,s);if("ECDH-ES"===e)return o;if(void 0===r)throw new dA("JWE Encrypted Key missing");return dJ(e.slice(-6),o,r)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new dA("JWE Encrypted Key missing");return dU(t),d6(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let s;if(void 0===r)throw new dA("JWE Encrypted Key missing");if("number"!=typeof n.p2c)throw new dA('JOSE Header "p2c" (PBES2 Count) missing or invalid');let a=i?.maxPBES2Count||1e4;if(n.p2c>a)throw new dA('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof n.p2s)throw new dA('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{s=db(n.p2s)}catch{throw new dA("Failed to base64url decode the p2s")}return d3(e,t,r,n.p2c,s)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new dA("JWE Encrypted Key missing");return dJ(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,s;if(void 0===r)throw new dA("JWE Encrypted Key missing");if("string"!=typeof n.iv)throw new dA('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof n.tag)throw new dA('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=db(n.iv)}catch{throw new dA("Failed to base64url decode the iv")}try{s=db(n.tag)}catch{throw new dA("Failed to base64url decode the tag")}return hh(e,t,r,i,s)}default:throw new dT('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function hI(e,t){if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}async function h$(e,t,r){let n,i,s,a,o,l,c;if(!d9(e))throw new dA("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new dA("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new dA("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new dA("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new dA("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new dA("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new dA("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new dA("JWE AAD incorrect type");if(void 0!==e.header&&!d9(e.header))throw new dA("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!d9(e.unprotected))throw new dA("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=db(e.protected);n=JSON.parse(dh.decode(t))}catch{throw new dA("JWE Protected Header is invalid")}if(!hp(n,e.header,e.unprotected))throw new dA("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let u={...n,...e.header,...e.unprotected};if(hg(dA,new Map,r?.crit,n,u),void 0!==u.zip)throw new dT('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:d,enc:h}=u;if("string"!=typeof d||!d)throw new dA("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof h||!h)throw new dA("missing JWE Encryption Algorithm (enc) in JWE Header");let f=r&&hI("keyManagementAlgorithms",r.keyManagementAlgorithms),p=r&&hI("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(f&&!f.has(d)||!f&&d.startsWith("PBES2"))throw new dx('"alg" (Algorithm) Header Parameter value not allowed');if(p&&!p.has(h))throw new dx('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{i=db(e.encrypted_key)}catch{throw new dA("Failed to base64url decode the encrypted_key")}let g=!1;"function"==typeof t&&(t=await t(n,e),g=!0),hb("dir"===d?h:d,t,"decrypt");let m=await hr(t,d);try{s=await hN(d,m,i,u,r)}catch(e){if(e instanceof TypeError||e instanceof dA||e instanceof dT)throw e;s=hi(h)}if(void 0!==e.iv)try{a=db(e.iv)}catch{throw new dA("Failed to base64url decode the iv")}if(void 0!==e.tag)try{o=db(e.tag)}catch{throw new dA("Failed to base64url decode the tag")}let y=void 0!==e.protected?dy(e.protected):new Uint8Array;l=void 0!==e.aad?df(y,dy("."),dy(e.aad)):y;try{c=db(e.ciphertext)}catch{throw new dA("Failed to base64url decode the ciphertext")}let b={plaintext:await hu(h,s,c,a,o,l)};if(void 0!==e.protected&&(b.protectedHeader=n),void 0!==e.aad)try{b.additionalAuthenticatedData=db(e.aad)}catch{throw new dA("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(b.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(b.unprotectedHeader=e.header),g)?{...b,key:m}:b}async function hj(e,t,r){if(e instanceof Uint8Array&&(e=dh.decode(e)),"string"!=typeof e)throw new dA("Compact JWE must be a string or Uint8Array");let{0:n,1:i,2:s,3:a,4:o,length:l}=e.split(".");if(5!==l)throw new dA("Invalid Compact JWE");let c=await h$({ciphertext:a,iv:s||void 0,protected:n,tag:o||void 0,encrypted_key:i||void 0},t,r),u={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return"function"==typeof t?{...u,key:c.key}:u}async function hD(e,t,r){let n=await hj(e,t,r),i=function(e,t,r={}){var n,i;let s,a;try{s=JSON.parse(dh.decode(t))}catch{}if(!d9(s))throw new dO("JWT Claims Set must be a top-level JSON object");let{typ:o}=r;if(o&&("string"!=typeof e.typ||hT(e.typ)!==hT(o)))throw new dS('unexpected "typ" JWT header value',s,"typ","check_failed");let{requiredClaims:l=[],issuer:c,subject:u,audience:d,maxTokenAge:h}=r,f=[...l];for(let e of(void 0!==h&&f.push("iat"),void 0!==d&&f.push("aud"),void 0!==u&&f.push("sub"),void 0!==c&&f.push("iss"),new Set(f.reverse())))if(!(e in s))throw new dS(`missing required "${e}" claim`,s,e,"missing");if(c&&!(Array.isArray(c)?c:[c]).includes(s.iss))throw new dS('unexpected "iss" claim value',s,"iss","check_failed");if(u&&s.sub!==u)throw new dS('unexpected "sub" claim value',s,"sub","check_failed");if(d&&(n=s.aud,i="string"==typeof d?[d]:d,"string"==typeof n?!i.includes(n):!(Array.isArray(n)&&i.some(Set.prototype.has.bind(new Set(n))))))throw new dS('unexpected "aud" claim value',s,"aud","check_failed");switch(typeof r.clockTolerance){case"string":a=hE(r.clockTolerance);break;case"number":a=r.clockTolerance;break;case"undefined":a=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:p}=r,g=h_(p||new Date);if((void 0!==s.iat||h)&&"number"!=typeof s.iat)throw new dS('"iat" claim must be a number',s,"iat","invalid");if(void 0!==s.nbf){if("number"!=typeof s.nbf)throw new dS('"nbf" claim must be a number',s,"nbf","invalid");if(s.nbf>g+a)throw new dS('"nbf" claim timestamp check failed',s,"nbf","check_failed")}if(void 0!==s.exp){if("number"!=typeof s.exp)throw new dS('"exp" claim must be a number',s,"exp","invalid");if(s.exp<=g-a)throw new dE('"exp" claim timestamp check failed',s,"exp","check_failed")}if(h){let e=g-s.iat;if(e-a>("number"==typeof h?h:hE(h)))throw new dE('"iat" claim timestamp check failed (too far in the past)',s,"iat","check_failed");if(e<0-a)throw new dS('"iat" claim timestamp check failed (it should be in the past)',s,"iat","check_failed")}return s}(n.protectedHeader,n.plaintext,r),{protectedHeader:s}=n;if(void 0!==s.iss&&s.iss!==i.iss)throw new dS('replicated "iss" claim header parameter mismatch',i,"iss","mismatch");if(void 0!==s.sub&&s.sub!==i.sub)throw new dS('replicated "sub" claim header parameter mismatch',i,"sub","mismatch");if(void 0!==s.aud&&JSON.stringify(s.aud)!==JSON.stringify(i.aud))throw new dS('replicated "aud" claim header parameter mismatch',i,"aud","mismatch");let a={payload:i,protectedHeader:s};return"function"==typeof t?{...a,key:n.key}:a}let hL=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,hM=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,hU=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,hq=/^[\u0020-\u003A\u003D-\u007E]*$/,hB=Object.prototype.toString,hF=((u=function(){}).prototype=Object.create(null),u);function hQ(e,t){let r=new hF,n=e.length;if(n<2)return r;let i=t?.decode||hW,s=0;do{let t=e.indexOf("=",s);if(-1===t)break;let a=e.indexOf(";",s),o=-1===a?n:a;if(t>o){s=e.lastIndexOf(";",t-1)+1;continue}let l=hH(e,s,t),c=hV(e,t,l),u=e.slice(l,c);if(void 0===r[u]){let n=hH(e,t+1,o),s=hV(e,o,n),a=i(e.slice(n,s));r[u]=a}s=o+1}while(s<n)return r}function hH(e,t,r){do{let r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r)return r}function hV(e,t,r){for(;t>r;){let r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function hK(e,t,r){let n=r?.encode||encodeURIComponent;if(!hL.test(e))throw TypeError(`argument name is invalid: ${e}`);let i=n(t);if(!hM.test(i))throw TypeError(`argument val is invalid: ${t}`);let s=e+"="+i;if(!r)return s;if(void 0!==r.maxAge){if(!Number.isInteger(r.maxAge))throw TypeError(`option maxAge is invalid: ${r.maxAge}`);s+="; Max-Age="+r.maxAge}if(r.domain){if(!hU.test(r.domain))throw TypeError(`option domain is invalid: ${r.domain}`);s+="; Domain="+r.domain}if(r.path){if(!hq.test(r.path))throw TypeError(`option path is invalid: ${r.path}`);s+="; Path="+r.path}if(r.expires){var a;if(a=r.expires,"[object Date]"!==hB.call(a)||!Number.isFinite(r.expires.valueOf()))throw TypeError(`option expires is invalid: ${r.expires}`);s+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.partitioned&&(s+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${r.sameSite}`)}return s}function hW(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}e.s(["parse",()=>hQ,"serialize",()=>hK],99239);var hz=e.i(99239);let{parse:hJ}=hz,hG="A256CBC-HS512";async function hX(e){let{token:t={},secret:r,maxAge:n=2592e3,salt:i}=e,s=Array.isArray(r)?r:[r],a=await hZ(hG,s[0],i),o=await hR({kty:"oct",k:hO.encode(a)},`sha${a.byteLength<<3}`);return await new hA(t).setProtectedHeader({alg:"dir",enc:hG,kid:o}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+n).setJti(crypto.randomUUID()).encrypt(a)}async function hY(e){let{token:t,secret:r,salt:n}=e,i=Array.isArray(r)?r:[r];if(!t)return null;let{payload:s}=await hD(t,async({kid:e,enc:t})=>{for(let r of i){let i=await hZ(t,r,n);if(void 0===e||e===await hR({kty:"oct",k:hO.encode(i)},`sha${i.byteLength<<3}`))return i}throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:["dir"],contentEncryptionAlgorithms:[hG,"A256GCM"]});return s}async function hZ(e,t,r){let n;switch(e){case"A256CBC-HS512":n=64;break;case"A256GCM":n=32;break;default:throw Error("Unsupported JWT Content Encryption Algorithm")}return await du("sha256",t,r,`Auth.js Generated Encryption Key (${r})`,n)}async function h0({options:e,paramValue:t,cookieValue:r}){let{url:n,callbacks:i}=e,s=n.origin;return t?s=await i.redirect({url:t,baseUrl:n.origin}):r&&(s=await i.redirect({url:r,baseUrl:n.origin})),{callbackUrl:s,callbackUrlCookie:s!==r?s:void 0}}let h1="\x1b[31m",h2="\x1b[0m",h3={error(e){let t=e instanceof uR?e.type:e.name;if(console.error(`${h1}[auth][error]${h2} ${t}: ${e.message}`),e.cause&&"object"==typeof e.cause&&"err"in e.cause&&e.cause.err instanceof Error){let{err:t,...r}=e.cause;console.error(`${h1}[auth][cause]${h2}:`,t.stack),r&&console.error(`${h1}[auth][details]${h2}:`,JSON.stringify(r,null,2))}else e.stack&&console.error(e.stack.replace(/.*/,"").substring(1))},warn(e){console.warn(`\x1b[33m[auth][warn][${e}]${h2}`,"Read more: https://warnings.authjs.dev")},debug(e,t){console.log(`\x1b[90m[auth][debug]:${h2} ${e}`,JSON.stringify(t,null,2))}};function h4(e){let t={...h3};return e.debug||(t.debug=()=>{}),e.logger?.error&&(t.error=e.logger.error),e.logger?.warn&&(t.warn=e.logger.warn),e.logger?.debug&&(t.debug=e.logger.debug),e.logger??(e.logger=t),t}let h5=["providers","session","csrf","signin","signout","callback","verify-request","error","webauthn-options"],{parse:h8,serialize:h6}=hz;async function h9(e){if(!("body"in e)||!e.body||"POST"!==e.method)return;let t=e.headers.get("content-type");return t?.includes("application/json")?await e.json():t?.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await e.text())):void 0}async function h7(e,t){try{if("GET"!==e.method&&"POST"!==e.method)throw new uX("Only GET and POST requests are supported");t.basePath??(t.basePath="/auth");let r=new URL(e.url),{action:n,providerId:i}=function(e,t){let r=e.match(RegExp(`^${t}(.+)`));if(null===r)throw new uX(`Cannot parse action at ${e}`);let n=r.at(-1).replace(/^\//,"").split("/").filter(Boolean);if(1!==n.length&&2!==n.length)throw new uX(`Cannot parse action at ${e}`);let[i,s]=n;if(!h5.includes(i)||s&&!["signin","callback","webauthn-options"].includes(i))throw new uX(`Cannot parse action at ${e}`);return{action:i,providerId:"undefined"==s?void 0:s}}(r.pathname,t.basePath);return{url:r,action:n,providerId:i,method:e.method,headers:Object.fromEntries(e.headers),body:e.body?await h9(e):void 0,cookies:h8(e.headers.get("cookie")??"")??{},error:r.searchParams.get("error")??void 0,query:Object.fromEntries(r.searchParams)}}catch(n){let r=h4(t);r.error(n),r.debug("request",e)}}function fe(e){let t=new Headers(e.headers);e.cookies?.forEach(e=>{let{name:r,value:n,options:i}=e,s=h6(r,n,i);t.has("Set-Cookie")?t.append("Set-Cookie",s):t.set("Set-Cookie",s)});let r=e.body;"application/json"===t.get("content-type")?r=JSON.stringify(e.body):"application/x-www-form-urlencoded"===t.get("content-type")&&(r=new URLSearchParams(e.body).toString());let n=new Response(r,{headers:t,status:e.redirect?302:e.status??200});return e.redirect&&n.headers.set("Location",e.redirect),n}async function ft(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("").toString()}function fr(e){return Array.from(crypto.getRandomValues(new Uint8Array(e))).reduce((e,t)=>e+("0"+t.toString(16)).slice(-2),"")}async function fn({options:e,cookieValue:t,isPost:r,bodyValue:n}){if(t){let[i,s]=t.split("|");if(s===await ft(`${i}${e.secret}`))return{csrfTokenVerified:r&&i===n,csrfToken:i}}let i=fr(32),s=await ft(`${i}${e.secret}`);return{cookie:`${i}|${s}`,csrfToken:i}}function fi(e,t){if(!t)throw new u2(`CSRF token was missing during an action ${e}`)}function fs(e){return null!==e&&"object"==typeof e}function fa(e,...t){if(!t.length)return e;let r=t.shift();if(fs(e)&&fs(r))for(let t in r)fs(r[t])?(fs(e[t])||(e[t]=Array.isArray(r[t])?[]:{}),fa(e[t],r[t])):void 0!==r[t]&&(e[t]=r[t]);return fa(e,...t)}let fo=Symbol("skip-csrf-check"),fl=Symbol("return-type-raw"),fc=Symbol("custom-fetch"),fu=Symbol("conform-internal"),fd=e=>ff({id:e.sub??e.id??crypto.randomUUID(),name:e.name??e.nickname??e.preferred_username,email:e.email,image:e.picture}),fh=e=>ff({access_token:e.access_token,id_token:e.id_token,refresh_token:e.refresh_token,expires_at:e.expires_at,scope:e.scope,token_type:e.token_type,session_state:e.session_state});function ff(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}function fp(e,t){if(!e&&t)return;if("string"==typeof e)return{url:new URL(e)};let r=new URL(e?.url??"https://authjs.dev");if(e?.params!=null)for(let[t,n]of Object.entries(e.params))"claims"===t&&(n=JSON.stringify(n)),r.searchParams.set(t,String(n));return{url:r,request:e?.request,conform:e?.conform,...e?.clientPrivateKey?{clientPrivateKey:e?.clientPrivateKey}:null}}let fg={signIn:()=>!0,redirect:({url:e,baseUrl:t})=>e.startsWith("/")?`${t}${e}`:new URL(e).origin===t?e:t,session:({session:e})=>({user:{name:e.user?.name,email:e.user?.email,image:e.user?.image},expires:e.expires?.toISOString?.()??e.expires}),jwt:({token:e})=>e};async function fm({authOptions:e,providerId:t,action:r,url:n,cookies:i,callbackUrl:s,csrfToken:a,csrfDisabled:o,isPost:l}){var c,u;let d=h4(e),{providers:h,provider:f}=function(e){let{providerId:t,config:r}=e,n=new URL(r.basePath??"/auth",e.url.origin),i=r.providers.map(e=>{let t="function"==typeof e?e():e,{options:i,...s}=t,a=i?.id??s.id,o=fa(s,i,{signinUrl:`${n}/signin/${a}`,callbackUrl:`${n}/callback/${a}`});if("oauth"===t.type||"oidc"===t.type){var l;let e,t,n,s;o.redirectProxyUrl??(o.redirectProxyUrl=i?.redirectProxyUrl??r.redirectProxyUrl);let a=((l=o).issuer&&(l.wellKnown??(l.wellKnown=`${l.issuer}/.well-known/openid-configuration`)),(e=fp(l.authorization,l.issuer))&&!e.url?.searchParams.has("scope")&&e.url.searchParams.set("scope","openid profile email"),t=fp(l.token,l.issuer),n=fp(l.userinfo,l.issuer),s=l.checks??["pkce"],l.redirectProxyUrl&&(s.includes("state")||s.push("state"),l.redirectProxyUrl=`${l.redirectProxyUrl}/callback/${l.id}`),{...l,authorization:e,token:t,checks:s,userinfo:n,profile:l.profile??fd,account:l.account??fh});return a.authorization?.url.searchParams.get("response_mode")==="form_post"&&delete a.redirectProxyUrl,a[fc]??(a[fc]=i?.[fc]),a}return o}),s=i.find(({id:e})=>e===t);if(t&&!s){let e=i.map(e=>e.id).join(", ");throw Error(`Provider with id "${t}" not found. Available providers: [${e}].`)}return{providers:i,provider:s}}({url:n,providerId:t,config:e}),p=!1;if((f?.type==="oauth"||f?.type==="oidc")&&f.redirectProxyUrl)try{p=new URL(f.redirectProxyUrl).origin===n.origin}catch{throw TypeError(`redirectProxyUrl must be a valid URL. Received: ${f.redirectProxyUrl}`)}let g={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...e,url:n,action:r,provider:f,cookies:fa(uO(e.useSecureCookies??"https:"===n.protocol),e.cookies),providers:h,session:{strategy:e.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>crypto.randomUUID(),...e.session},jwt:{secret:e.secret,maxAge:e.session?.maxAge??2592e3,encode:hX,decode:hY,...e.jwt},events:(c=e.events??{},u=d,Object.keys(c).reduce((e,t)=>(e[t]=async(...e)=>{try{let r=c[t];return await r(...e)}catch(e){u.error(new uD(e))}},e),{})),adapter:function(e,t){if(e)return Object.keys(e).reduce((r,n)=>(r[n]=async(...r)=>{try{t.debug(`adapter_${n}`,{args:r});let i=e[n];return await i(...r)}catch(r){let e=new uN(r);throw t.error(e),e}},r),{})}(e.adapter,d),callbacks:{...fg,...e.callbacks},logger:d,callbackUrl:n.origin,isOnRedirectProxy:p,experimental:{...e.experimental}},m=[];if(o)g.csrfTokenVerified=!0;else{let{csrfToken:e,cookie:t,csrfTokenVerified:r}=await fn({options:g,cookieValue:i?.[g.cookies.csrfToken.name],isPost:l,bodyValue:a});g.csrfToken=e,g.csrfTokenVerified=r,t&&m.push({name:g.cookies.csrfToken.name,value:t,options:g.cookies.csrfToken.options})}let{callbackUrl:y,callbackUrlCookie:b}=await h0({options:g,cookieValue:i?.[g.cookies.callbackUrl.name],paramValue:s});return g.callbackUrl=y,b&&m.push({name:g.cookies.callbackUrl.name,value:b,options:g.cookies.callbackUrl.options}),{options:g,cookies:m}}var fy,fb,fw,fv,f_,fS,fE,fx,fT,fP,fA,fO,fC,fR,fk,fN,fI,f$,fj,fD,fL,fM,fU,fq,fB,fF,fQ,fH,fV,fK,fW,fz,fJ={},fG=[],fX=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,fY=Array.isArray;function fZ(e,t){for(var r in t)e[r]=t[r];return e}function f0(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function f1(e,t,r,n,i){var s={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++fB:i,__i:-1,__u:0};return null==i&&null!=fq.vnode&&fq.vnode(s),s}function f2(e){return e.children}function f3(e,t){this.props=e,this.context=t}function f4(e,t){if(null==t)return e.__?f4(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?f4(e):null}function f5(e){(!e.__d&&(e.__d=!0)&&fF.push(e)&&!f8.__r++||fQ!==fq.debounceRendering)&&((fQ=fq.debounceRendering)||fH)(f8)}function f8(){var e,t,r,n,i,s,a,o;for(fF.sort(fV);e=fF.shift();)e.__d&&(t=fF.length,n=void 0,s=(i=(r=e).__v).__e,a=[],o=[],r.__P&&((n=fZ({},i)).__v=i.__v+1,fq.vnode&&fq.vnode(n),pt(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[s]:null,a,null==s?f4(i):s,!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,function(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)pr(r[n],r[++n],r[++n]);fq.__c&&fq.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){fq.__e(e,t.__v)}})}(a,n,o),n.__e!=s&&function e(t){var r,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,r=0;r<t.__k.length;r++)if(null!=(n=t.__k[r])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return e(t)}}(n)),fF.length>t&&fF.sort(fV));f8.__r=0}function f6(e,t,r,n,i,s,a,o,l,c,u){var d,h,f,p,g,m=n&&n.__k||fG,y=t.length;for(r.__d=l,function(e,t,r){var n,i,s,a,o,l=t.length,c=r.length,u=c,d=0;for(e.__k=[],n=0;n<l;n++)null!=(i=t[n])&&"boolean"!=typeof i&&"function"!=typeof i?(a=n+d,(i=e.__k[n]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?f1(null,i,null,null,null):fY(i)?f1(f2,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?f1(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,s=null,-1!==(o=i.__i=function(e,t,r,n){var i=e.key,s=e.type,a=r-1,o=r+1,l=t[r];if(null===l||l&&i==l.key&&s===l.type&&0==(131072&l.__u))return r;if(n>+(null!=l&&0==(131072&l.__u)))for(;a>=0||o<t.length;){if(a>=0){if((l=t[a])&&0==(131072&l.__u)&&i==l.key&&s===l.type)return a;a--}if(o<t.length){if((l=t[o])&&0==(131072&l.__u)&&i==l.key&&s===l.type)return o;o++}}return -1}(i,r,a,u))&&(u--,(s=r[o])&&(s.__u|=131072)),null==s||null===s.__v?(-1==o&&d--,"function"!=typeof i.type&&(i.__u|=65536)):o!==a&&(o==a-1?d--:o==a+1?d++:(o>a?d--:d++,i.__u|=65536))):i=e.__k[n]=null;if(u)for(n=0;n<c;n++)null!=(s=r[n])&&0==(131072&s.__u)&&(s.__e==e.__d&&(e.__d=f4(s)),function e(t,r,n){var i,s;if(fq.unmount&&fq.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||pr(i,null,r)),null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){fq.__e(e,r)}i.base=i.__P=null}if(i=t.__k)for(s=0;s<i.length;s++)i[s]&&e(i[s],r,n||"function"!=typeof t.type);n||f0(t.__e),t.__c=t.__=t.__e=t.__d=void 0}(s,s))}(r,t,m),l=r.__d,d=0;d<y;d++)null!=(f=r.__k[d])&&(h=-1===f.__i?fJ:m[f.__i]||fJ,f.__i=d,pt(e,f,h,i,s,a,o,l,c,u),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&pr(h.ref,null,f),u.push(f.ref,f.__c||p,f)),null==g&&null!=p&&(g=p),65536&f.__u||h.__k===f.__k?l=function e(t,r,n){var i,s;if("function"==typeof t.type){for(i=t.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=t,r=e(i[s],r,n));return r}t.__e!=r&&(r&&t.type&&!n.contains(r)&&(r=f4(t)),n.insertBefore(t.__e,r||null),r=t.__e);do r=r&&r.nextSibling;while(null!=r&&8===r.nodeType)return r}(f,l,e):"function"==typeof f.type&&void 0!==f.__d?l=f.__d:p&&(l=p.nextSibling),f.__d=void 0,f.__u&=-196609);r.__d=l,r.__e=g}function f9(e,t,r){"-"===t[0]?e.setProperty(t,null==r?"":r):e[t]=null==r?"":"number"!=typeof r||fX.test(t)?r:r+"px"}function f7(e,t,r,n,i){var s;e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||f9(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||f9(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?n?r.u=n.u:(r.u=fK,e.addEventListener(t,s?fz:fW,s)):e.removeEventListener(t,s?fz:fW,s);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==r?"":r))}}function pe(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.t)t.t=fK++;else if(t.t<r.u)return;return r(fq.event?fq.event(t):t)}}}function pt(e,t,r,n,i,s,a,o,l,c){var u,d,h,f,p,g,m,y,b,w,v,_,S,E,x,T,P=t.type;if(void 0!==t.constructor)return null;128&r.__u&&(l=!!(32&r.__u),s=[o=t.__e=r.__e]),(u=fq.__b)&&u(t);e:if("function"==typeof P)try{if(y=t.props,b="prototype"in P&&P.prototype.render,w=(u=P.contextType)&&n[u.__c],v=u?w?w.props.value:u.__:n,r.__c?m=(d=t.__c=r.__c).__=d.__E:(b?t.__c=d=new P(y,v):(t.__c=d=new f3(y,v),d.constructor=P,d.render=pn),w&&w.sub(d),d.props=y,d.state||(d.state={}),d.context=v,d.__n=n,h=d.__d=!0,d.__h=[],d._sb=[]),b&&null==d.__s&&(d.__s=d.state),b&&null!=P.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=fZ({},d.__s)),fZ(d.__s,P.getDerivedStateFromProps(y,d.__s))),f=d.props,p=d.state,d.__v=t,h)b&&null==P.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),b&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(b&&null==P.getDerivedStateFromProps&&y!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(y,v),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(y,d.__s,v)||t.__v===r.__v)){for(t.__v!==r.__v&&(d.props=y,d.state=d.__s,d.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(e){e&&(e.__=t)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&a.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(y,d.__s,v),b&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(f,p,g)})}if(d.context=v,d.props=y,d.__P=e,d.__e=!1,S=fq.__r,E=0,b){for(d.state=d.__s,d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[]}else do d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++E<25)d.state=d.__s,null!=d.getChildContext&&(n=fZ(fZ({},n),d.getChildContext())),b&&!h&&null!=d.getSnapshotBeforeUpdate&&(g=d.getSnapshotBeforeUpdate(f,p)),f6(e,fY(T=null!=u&&u.type===f2&&null==u.key?u.props.children:u)?T:[T],t,r,n,i,s,a,o,l,c),d.base=t.__e,t.__u&=-161,d.__h.length&&a.push(d),m&&(d.__E=d.__=null)}catch(e){if(t.__v=null,l||null!=s){for(t.__u|=l?160:128;o&&8===o.nodeType&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,t.__e=o}else t.__e=r.__e,t.__k=r.__k;fq.__e(e,t,r)}else null==s&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,t,r,n,i,s,a,o,l){var c,u,d,h,f,p,g,m=r.props,y=t.props,b=t.type;if("svg"===b?i="http://www.w3.org/2000/svg":"math"===b?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=s){for(c=0;c<s.length;c++)if((f=s[c])&&"setAttribute"in f==!!b&&(b?f.localName===b:3===f.nodeType)){e=f,s[c]=null;break}}if(null==e){if(null===b)return document.createTextNode(y);e=document.createElementNS(i,b,y.is&&y),o&&(fq.__m&&fq.__m(t,s),o=!1),s=null}if(null===b)m===y||o&&e.data===y||(e.data=y);else{if(s=s&&fU.call(e.childNodes),m=r.props||fJ,!o&&null!=s)for(m={},c=0;c<e.attributes.length;c++)m[(f=e.attributes[c]).name]=f.value;for(c in m)if(f=m[c],"children"==c);else if("dangerouslySetInnerHTML"==c)d=f;else if(!(c in y)){if("value"==c&&"defaultValue"in y||"checked"==c&&"defaultChecked"in y)continue;f7(e,c,null,f,i)}for(c in y)f=y[c],"children"==c?h=f:"dangerouslySetInnerHTML"==c?u=f:"value"==c?p=f:"checked"==c?g=f:o&&"function"!=typeof f||m[c]===f||f7(e,c,f,m[c],i);if(u)o||d&&(u.__html===d.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),f6(e,fY(h)?h:[h],t,r,n,"foreignObject"===b?"http://www.w3.org/1999/xhtml":i,s,a,s?s[0]:r.__k&&f4(r,0),o,l),null!=s)for(c=s.length;c--;)f0(s[c]);o||(c="value","progress"===b&&null==p?e.removeAttribute("value"):void 0===p||p===e[c]&&("progress"!==b||p)&&("option"!==b||p===m[c])||f7(e,c,p,m[c],i),c="checked",void 0!==g&&g!==e[c]&&f7(e,c,g,m[c],i))}return e}(r.__e,t,r,n,i,s,a,l,c);(u=fq.diffed)&&u(t)}function pr(e,t,r){try{if("function"==typeof e){var n="function"==typeof e.__u;n&&e.__u(),n&&null==t||(e.__u=e(t))}else e.current=t}catch(e){fq.__e(e,r)}}function pn(e,t,r){return this.constructor(e,r)}fU=fG.slice,fq={__e:function(e,t,r,n){for(var i,s,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&null!=s.getDerivedStateFromError&&(i.setState(s.getDerivedStateFromError(e)),a=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,n||{}),a=i.__d),a)return i.__E=i}catch(t){e=t}throw e}},fB=0,f3.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=fZ({},this.state),"function"==typeof e&&(e=e(fZ({},r),this.props)),e&&fZ(r,e),null!=e&&this.__v&&(t&&this._sb.push(t),f5(this))},f3.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),f5(this))},f3.prototype.render=f2,fF=[],fH="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,fV=function(e,t){return e.__v.__b-t.__v.__b},f8.__r=0,fK=0,fW=pe(!1),fz=pe(!0);var pi=/[\s\n\\/='"\0<>]/,ps=/^(xlink|xmlns|xml)([A-Z])/,pa=/^accessK|^auto[A-Z]|^cell|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z]/,po=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,pl=new Set(["draggable","spellcheck"]),pc=/["&<]/;function pu(e){if(0===e.length||!1===pc.test(e))return e;for(var t=0,r=0,n="",i="";r<e.length;r++){switch(e.charCodeAt(r)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 60:i="&lt;";break;default:continue}r!==t&&(n+=e.slice(t,r)),n+=i,t=r+1}return r!==t&&(n+=e.slice(t,r)),n}var pd={},ph=new Set(["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","fill-opacity","flex","flex-grow","flex-negative","flex-order","flex-positive","flex-shrink","flood-opacity","font-weight","grid-column","grid-row","line-clamp","line-height","opacity","order","orphans","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","widows","z-index","zoom"]),pf=/[A-Z]/g;function pp(){this.__d=!0}function pg(e,t,r){if(!e.s){if(r instanceof pv){if(!r.s)return void(r.o=pg.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(pg.bind(null,e,t),pg.bind(null,e,2));e.s=t,e.v=r;let n=e.o;n&&n(e)}}var pm,py,pb,pw,pv=function(){function e(){}return e.prototype.then=function(t,r){var n=new e,i=this.s;if(i){var s=1&i?t:r;if(s){try{pg(n,1,s(this.v))}catch(e){pg(n,2,e)}return n}return this}return this.o=function(e){try{var i=e.v;1&e.s?pg(n,1,t?t(i):i):r?pg(n,1,r(i)):pg(n,2,i)}catch(e){pg(n,2,e)}},n},e}(),p_={},pS=[],pE=Array.isArray,px=Object.assign;function pT(e,t){var r,n=e.type,i=!0;return e.__c?(i=!1,(r=e.__c).state=r.__s):r=new n(e.props,t),e.__c=r,r.__v=e,r.props=e.props,r.context=t,r.__d=!0,null==r.state&&(r.state=p_),null==r.__s&&(r.__s=r.state),n.getDerivedStateFromProps?r.state=px({},r.state,n.getDerivedStateFromProps(r.props,r.state)):i&&r.componentWillMount?(r.componentWillMount(),r.state=r.__s!==r.state?r.__s:r.state):!i&&r.componentWillUpdate&&r.componentWillUpdate(),pb&&pb(e),r.render(r.props,r.state,t)}var pP=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),pA=0;function pO(e,t,r,n,i,s){t||(t={});var a,o,l=t;"ref"in t&&(a=t.ref,delete t.ref);var c={type:e,props:l,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--pA,__i:-1,__u:0,__source:i,__self:s};if("function"==typeof e&&(a=e.defaultProps))for(o in a)void 0===l[o]&&(l[o]=a[o]);return fq.vnode&&fq.vnode(c),c}async function pC(e,t){let r=window.SimpleWebAuthnBrowser;async function n(r){let n=new URL(`${e}/webauthn-options/${t}`);r&&n.searchParams.append("action",r),s().forEach(e=>{n.searchParams.append(e.name,e.value)});let i=await fetch(n);return i.ok?i.json():void console.error("Failed to fetch options",i)}function i(){let e=`#${t}-form`,r=document.querySelector(e);if(!r)throw Error(`Form '${e}' not found`);return r}function s(){return Array.from(i().querySelectorAll("input[data-form-field]"))}async function a(e,t){let r=i();if(e){let t=document.createElement("input");t.type="hidden",t.name="action",t.value=e,r.appendChild(t)}if(t){let e=document.createElement("input");e.type="hidden",e.name="data",e.value=JSON.stringify(t),r.appendChild(e)}return r.submit()}async function o(e,t){let n=await r.startAuthentication(e,t);return await a("authenticate",n)}async function l(e){s().forEach(e=>{if(e.required&&!e.value)throw Error(`Missing required field: ${e.name}`)});let t=await r.startRegistration(e);return await a("register",t)}async function c(){if(!r.browserSupportsWebAuthnAutofill())return;let e=await n("authenticate");if(!e)return void console.error("Failed to fetch option for autofill authentication");try{await o(e.options,!0)}catch(e){console.error(e)}}(async function(){let e=i();if(!r.browserSupportsWebAuthn()){e.style.display="none";return}e&&e.addEventListener("submit",async e=>{e.preventDefault();let t=await n(void 0);if(!t)return void console.error("Failed to fetch options for form submission");if("authenticate"===t.action)try{await o(t.options,!1)}catch(e){console.error(e)}else if("register"===t.action)try{await l(t.options)}catch(e){console.error(e)}})})(),c()}let pR={default:"Unable to sign in.",Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallbackError:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page."},pk=`:root {
  --border-width: 1px;
  --border-radius: 0.5rem;
  --color-error: #c94b4b;
  --color-info: #157efb;
  --color-info-hover: #0f6ddb;
  --color-info-text: #fff;
}

.__next-auth-theme-auto,
.__next-auth-theme-light {
  --color-background: #ececec;
  --color-background-hover: rgba(236, 236, 236, 0.8);
  --color-background-card: #fff;
  --color-text: #000;
  --color-primary: #444;
  --color-control-border: #bbb;
  --color-button-active-background: #f9f9f9;
  --color-button-active-border: #aaa;
  --color-separator: #ccc;
  --provider-bg: #fff;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #fff
  );
}

.__next-auth-theme-dark {
  --color-background: #161b22;
  --color-background-hover: rgba(22, 27, 34, 0.8);
  --color-background-card: #0d1117;
  --color-text: #fff;
  --color-primary: #ccc;
  --color-control-border: #555;
  --color-button-active-background: #060606;
  --color-button-active-border: #666;
  --color-separator: #444;
  --provider-bg: #161b22;
  --provider-bg-hover: color-mix(
    in srgb,
    var(--provider-brand-color) 30%,
    #000
  );
}

.__next-auth-theme-dark img[src$="42-school.svg"],
  .__next-auth-theme-dark img[src$="apple.svg"],
  .__next-auth-theme-dark img[src$="boxyhq-saml.svg"],
  .__next-auth-theme-dark img[src$="eveonline.svg"],
  .__next-auth-theme-dark img[src$="github.svg"],
  .__next-auth-theme-dark img[src$="mailchimp.svg"],
  .__next-auth-theme-dark img[src$="medium.svg"],
  .__next-auth-theme-dark img[src$="okta.svg"],
  .__next-auth-theme-dark img[src$="patreon.svg"],
  .__next-auth-theme-dark img[src$="ping-id.svg"],
  .__next-auth-theme-dark img[src$="roblox.svg"],
  .__next-auth-theme-dark img[src$="threads.svg"],
  .__next-auth-theme-dark img[src$="wikimedia.svg"] {
    filter: invert(1);
  }

.__next-auth-theme-dark #submitButton {
    background-color: var(--provider-bg, var(--color-info));
  }

@media (prefers-color-scheme: dark) {
  .__next-auth-theme-auto {
    --color-background: #161b22;
    --color-background-hover: rgba(22, 27, 34, 0.8);
    --color-background-card: #0d1117;
    --color-text: #fff;
    --color-primary: #ccc;
    --color-control-border: #555;
    --color-button-active-background: #060606;
    --color-button-active-border: #666;
    --color-separator: #444;
    --provider-bg: #161b22;
    --provider-bg-hover: color-mix(
      in srgb,
      var(--provider-brand-color) 30%,
      #000
    );
  }
    .__next-auth-theme-auto img[src$="42-school.svg"],
    .__next-auth-theme-auto img[src$="apple.svg"],
    .__next-auth-theme-auto img[src$="boxyhq-saml.svg"],
    .__next-auth-theme-auto img[src$="eveonline.svg"],
    .__next-auth-theme-auto img[src$="github.svg"],
    .__next-auth-theme-auto img[src$="mailchimp.svg"],
    .__next-auth-theme-auto img[src$="medium.svg"],
    .__next-auth-theme-auto img[src$="okta.svg"],
    .__next-auth-theme-auto img[src$="patreon.svg"],
    .__next-auth-theme-auto img[src$="ping-id.svg"],
    .__next-auth-theme-auto img[src$="roblox.svg"],
    .__next-auth-theme-auto img[src$="threads.svg"],
    .__next-auth-theme-auto img[src$="wikimedia.svg"] {
      filter: invert(1);
    }
    .__next-auth-theme-auto #submitButton {
      background-color: var(--provider-bg, var(--color-info));
    }
}

html {
  box-sizing: border-box;
}

*,
*:before,
*:after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  background-color: var(--color-background);
  margin: 0;
  padding: 0;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Noto Sans",
    sans-serif,
    "Apple Color Emoji",
    "Segoe UI Emoji",
    "Segoe UI Symbol",
    "Noto Color Emoji";
}

h1 {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  font-weight: 400;
  color: var(--color-text);
}

p {
  margin-bottom: 1.5rem;
  padding: 0 1rem;
  color: var(--color-text);
}

form {
  margin: 0;
  padding: 0;
}

label {
  font-weight: 500;
  text-align: left;
  margin-bottom: 0.25rem;
  display: block;
  color: var(--color-text);
}

input[type] {
  box-sizing: border-box;
  display: block;
  width: 100%;
  padding: 0.5rem 1rem;
  border: var(--border-width) solid var(--color-control-border);
  background: var(--color-background-card);
  font-size: 1rem;
  border-radius: var(--border-radius);
  color: var(--color-text);
}

p {
  font-size: 1.1rem;
  line-height: 2rem;
}

a.button {
  text-decoration: none;
  line-height: 1rem;
}

a.button:link,
  a.button:visited {
    background-color: var(--color-background);
    color: var(--color-primary);
  }

button,
a.button {
  padding: 0.75rem 1rem;
  color: var(--provider-color, var(--color-primary));
  background-color: var(--provider-bg, var(--color-background));
  border: 1px solid #00000031;
  font-size: 0.9rem;
  height: 50px;
  border-radius: var(--border-radius);
  transition: background-color 250ms ease-in-out;
  font-weight: 300;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

:is(button,a.button):hover {
    background-color: var(--provider-bg-hover, var(--color-background-hover));
    cursor: pointer;
  }

:is(button,a.button):active {
    cursor: pointer;
  }

:is(button,a.button) span {
    color: var(--provider-bg);
  }

#submitButton {
  color: var(--button-text-color, var(--color-info-text));
  background-color: var(--brand-color, var(--color-info));
  width: 100%;
}

#submitButton:hover {
    background-color: var(
      --button-hover-bg,
      var(--color-info-hover)
    ) !important;
  }

a.site {
  color: var(--color-primary);
  text-decoration: none;
  font-size: 1rem;
  line-height: 2rem;
}

a.site:hover {
    text-decoration: underline;
  }

.page {
  position: absolute;
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.page > div {
    text-align: center;
  }

.error a.button {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-top: 0.5rem;
  }

.error .message {
    margin-bottom: 1.5rem;
  }

.signin input[type="text"] {
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

.signin hr {
    display: block;
    border: 0;
    border-top: 1px solid var(--color-separator);
    margin: 2rem auto 1rem auto;
    overflow: visible;
  }

.signin hr::before {
      content: "or";
      background: var(--color-background-card);
      color: #888;
      padding: 0 0.4rem;
      position: relative;
      top: -0.7rem;
    }

.signin .error {
    background: #f5f5f5;
    font-weight: 500;
    border-radius: 0.3rem;
    background: var(--color-error);
  }

.signin .error p {
      text-align: left;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      line-height: 1.2rem;
      color: var(--color-info-text);
    }

.signin > div,
  .signin form {
    display: block;
  }

.signin > div input[type], .signin form input[type] {
      margin-bottom: 0.5rem;
    }

.signin > div button, .signin form button {
      width: 100%;
    }

.signin .provider + .provider {
    margin-top: 1rem;
  }

.logo {
  display: inline-block;
  max-width: 150px;
  margin: 1.25rem 0;
  max-height: 70px;
}

.card {
  background-color: var(--color-background-card);
  border-radius: 1rem;
  padding: 1.25rem 2rem;
}

.card .header {
    color: var(--color-primary);
  }

.card input[type]::-moz-placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type]::placeholder {
    color: color-mix(
      in srgb,
      var(--color-text) 20%,
      var(--color-button-active-background)
    );
  }

.card input[type] {
    background: color-mix(in srgb, var(--color-background-card) 95%, black);
  }

.section-header {
  color: var(--color-text);
}

@media screen and (min-width: 450px) {
  .card {
    margin: 2rem 0;
    width: 368px;
  }
}

@media screen and (max-width: 450px) {
  .card {
    margin: 1rem 0;
    width: 343px;
  }
}
`;function pN({html:e,title:t,status:r,cookies:n,theme:i,headTags:s}){return{cookies:n,status:r,headers:{"Content-Type":"text/html"},body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${pk}</style><title>${t}</title>${s??""}</head><body class="__next-auth-theme-${i?.colorScheme??"auto"}"><div class="page">${function(e,t,r){var n=fq.__s;fq.__s=!0,pm=fq.__b,py=fq.diffed,pb=fq.__r,pw=fq.unmount;var i=function(e,t,r){var n,i,s,a={};for(s in t)"key"==s?n=t[s]:"ref"==s?i=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?fU.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return f1(e,a,n,i,null)}(f2,null);i.__k=[e];try{var s=function e(t,r,n,i,s,a,o){if(null==t||!0===t||!1===t||""===t)return"";var l=typeof t;if("object"!=l)return"function"==l?"":"string"==l?pu(t):t+"";if(pE(t)){var c,u="";s.__k=t;for(var d=0;d<t.length;d++){var h=t[d];if(null!=h&&"boolean"!=typeof h){var f,p=e(h,r,n,i,s,a,o);"string"==typeof p?u+=p:(c||(c=[]),u&&c.push(u),u="",pE(p)?(f=c).push.apply(f,p):c.push(p))}}return c?(u&&c.push(u),c):u}if(void 0!==t.constructor)return"";t.__=s,pm&&pm(t);var g=t.type,m=t.props;if("function"==typeof g){var y,b,w,v=r;if(g===f2){if("tpl"in m){for(var _="",S=0;S<m.tpl.length;S++)if(_+=m.tpl[S],m.exprs&&S<m.exprs.length){var E=m.exprs[S];if(null==E)continue;"object"==typeof E&&(void 0===E.constructor||pE(E))?_+=e(E,r,n,i,t,a,o):_+=E}return _}if("UNSTABLE_comment"in m)return"<!--"+pu(m.UNSTABLE_comment)+"-->";b=m.children}else{if(null!=(y=g.contextType)){var x=r[y.__c];v=x?x.props.value:y.__}var T=g.prototype&&"function"==typeof g.prototype.render;if(T)b=pT(t,v),w=t.__c;else{t.__c=w={__v:t,context:v,props:t.props,setState:pp,forceUpdate:pp,__d:!0,__h:[]};for(var P=0;w.__d&&P++<25;)w.__d=!1,pb&&pb(t),b=g.call(w,m,v);w.__d=!0}if(null!=w.getChildContext&&(r=px({},r,w.getChildContext())),T&&fq.errorBoundaries&&(g.getDerivedStateFromError||w.componentDidCatch)){b=null!=b&&b.type===f2&&null==b.key&&null==b.props.tpl?b.props.children:b;try{return e(b,r,n,i,t,a,o)}catch(s){return g.getDerivedStateFromError&&(w.__s=g.getDerivedStateFromError(s)),w.componentDidCatch&&w.componentDidCatch(s,p_),w.__d?(b=pT(t,r),null!=(w=t.__c).getChildContext&&(r=px({},r,w.getChildContext())),e(b=null!=b&&b.type===f2&&null==b.key&&null==b.props.tpl?b.props.children:b,r,n,i,t,a,o)):""}finally{py&&py(t),t.__=null,pw&&pw(t)}}}b=null!=b&&b.type===f2&&null==b.key&&null==b.props.tpl?b.props.children:b;try{var A=e(b,r,n,i,t,a,o);return py&&py(t),t.__=null,fq.unmount&&fq.unmount(t),A}catch(s){if(!a&&o&&o.onError){var O=o.onError(s,t,function(s){return e(s,r,n,i,t,a,o)});if(void 0!==O)return O;var C=fq.__e;return C&&C(s,t),""}if(!a||!s||"function"!=typeof s.then)throw s;return s.then(function s(){try{return e(b,r,n,i,t,a,o)}catch(l){if(!l||"function"!=typeof l.then)throw l;return l.then(function(){return e(b,r,n,i,t,a,o)},s)}})}}var R,k="<"+g,N="";for(var I in m){var $=m[I];if("function"!=typeof $||"class"===I||"className"===I){switch(I){case"children":R=$;continue;case"key":case"ref":case"__self":case"__source":continue;case"htmlFor":if("for"in m)continue;I="for";break;case"className":if("class"in m)continue;I="class";break;case"defaultChecked":I="checked";break;case"defaultSelected":I="selected";break;case"defaultValue":case"value":switch(I="value",g){case"textarea":R=$;continue;case"select":i=$;continue;case"option":i!=$||"selected"in m||(k+=" selected")}break;case"dangerouslySetInnerHTML":N=$&&$.__html;continue;case"style":"object"==typeof $&&($=function(e){var t="";for(var r in e){var n=e[r];if(null!=n&&""!==n){var i="-"==r[0]?r:pd[r]||(pd[r]=r.replace(pf,"-$&").toLowerCase()),s=";";"number"!=typeof n||i.startsWith("--")||ph.has(i)||(s="px;"),t=t+i+":"+n+s}}return t||void 0}($));break;case"acceptCharset":I="accept-charset";break;case"httpEquiv":I="http-equiv";break;default:if(ps.test(I))I=I.replace(ps,"$1:$2").toLowerCase();else{if(pi.test(I))continue;("-"===I[4]||pl.has(I))&&null!=$?$+="":n?po.test(I)&&(I="panose1"===I?"panose-1":I.replace(/([A-Z])/g,"-$1").toLowerCase()):pa.test(I)&&(I=I.toLowerCase())}}null!=$&&!1!==$&&(k=!0===$||""===$?k+" "+I:k+" "+I+'="'+("string"==typeof $?pu($):$+"")+'"')}}if(pi.test(g))throw Error(g+" is not a valid HTML tag name in "+k+">");if(N||("string"==typeof R?N=pu(R):null!=R&&!1!==R&&!0!==R&&(N=e(R,r,"svg"===g||"foreignObject"!==g&&n,i,t,a,o))),py&&py(t),t.__=null,pw&&pw(t),!N&&pP.has(g))return k+"/>";var j="</"+g+">",D=k+">";return pE(N)?[D].concat(N,[j]):"string"!=typeof N?[D,N,j]:D+N+j}(e,p_,!1,void 0,i,!1,void 0);return pE(s)?s.join(""):s}catch(e){if(e.then)throw Error('Use "renderToStringAsync" for suspenseful rendering.');throw e}finally{fq.__c&&fq.__c(e,pS),fq.__s=n,pS.length=0}}(e)}</div></body></html>`}}function pI(e){let{url:t,theme:r,query:n,cookies:i,pages:s,providers:a}=e;return{csrf:(e,t,r)=>e?(t.logger.warn("csrf-disabled"),r.push({name:t.cookies.csrfToken.name,value:"",options:{...t.cookies.csrfToken.options,maxAge:0}}),{status:404,cookies:r}):{headers:{"Content-Type":"application/json","Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"},body:{csrfToken:t.csrfToken},cookies:r},providers:e=>({headers:{"Content-Type":"application/json"},body:e.reduce((e,{id:t,name:r,type:n,signinUrl:i,callbackUrl:s})=>(e[t]={id:t,name:r,type:n,signinUrl:i,callbackUrl:s},e),{})}),signin(t,o){if(t)throw new uX("Unsupported action");if(s?.signIn){let t=`${s.signIn}${s.signIn.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:e.callbackUrl??"/"})}`;return o&&(t=`${t}&${new URLSearchParams({error:o})}`),{redirect:t,cookies:i}}let l=a?.find(e=>"webauthn"===e.type&&e.enableConditionalUI&&!!e.simpleWebAuthnBrowserVersion),c="";if(l){let{simpleWebAuthnBrowserVersion:e}=l;c=`<script src="https://unpkg.com/@simplewebauthn/browser@${e}/dist/bundle/index.umd.min.js" crossorigin="anonymous"></script>`}return pN({cookies:i,theme:r,html:function(e){let{csrfToken:t,providers:r=[],callbackUrl:n,theme:i,email:s,error:a}=e;"u">typeof document&&i?.brandColor&&document.documentElement.style.setProperty("--brand-color",i.brandColor),"u">typeof document&&i?.buttonText&&document.documentElement.style.setProperty("--button-text-color",i.buttonText);let o=a&&(pR[a]??pR.default),l=r.find(e=>"webauthn"===e.type&&e.enableConditionalUI)?.id;return pO("div",{className:"signin",children:[i?.brandColor&&pO("style",{dangerouslySetInnerHTML:{__html:`:root {--brand-color: ${i.brandColor}}`}}),i?.buttonText&&pO("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),pO("div",{className:"card",children:[o&&pO("div",{className:"error",children:pO("p",{children:o})}),i?.logo&&pO("img",{src:i.logo,alt:"Logo",className:"logo"}),r.map((e,i)=>{let a,o,l;("oauth"===e.type||"oidc"===e.type)&&({bg:a="#fff",brandColor:o,logo:l=`https://authjs.dev/img/providers/${e.id}.svg`}=e.style??{});let c=o??a??"#fff";return pO("div",{className:"provider",children:["oauth"===e.type||"oidc"===e.type?pO("form",{action:e.signinUrl,method:"POST",children:[pO("input",{type:"hidden",name:"csrfToken",value:t}),n&&pO("input",{type:"hidden",name:"callbackUrl",value:n}),pO("button",{type:"submit",className:"button",style:{"--provider-brand-color":c},tabIndex:0,children:[pO("span",{style:{filter:"invert(1) grayscale(1) brightness(1.3) contrast(9000)","mix-blend-mode":"luminosity",opacity:.95},children:["Sign in with ",e.name]}),l&&pO("img",{loading:"lazy",height:24,src:l})]})]}):null,("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i>0&&"email"!==r[i-1].type&&"credentials"!==r[i-1].type&&"webauthn"!==r[i-1].type&&pO("hr",{}),"email"===e.type&&pO("form",{action:e.signinUrl,method:"POST",children:[pO("input",{type:"hidden",name:"csrfToken",value:t}),pO("label",{className:"section-header",htmlFor:`input-email-for-${e.id}-provider`,children:"Email"}),pO("input",{id:`input-email-for-${e.id}-provider`,autoFocus:!0,type:"email",name:"email",value:s,placeholder:"email@example.com",required:!0}),pO("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"credentials"===e.type&&pO("form",{action:e.callbackUrl,method:"POST",children:[pO("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.credentials).map(t=>pO("div",{children:[pO("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.credentials[t].label??t}),pO("input",{name:t,id:`input-${t}-for-${e.id}-provider`,type:e.credentials[t].type??"text",placeholder:e.credentials[t].placeholder??"",...e.credentials[t]})]},`input-group-${e.id}`)),pO("button",{id:"submitButton",type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),"webauthn"===e.type&&pO("form",{action:e.callbackUrl,method:"POST",id:`${e.id}-form`,children:[pO("input",{type:"hidden",name:"csrfToken",value:t}),Object.keys(e.formFields).map(t=>pO("div",{children:[pO("label",{className:"section-header",htmlFor:`input-${t}-for-${e.id}-provider`,children:e.formFields[t].label??t}),pO("input",{name:t,"data-form-field":!0,id:`input-${t}-for-${e.id}-provider`,type:e.formFields[t].type??"text",placeholder:e.formFields[t].placeholder??"",...e.formFields[t]})]},`input-group-${e.id}`)),pO("button",{id:`submitButton-${e.id}`,type:"submit",tabIndex:0,children:["Sign in with ",e.name]})]}),("email"===e.type||"credentials"===e.type||"webauthn"===e.type)&&i+1<r.length&&pO("hr",{})]},e.id)})]}),l&&pO(f2,{children:pO("script",{dangerouslySetInnerHTML:{__html:`
const currentURL = window.location.href;
const authURL = currentURL.substring(0, currentURL.lastIndexOf('/'));
(${pC})(authURL, "${l}");
`}})})]})}({csrfToken:e.csrfToken,providers:e.providers?.filter(e=>["email","oauth","oidc"].includes(e.type)||"credentials"===e.type&&e.credentials||"webauthn"===e.type&&e.formFields||!1),callbackUrl:e.callbackUrl,theme:e.theme,error:o,...n}),title:"Sign In",headTags:c})},signout:()=>s?.signOut?{redirect:s.signOut,cookies:i}:pN({cookies:i,theme:r,html:function(e){let{url:t,csrfToken:r,theme:n}=e;return pO("div",{className:"signout",children:[n?.brandColor&&pO("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n.brandColor}
        }
      `}}),n?.buttonText&&pO("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${n.buttonText}
        }
      `}}),pO("div",{className:"card",children:[n?.logo&&pO("img",{src:n.logo,alt:"Logo",className:"logo"}),pO("h1",{children:"Signout"}),pO("p",{children:"Are you sure you want to sign out?"}),pO("form",{action:t?.toString(),method:"POST",children:[pO("input",{type:"hidden",name:"csrfToken",value:r}),pO("button",{id:"submitButton",type:"submit",children:"Sign out"})]})]})]})}({csrfToken:e.csrfToken,url:t,theme:r}),title:"Sign Out"}),verifyRequest:e=>s?.verifyRequest?{redirect:`${s.verifyRequest}${t?.search??""}`,cookies:i}:pN({cookies:i,theme:r,html:function(e){let{url:t,theme:r}=e;return pO("div",{className:"verify-request",children:[r.brandColor&&pO("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${r.brandColor}
        }
      `}}),pO("div",{className:"card",children:[r.logo&&pO("img",{src:r.logo,alt:"Logo",className:"logo"}),pO("h1",{children:"Check your email"}),pO("p",{children:"A sign in link has been sent to your email address."}),pO("p",{children:pO("a",{className:"site",href:t.origin,children:t.host})})]})]})}({url:t,theme:r,...e}),title:"Verify Request"}),error:e=>s?.error?{redirect:`${s.error}${s.error.includes("?")?"&":"?"}error=${e}`,cookies:i}:pN({cookies:i,theme:r,...function(e){let{url:t,error:r="default",theme:n}=e,i=`${t}/signin`,s={default:{status:200,heading:"Error",message:pO("p",{children:pO("a",{className:"site",href:t?.origin,children:t?.host})})},Configuration:{status:500,heading:"Server error",message:pO("div",{children:[pO("p",{children:"There is a problem with the server configuration."}),pO("p",{children:"Check the server logs for more information."})]})},AccessDenied:{status:403,heading:"Access Denied",message:pO("div",{children:[pO("p",{children:"You do not have permission to sign in."}),pO("p",{children:pO("a",{className:"button",href:i,children:"Sign in"})})]})},Verification:{status:403,heading:"Unable to sign in",message:pO("div",{children:[pO("p",{children:"The sign in link is no longer valid."}),pO("p",{children:"It may have been used already or it may have expired."})]}),signin:pO("a",{className:"button",href:i,children:"Sign in"})}},{status:a,heading:o,message:l,signin:c}=s[r]??s.default;return{status:a,html:pO("div",{className:"error",children:[n?.brandColor&&pO("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${n?.brandColor}
        }
      `}}),pO("div",{className:"card",children:[n?.logo&&pO("img",{src:n?.logo,alt:"Logo",className:"logo"}),pO("h1",{children:o}),pO("div",{className:"message",children:l}),c]})]})}}({url:t,theme:r,error:e}),title:"Error"})}}function p$(e,t=Date.now()){return new Date(t+1e3*e)}async function pj(e,t,r,n){if(!r?.providerAccountId||!r.type)throw Error("Missing or invalid provider account");if(!["email","oauth","oidc","webauthn"].includes(r.type))throw Error("Provider not supported");let{adapter:i,jwt:s,events:a,session:{strategy:o,generateSessionToken:l}}=n;if(!i)return{user:t,account:r};let c=r,{createUser:u,updateUser:d,getUser:h,getUserByAccount:f,getUserByEmail:p,linkAccount:g,createSession:m,getSessionAndUser:y,deleteSession:b}=i,w=null,v=null,_=!1,S="jwt"===o;if(e)if(S)try{let t=n.cookies.sessionToken.name;(w=await s.decode({...s,token:e,salt:t}))&&"sub"in w&&w.sub&&(v=await h(w.sub))}catch{}else{let t=await y(e);t&&(w=t.session,v=t.user)}if("email"===c.type){let r=await p(t.email);return r?(v?.id!==r.id&&!S&&e&&await b(e),v=await d({id:r.id,emailVerified:new Date}),await a.updateUser?.({user:v})):(v=await u({...t,emailVerified:new Date}),await a.createUser?.({user:v}),_=!0),{session:w=S?{}:await m({sessionToken:l(),userId:v.id,expires:p$(n.session.maxAge)}),user:v,isNewUser:_}}if("webauthn"===c.type){let e=await f({providerAccountId:c.providerAccountId,provider:c.provider});if(e){if(v){if(e.id===v.id){let e={...c,userId:v.id};return{session:w,user:v,isNewUser:_,account:e}}throw new u6("The account is already associated with another user",{provider:c.provider})}w=S?{}:await m({sessionToken:l(),userId:e.id,expires:p$(n.session.maxAge)});let t={...c,userId:e.id};return{session:w,user:e,isNewUser:_,account:t}}{if(v){await g({...c,userId:v.id}),await a.linkAccount?.({user:v,account:c,profile:t});let e={...c,userId:v.id};return{session:w,user:v,isNewUser:_,account:e}}if(t.email?await p(t.email):null)throw new u6("Another account already exists with the same e-mail address",{provider:c.provider});v=await u({...t}),await a.createUser?.({user:v}),await g({...c,userId:v.id}),await a.linkAccount?.({user:v,account:c,profile:t}),w=S?{}:await m({sessionToken:l(),userId:v.id,expires:p$(n.session.maxAge)});let e={...c,userId:v.id};return{session:w,user:v,isNewUser:!0,account:e}}}let E=await f({providerAccountId:c.providerAccountId,provider:c.provider});if(E){if(v){if(E.id===v.id)return{session:w,user:v,isNewUser:_};throw new uK("The account is already associated with another user",{provider:c.provider})}return{session:w=S?{}:await m({sessionToken:l(),userId:E.id,expires:p$(n.session.maxAge)}),user:E,isNewUser:_}}{let{provider:e}=n,{type:r,provider:i,providerAccountId:s,userId:o,...d}=c;if(c=Object.assign(e.account(d)??{},{providerAccountId:s,provider:i,type:r,userId:o}),v)return await g({...c,userId:v.id}),await a.linkAccount?.({user:v,account:c,profile:t}),{session:w,user:v,isNewUser:_};let h=t.email?await p(t.email):null;if(h){let e=n.provider;if(e?.allowDangerousEmailAccountLinking)v=h,_=!1;else throw new uK("Another account already exists with the same e-mail address",{provider:c.provider})}else v=await u({...t,emailVerified:null}),_=!0;return await a.createUser?.({user:v}),await g({...c,userId:v.id}),await a.linkAccount?.({user:v,account:c,profile:t}),{session:w=S?{}:await m({sessionToken:l(),userId:v.id,expires:p$(n.session.maxAge)}),user:v,isNewUser:_}}}function pD(e,t){if(null==e)return!1;try{return e instanceof t||Object.getPrototypeOf(e)[Symbol.toStringTag]===t.prototype[Symbol.toStringTag]}catch{return!1}}("u"<typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(a="oauth4webapi/v3.8.3");let pL="ERR_INVALID_ARG_VALUE",pM="ERR_INVALID_ARG_TYPE";function pU(e,t,r){let n=TypeError(e,{cause:r});return Object.assign(n,{code:t}),n}let pq=Symbol(),pB=Symbol(),pF=Symbol(),pQ=Symbol(),pH=Symbol(),pV=Symbol();Symbol();let pK=new TextEncoder,pW=new TextDecoder;function pz(e){return"string"==typeof e?pK.encode(e):pW.decode(e)}function pJ(e){return"string"==typeof e?l(e):o(e)}o=Uint8Array.prototype.toBase64?e=>(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e.toBase64({alphabet:"base64url",omitPadding:!0})):e=>{e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t=[];for(let r=0;r<e.byteLength;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return btoa(t.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},l=Uint8Array.fromBase64?e=>{try{return Uint8Array.fromBase64(e,{alphabet:"base64url"})}catch(e){throw pU("The input to be decoded is not correctly encoded.",pL,e)}}:e=>{try{let t=atob(e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}catch(e){throw pU("The input to be decoded is not correctly encoded.",pL,e)}};class pG extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=gX,Error.captureStackTrace?.(this,this.constructor)}}class pX extends Error{code;constructor(e,t){super(e,t),this.name=this.constructor.name,t?.code&&(this.code=t?.code),Error.captureStackTrace?.(this,this.constructor)}}function pY(e,t,r){return new pX(e,{code:t,cause:r})}function pZ(e){return!(null===e||"object"!=typeof e||Array.isArray(e))}function p0(e){pD(e,Headers)&&(e=Object.fromEntries(e.entries()));let t=new Headers(e??{});if(a&&!t.has("user-agent")&&t.set("user-agent",a),t.has("authorization"))throw pU('"options.headers" must not include the "authorization" header name',pL);return t}function p1(e,t){if(void 0!==t){if("function"==typeof t&&(t=t(e.href)),!(t instanceof AbortSignal))throw pU('"options.signal" must return or be an instance of AbortSignal',pM);return t}}function p2(e){return e.includes("//")?e.replace("//","/"):e}async function p3(e,t,r,n){if(!(e instanceof URL))throw pU(`"${t}" must be an instance of URL`,pM);gc(e,n?.[pq]!==!0);let i=r(new URL(e.href)),s=p0(n?.headers);return s.set("accept","application/json"),(n?.[pQ]||fetch)(i.href,{body:void 0,headers:Object.fromEntries(s.entries()),method:"GET",redirect:"manual",signal:p1(i,n?.signal)})}async function p4(e,t){return p3(e,"issuerIdentifier",e=>{switch(t?.algorithm){case void 0:case"oidc":e.pathname=p2(`${e.pathname}/.well-known/openid-configuration`);break;case"oauth2":!function(e,t,r=!1){"/"===e.pathname?e.pathname=t:e.pathname=p2(`${t}/${r?e.pathname:e.pathname.replace(/(\/)$/,"")}`)}(e,".well-known/oauth-authorization-server");break;default:throw pU('"options.algorithm" must be "oidc" (default), or "oauth2"',pL)}return e},t)}function p5(e,t,r,n,i){try{if("number"!=typeof e||!Number.isFinite(e))throw pU(`${r} must be a number`,pM,i);if(e>0)return;if(t){if(0!==e)throw pU(`${r} must be a non-negative number`,pL,i);return}throw pU(`${r} must be a positive number`,pL,i)}catch(e){if(n)throw pY(e.message,n,i);throw e}}function p8(e,t,r,n){try{if("string"!=typeof e)throw pU(`${t} must be a string`,pM,n);if(0===e.length)throw pU(`${t} must not be empty`,pL,n)}catch(e){if(r)throw pY(e.message,r,n);throw e}}async function p6(e,t){if(!(e instanceof URL)&&e!==mc)throw pU('"expectedIssuerIdentifier" must be an instance of URL',pM);if(!pD(t,Response))throw pU('"response" must be an instance of Response',pM);if(200!==t.status)throw pY('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',g3,t);mt(t);let r=await ml(t);if(p8(r.issuer,'"response" body "issuer" property',g1,{body:r}),e!==mc&&new URL(r.issuer).href!==e.href)throw pY('"response" body "issuer" property does not match the expected value',g9,{expected:e.href,body:r,attribute:"issuer"});return r}function p9(e){var t=e,r="application/json";if(gP(t)!==r)throw function(e,...t){let r='"response" content-type must be ';if(t.length>2){let e=t.pop();r+=`${t.join(", ")}, or ${e}`}else 2===t.length?r+=`${t[0]} or ${t[1]}`:r+=t[0];return pY(r,g2,e)}(t,r)}function p7(){return pJ(crypto.getRandomValues(new Uint8Array(32)))}async function ge(e){return p8(e,"codeVerifier"),pJ(await crypto.subtle.digest("SHA-256",pz(e)))}function gt(e){let t=e?.[pB];return"number"==typeof t&&Number.isFinite(t)?t:0}function gr(e){let t=e?.[pF];return"number"==typeof t&&Number.isFinite(t)&&-1!==Math.sign(t)?t:30}function gn(){return Math.floor(Date.now()/1e3)}function gi(e){if("object"!=typeof e||null===e)throw pU('"as" must be an object',pM);p8(e.issuer,'"as.issuer"')}function gs(e){if("object"!=typeof e||null===e)throw pU('"client" must be an object',pM);p8(e.client_id,'"client.client_id"')}function ga(e,t){let r=gn()+gt(t);return{jti:p7(),aud:e.issuer,exp:r+60,iat:r,nbf:r,iss:t.client_id,sub:t.client_id}}async function go(e,t,r){if(!r.usages.includes("sign"))throw pU('CryptoKey instances used for signing assertions must include "sign" in their "usages"',pL);let n=`${pJ(pz(JSON.stringify(e)))}.${pJ(pz(JSON.stringify(t)))}`,i=pJ(await crypto.subtle.sign(function(e){switch(e.algorithm.name){case"ECDSA":return{name:e.algorithm.name,hash:function(e){let{algorithm:t}=e;switch(t.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new pG("unsupported ECDSA namedCurve",{cause:e})}}(e)};case"RSA-PSS":switch(mr(e),e.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:e.algorithm.name,saltLength:parseInt(e.algorithm.hash.name.slice(-3),10)>>3};default:throw new pG("unsupported RSA-PSS hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":return mr(e),e.algorithm.name;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":case"Ed25519":return e.algorithm.name}throw new pG("unsupported CryptoKey algorithm name",{cause:e})}(r),r,pz(n)));return`${n}.${i}`}let gl=URL.parse?(e,t)=>URL.parse(e,t):(e,t)=>{try{return new URL(e,t)}catch{return null}};function gc(e,t){if(t&&"https:"!==e.protocol)throw pY("only requests to HTTPS are allowed",g4,e);if("https:"!==e.protocol&&"http:"!==e.protocol)throw pY("only HTTP and HTTPS requests are allowed",g5,e)}function gu(e,t,r,n){let i;if("string"!=typeof e||!(i=gl(e)))throw pY(`authorization server metadata does not contain a valid ${r?`"as.mtls_endpoint_aliases.${t}"`:`"as.${t}"`}`,void 0===e?g7:me,{attribute:r?`mtls_endpoint_aliases.${t}`:t});return gc(i,n),i}function gd(e,t,r,n){return r&&e.mtls_endpoint_aliases&&t in e.mtls_endpoint_aliases?gu(e.mtls_endpoint_aliases[t],t,r,n):gu(e[t],t,r,n)}class gh extends Error{cause;code;error;status;error_description;response;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=gG,this.cause=t.cause,this.error=t.cause.error,this.status=t.response.status,this.error_description=t.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:t.response}),Error.captureStackTrace?.(this,this.constructor)}}class gf extends Error{cause;code;error;error_description;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=gY,this.cause=t.cause,this.error=t.cause.get("error"),this.error_description=t.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class gp extends Error{cause;code;response;status;constructor(e,t){super(e,t),this.name=this.constructor.name,this.code=gJ,this.cause=t.cause,this.status=t.response.status,this.response=t.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let gg="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",gm=RegExp("^[,\\s]*("+gg+")"),gy=RegExp("^[,\\s]*("+gg+')\\s*=\\s*"((?:[^"\\\\]|\\\\[\\s\\S])*)"[,\\s]*(.*)'),gb=RegExp("^[,\\s]*"+("("+gg+")\\s*=\\s*(")+gg+")[,\\s]*(.*)"),gw=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+={0,2})(?:$|[,\\s])(.*)");async function gv(e){if(e.status>399&&e.status<500){mt(e),p9(e);try{let t=await e.clone().json();if(pZ(t)&&"string"==typeof t.error&&t.error.length)return t}catch{}}}async function g_(e,t,r){if(e.status!==t){let t;if(g$(e),t=await gv(e))throw await e.body?.cancel(),new gh("server responded with an error in the response body",{cause:t,response:e});throw pY(`"response" is not a conform ${r} response (unexpected HTTP status code)`,g3,e)}}function gS(e){if(!gU.has(e))throw pU('"options.DPoP" is not a valid DPoPHandle',pL)}async function gE(e,t,r,n,i,s){if(p8(e,'"accessToken"'),!(r instanceof URL))throw pU('"url" must be an instance of URL',pM);gc(r,s?.[pq]!==!0),n=p0(n),s?.DPoP&&(gS(s.DPoP),await s.DPoP.addProof(r,n,t.toUpperCase(),e)),n.set("authorization",`${n.has("dpop")?"DPoP":"Bearer"} ${e}`);let a=await (s?.[pQ]||fetch)(r.href,{body:i,headers:Object.fromEntries(n.entries()),method:t,redirect:"manual",signal:p1(r,s?.signal)});return s?.DPoP?.cacheNonce(a,r),a}async function gx(e,t,r,n){gi(e),gs(t);let i=gd(e,"userinfo_endpoint",t.use_mtls_endpoint_aliases,n?.[pq]!==!0),s=p0(n?.headers);return t.userinfo_signed_response_alg?s.set("accept","application/jwt"):(s.set("accept","application/json"),s.append("accept","application/jwt")),gE(r,"GET",i,s,null,{...n,[pB]:gt(t)})}let gT=Symbol();function gP(e){return e.headers.get("content-type")?.split(";")[0]}async function gA(e,t,r,n,i){let s;if(gi(e),gs(t),!pD(n,Response))throw pU('"response" must be an instance of Response',pM);if(g$(n),200!==n.status)throw pY('"response" is not a conform UserInfo Endpoint response (unexpected HTTP status code)',g3,n);if(mt(n),"application/jwt"===gP(n)){let{claims:r,jwt:a}=await mn(await n.text(),mi.bind(void 0,t.userinfo_signed_response_alg,e.userinfo_signing_alg_values_supported,void 0),gt(t),gr(t),i?.[pV]).then(gj.bind(void 0,t.client_id)).then(gL.bind(void 0,e));gk.set(n,a),s=r}else{if(t.userinfo_signed_response_alg)throw pY("JWT UserInfo Response expected",gZ,n);s=await ml(n)}if(p8(s.sub,'"response" body "sub" property',g1,{body:s}),r===gT);else if(p8(r,'"expectedSubject"'),s.sub!==r)throw pY('unexpected "response" body "sub" property value',g9,{expected:r,body:s,attribute:"sub"});return s}async function gO(e,t,r,n,i,s,a){return await r(e,t,i,s),s.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(a?.[pQ]||fetch)(n.href,{body:i,headers:Object.fromEntries(s.entries()),method:"POST",redirect:"manual",signal:p1(n,a?.signal)})}async function gC(e,t,r,n,i,s){let a=gd(e,"token_endpoint",t.use_mtls_endpoint_aliases,s?.[pq]!==!0);i.set("grant_type",n);let o=p0(s?.headers);o.set("accept","application/json"),s?.DPoP!==void 0&&(gS(s.DPoP),await s.DPoP.addProof(a,o,"POST"));let l=await gO(e,t,r,a,i,o,s);return s?.DPoP?.cacheNonce(l,a),l}let gR=new WeakMap,gk=new WeakMap;function gN(e){if(!e.id_token)return;let t=gR.get(e);if(!t)throw pU('"ref" was already garbage collected or did not resolve from the proper sources',pL);return t}async function gI(e,t,r,n,i,s){if(gi(e),gs(t),!pD(r,Response))throw pU('"response" must be an instance of Response',pM);await g_(r,200,"Token Endpoint"),mt(r);let a=await ml(r);if(p8(a.access_token,'"response" body "access_token" property',g1,{body:a}),p8(a.token_type,'"response" body "token_type" property',g1,{body:a}),a.token_type=a.token_type.toLowerCase(),void 0!==a.expires_in){let e="number"!=typeof a.expires_in?parseFloat(a.expires_in):a.expires_in;p5(e,!0,'"response" body "expires_in" property',g1,{body:a}),a.expires_in=e}if(void 0!==a.refresh_token&&p8(a.refresh_token,'"response" body "refresh_token" property',g1,{body:a}),void 0!==a.scope&&"string"!=typeof a.scope)throw pY('"response" body "scope" property must be a string',g1,{body:a});if(void 0!==a.id_token){p8(a.id_token,'"response" body "id_token" property',g1,{body:a});let s=["aud","exp","iat","iss","sub"];!0===t.require_auth_time&&s.push("auth_time"),void 0!==t.default_max_age&&(p5(t.default_max_age,!0,'"client.default_max_age"'),s.push("auth_time")),n?.length&&s.push(...n);let{claims:o,jwt:l}=await mn(a.id_token,mi.bind(void 0,t.id_token_signed_response_alg,e.id_token_signing_alg_values_supported,"RS256"),gt(t),gr(t),i).then(gQ.bind(void 0,s)).then(gM.bind(void 0,e)).then(gD.bind(void 0,t.client_id));if(Array.isArray(o.aud)&&1!==o.aud.length){if(void 0===o.azp)throw pY('ID Token "aud" (audience) claim includes additional untrusted audiences',g6,{claims:o,claim:"aud"});if(o.azp!==t.client_id)throw pY('unexpected ID Token "azp" (authorized party) claim value',g6,{expected:t.client_id,claims:o,claim:"azp"})}void 0!==o.auth_time&&p5(o.auth_time,!0,'ID Token "auth_time" (authentication time)',g1,{claims:o}),gk.set(r,l),gR.set(a,o)}if(s?.[a.token_type]!==void 0)s[a.token_type](r,a);else if("dpop"!==a.token_type&&"bearer"!==a.token_type)throw new pG("unsupported `token_type` value",{cause:{body:a}});return a}function g$(e){let t;if(t=function(e){if(!pD(e,Response))throw pU('"response" must be an instance of Response',pM);let t=e.headers.get("www-authenticate");if(null===t)return;let r=[],n=t;for(;n;){let e,t=n.match(gm),i=t?.["1"].toLowerCase();if(!i)return;let s=n.substring(t[0].length);if(s&&!s.match(/^[\s,]/))return;let a=s.match(/^\s+(.*)$/),o=!!a;n=a?a[1]:void 0;let l={};if(o)for(;n;){let r,i;if(t=n.match(gy)){if([,r,i,n]=t,i.includes("\\"))try{i=JSON.parse(`"${i}"`)}catch{}l[r.toLowerCase()]=i;continue}if(t=n.match(gb)){[,r,i,n]=t,l[r.toLowerCase()]=i;continue}if(t=n.match(gw)){if(Object.keys(l).length)break;[,e,n]=t;break}return}else n=s||void 0;let c={scheme:i,parameters:l};e&&(c.token68=e),r.push(c)}if(r.length)return r}(e))throw new gp("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:t,response:e})}function gj(e,t){return void 0!==t.claims.aud?gD(e,t):t}function gD(e,t){if(Array.isArray(t.claims.aud)){if(!t.claims.aud.includes(e))throw pY('unexpected JWT "aud" (audience) claim value',g6,{expected:e,claims:t.claims,claim:"aud"})}else if(t.claims.aud!==e)throw pY('unexpected JWT "aud" (audience) claim value',g6,{expected:e,claims:t.claims,claim:"aud"});return t}function gL(e,t){return void 0!==t.claims.iss?gM(e,t):t}function gM(e,t){let r=e[mu]?.(t)??e.issuer;if(t.claims.iss!==r)throw pY('unexpected JWT "iss" (issuer) claim value',g6,{expected:r,claims:t.claims,claim:"iss"});return t}let gU=new WeakSet,gq=Symbol();async function gB(e,t,r,n,i,s,a){if(gi(e),gs(t),!gU.has(n))throw pU('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',pL);p8(i,'"redirectUri"');let o=ms(n,"code");if(!o)throw pY('no authorization code in "callbackParameters"',g1);let l=new URLSearchParams(a?.additionalParameters);return l.set("redirect_uri",i),l.set("code",o),s!==gq&&(p8(s,'"codeVerifier"'),l.set("code_verifier",s)),gC(e,t,r,"authorization_code",l,a)}let gF={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function gQ(e,t){for(let r of e)if(void 0===t.claims[r])throw pY(`JWT "${r}" (${gF[r]}) claim missing`,g1,{claims:t.claims});return t}let gH=Symbol(),gV=Symbol();async function gK(e,t,r,n){return"string"==typeof n?.expectedNonce||"number"==typeof n?.maxAge||n?.requireIdToken?gW(e,t,r,n.expectedNonce,n.maxAge,n[pV],n.recognizedTokenTypes):gz(e,t,r,n?.[pV],n?.recognizedTokenTypes)}async function gW(e,t,r,n,i,s,a){let o=[];switch(n){case void 0:n=gH;break;case gH:break;default:p8(n,'"expectedNonce" argument'),o.push("nonce")}switch(i??=t.default_max_age){case void 0:i=gV;break;case gV:break;default:p5(i,!0,'"maxAge" argument'),o.push("auth_time")}let l=await gI(e,t,r,o,s,a);p8(l.id_token,'"response" body "id_token" property',g1,{body:l});let c=gN(l);if(i!==gV){let e=gn()+gt(t),r=gr(t);if(c.auth_time+i<e-r)throw pY("too much time has elapsed since the last End-User authentication",g8,{claims:c,now:e,tolerance:r,claim:"auth_time"})}if(n===gH){if(void 0!==c.nonce)throw pY('unexpected ID Token "nonce" claim value',g6,{expected:void 0,claims:c,claim:"nonce"})}else if(c.nonce!==n)throw pY('unexpected ID Token "nonce" claim value',g6,{expected:n,claims:c,claim:"nonce"});return l}async function gz(e,t,r,n,i){let s=await gI(e,t,r,void 0,n,i),a=gN(s);if(a){if(void 0!==t.default_max_age){p5(t.default_max_age,!0,'"client.default_max_age"');let e=gn()+gt(t),r=gr(t);if(a.auth_time+t.default_max_age<e-r)throw pY("too much time has elapsed since the last End-User authentication",g8,{claims:a,now:e,tolerance:r,claim:"auth_time"})}if(void 0!==a.nonce)throw pY('unexpected ID Token "nonce" claim value',g6,{expected:void 0,claims:a,claim:"nonce"})}return s}let gJ="OAUTH_WWW_AUTHENTICATE_CHALLENGE",gG="OAUTH_RESPONSE_BODY_ERROR",gX="OAUTH_UNSUPPORTED_OPERATION",gY="OAUTH_AUTHORIZATION_RESPONSE_ERROR",gZ="OAUTH_JWT_USERINFO_EXPECTED",g0="OAUTH_PARSE_ERROR",g1="OAUTH_INVALID_RESPONSE",g2="OAUTH_RESPONSE_IS_NOT_JSON",g3="OAUTH_RESPONSE_IS_NOT_CONFORM",g4="OAUTH_HTTP_REQUEST_FORBIDDEN",g5="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",g8="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",g6="OAUTH_JWT_CLAIM_COMPARISON_FAILED",g9="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",g7="OAUTH_MISSING_SERVER_METADATA",me="OAUTH_INVALID_SERVER_METADATA";function mt(e){if(e.bodyUsed)throw pU('"response" body has been used already',pL)}function mr(e){let{algorithm:t}=e;if("number"!=typeof t.modulusLength||t.modulusLength<2048)throw new pG(`unsupported ${t.name} modulusLength`,{cause:e})}async function mn(e,t,r,n,i){let s,a,{0:o,1:l,length:c}=e.split(".");if(5===c)if(void 0!==i)e=await i(e),{0:o,1:l,length:c}=e.split(".");else throw new pG("JWE decryption is not configured",{cause:e});if(3!==c)throw pY("Invalid JWT",g1,e);try{s=JSON.parse(pz(pJ(o)))}catch(e){throw pY("failed to parse JWT Header body as base64url encoded JSON",g0,e)}if(!pZ(s))throw pY("JWT Header must be a top level object",g1,e);if(t(s),void 0!==s.crit)throw new pG('no JWT "crit" header parameter extensions are supported',{cause:{header:s}});try{a=JSON.parse(pz(pJ(l)))}catch(e){throw pY("failed to parse JWT Payload body as base64url encoded JSON",g0,e)}if(!pZ(a))throw pY("JWT Payload must be a top level object",g1,e);let u=gn()+r;if(void 0!==a.exp){if("number"!=typeof a.exp)throw pY('unexpected JWT "exp" (expiration time) claim type',g1,{claims:a});if(a.exp<=u-n)throw pY('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',g8,{claims:a,now:u,tolerance:n,claim:"exp"})}if(void 0!==a.iat&&"number"!=typeof a.iat)throw pY('unexpected JWT "iat" (issued at) claim type',g1,{claims:a});if(void 0!==a.iss&&"string"!=typeof a.iss)throw pY('unexpected JWT "iss" (issuer) claim type',g1,{claims:a});if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw pY('unexpected JWT "nbf" (not before) claim type',g1,{claims:a});if(a.nbf>u+n)throw pY('unexpected JWT "nbf" (not before) claim value',g8,{claims:a,now:u,tolerance:n,claim:"nbf"})}if(void 0!==a.aud&&"string"!=typeof a.aud&&!Array.isArray(a.aud))throw pY('unexpected JWT "aud" (audience) claim type',g1,{claims:a});return{header:s,claims:a,jwt:e}}function mi(e,t,r,n){if(void 0!==e){if("string"==typeof e?n.alg!==e:!e.includes(n.alg))throw pY('unexpected JWT "alg" header parameter',g1,{header:n,expected:e,reason:"client configuration"});return}if(Array.isArray(t)){if(!t.includes(n.alg))throw pY('unexpected JWT "alg" header parameter',g1,{header:n,expected:t,reason:"authorization server metadata"});return}if(void 0!==r){if("string"==typeof r?n.alg!==r:"function"==typeof r?!r(n.alg):!r.includes(n.alg))throw pY('unexpected JWT "alg" header parameter',g1,{header:n,expected:r,reason:"default value"});return}throw pY('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:e,issuer:t,fallback:r})}function ms(e,t){let{0:r,length:n}=e.getAll(t);if(n>1)throw pY(`"${t}" parameter must be provided only once`,g1);return r}let ma=Symbol(),mo=Symbol();async function ml(e,t=p9){let r;try{r=await e.json()}catch(r){throw t(e),pY('failed to parse "response" body as JSON',g0,r)}if(!pZ(r))throw pY('"response" body must be a top level object',g1,{body:r});return r}let mc=Symbol(),mu=Symbol();async function md(e,t,r){let{cookies:n,logger:i}=r,s=n[e],a=new Date;a.setTime(a.getTime()+9e5),i.debug(`CREATE_${e.toUpperCase()}`,{name:s.name,payload:t,COOKIE_TTL:900,expires:a});let o=await hX({...r.jwt,maxAge:900,token:{value:t},salt:s.name}),l={...s.options,expires:a};return{name:s.name,value:o,options:l}}async function mh(e,t,r){try{let{logger:n,cookies:i,jwt:s}=r;if(n.debug(`PARSE_${e.toUpperCase()}`,{cookie:t}),!t)throw new uq(`${e} cookie was missing`);let a=await hY({...s,token:t,salt:i[e].name});if(a?.value)return a.value;throw Error("Invalid cookie")}catch(t){throw new uq(`${e} value could not be parsed`,{cause:t})}}function mf(e,t,r){let{logger:n,cookies:i}=t,s=i[e];n.debug(`CLEAR_${e.toUpperCase()}`,{cookie:s}),r.push({name:s.name,value:"",options:{...i[e].options,maxAge:0}})}function mp(e,t){return async function(r,n,i){let{provider:s,logger:a}=i;if(!s?.checks?.includes(e))return;let o=r?.[i.cookies[t].name];a.debug(`USE_${t.toUpperCase()}`,{value:o});let l=await mh(t,o,i);return mf(t,i,n),l}}let mg={async create(e){let t=p7(),r=await ge(t);return{cookie:await md("pkceCodeVerifier",t,e),value:r}},use:mp("pkce","pkceCodeVerifier")},mm="encodedState",my={async create(e,t){let{provider:r}=e;if(!r.checks.includes("state")){if(t)throw new uq("State data was provided but the provider is not configured to use state");return}let n={origin:t,random:p7()},i=await hX({secret:e.jwt.secret,token:n,salt:mm,maxAge:900});return{cookie:await md("state",i,e),value:i}},use:mp("state","state"),async decode(e,t){try{t.logger.debug("DECODE_STATE",{state:e});let r=await hY({secret:t.jwt.secret,token:e,salt:mm});if(r)return r;throw Error("Invalid state")}catch(e){throw new uq("State could not be decoded",{cause:e})}}},mb={async create(e){if(!e.provider.checks.includes("nonce"))return;let t=p7();return{cookie:await md("nonce",t,e),value:t}},use:mp("nonce","nonce")},mw="encodedWebauthnChallenge",mv={create:async(e,t,r)=>({cookie:await md("webauthnChallenge",await hX({secret:e.jwt.secret,token:{challenge:t,registerData:r},salt:mw,maxAge:900}),e)}),async use(e,t,r){let n=t?.[e.cookies.webauthnChallenge.name],i=await mh("webauthnChallenge",n,e),s=await hY({secret:e.jwt.secret,token:i,salt:mw});if(mf("webauthnChallenge",e,r),!s)throw new uq("WebAuthn challenge was missing");return s}};function m_(e){return encodeURIComponent(e).replace(/%20/g,"+")}async function mS(e,t,r){var n,i;let s,a,o,l,c,{logger:u,provider:d}=r,{token:h,userinfo:f}=d;if(h?.url&&"authjs.dev"!==h.url.host||f?.url&&"authjs.dev"!==f.url.host)s={issuer:d.issuer??"https://authjs.dev",token_endpoint:h?.url.toString(),userinfo_endpoint:f?.url.toString()};else{let e=new URL(d.issuer),t=await p4(e,{[pq]:!0,[pQ]:d[fc]});if(!(s=await p6(e,t)).token_endpoint)throw TypeError("TODO: Authorization server did not provide a token endpoint.");if(!s.userinfo_endpoint)throw TypeError("TODO: Authorization server did not provide a userinfo endpoint.")}let p={client_id:d.clientId,...d.client};switch(p.token_endpoint_auth_method){case void 0:case"client_secret_basic":a=(e,t,r,n)=>{var i,s;let a,o,l;n.set("authorization",(i=d.clientId,s=d.clientSecret,a=m_(i),o=m_(s),l=btoa(`${a}:${o}`),`Basic ${l}`))};break;case"client_secret_post":p8(n=d.clientSecret,'"clientSecret"'),a=(e,t,r,i)=>{r.set("client_id",t.client_id),r.set("client_secret",n)};break;case"client_secret_jwt":p8(i=d.clientSecret,'"clientSecret"'),c=void 0,a=async(e,t,r,n)=>{l||=await crypto.subtle.importKey("raw",pz(i),{hash:"SHA-256",name:"HMAC"},!1,["sign"]);let s={alg:"HS256"},a=ga(e,t);c?.(s,a);let o=`${pJ(pz(JSON.stringify(s)))}.${pJ(pz(JSON.stringify(a)))}`,u=await crypto.subtle.sign(l.algorithm,l,pz(o));r.set("client_id",t.client_id),r.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),r.set("client_assertion",`${o}.${pJ(new Uint8Array(u))}`)};break;case"private_key_jwt":a=function(e,t){let{key:r,kid:n}=e instanceof CryptoKey?{key:e}:e?.key instanceof CryptoKey?(void 0!==e.kid&&p8(e.kid,'"kid"'),{key:e.key,kid:e.kid}):{};var i='"clientPrivateKey.key"';if(!(r instanceof CryptoKey))throw pU(`${i} must be a CryptoKey`,pM);if("private"!==r.type)throw pU(`${i} must be a private CryptoKey`,pL);return async(e,i,s,a)=>{let o={alg:function(e){switch(e.algorithm.name){case"RSA-PSS":switch(e.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new pG("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}case"RSASSA-PKCS1-v1_5":switch(e.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new pG("unsupported RsaHashedKeyAlgorithm hash name",{cause:e})}case"ECDSA":switch(e.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new pG("unsupported EcKeyAlgorithm namedCurve",{cause:e})}case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return e.algorithm.name;case"EdDSA":return"Ed25519";default:throw new pG("unsupported CryptoKey algorithm name",{cause:e})}}(r),kid:n},l=ga(e,i);t?.[pH]?.(o,l),s.set("client_id",i.client_id),s.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),s.set("client_assertion",await go(o,l,r))}}(d.token.clientPrivateKey,{[pH](e,t){t.aud=[s.issuer,s.token_endpoint]}});break;case"none":a=(e,t,r,n)=>{r.set("client_id",t.client_id)};break;default:throw Error("unsupported client authentication method")}let g=[],m=await my.use(t,g,r);try{o=function(e,t,r,n){var i;if(gi(e),gs(t),r instanceof URL&&(r=r.searchParams),!(r instanceof URLSearchParams))throw pU('"parameters" must be an instance of URLSearchParams, or URL',pM);if(ms(r,"response"))throw pY('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',g1,{parameters:r});let s=ms(r,"iss"),a=ms(r,"state");if(!s&&e.authorization_response_iss_parameter_supported)throw pY('response parameter "iss" (issuer) missing',g1,{parameters:r});if(s&&s!==e.issuer)throw pY('unexpected "iss" (issuer) response parameter value',g1,{expected:e.issuer,parameters:r});switch(n){case void 0:case mo:if(void 0!==a)throw pY('unexpected "state" response parameter encountered',g1,{expected:void 0,parameters:r});break;case ma:break;default:if(p8(n,'"expectedState" argument'),a!==n)throw pY(void 0===a?'response parameter "state" missing':'unexpected "state" response parameter value',g1,{expected:n,parameters:r})}if(ms(r,"error"))throw new gf("authorization response from the server is an error",{cause:r});let o=ms(r,"id_token"),l=ms(r,"token");if(void 0!==o||void 0!==l)throw new pG("implicit and hybrid flows are not supported");return i=new URLSearchParams(r),gU.add(i),i}(s,p,new URLSearchParams(e),d.checks.includes("state")?m:ma)}catch(e){if(e instanceof gf){let t={providerId:d.id,...Object.fromEntries(e.cause.entries())};throw u.debug("OAuthCallbackError",t),new uW("OAuth Provider returned an error",t)}throw e}let y=await mg.use(t,g,r),b=d.callbackUrl;!r.isOnRedirectProxy&&d.redirectProxyUrl&&(b=d.redirectProxyUrl);let w=await gB(s,p,a,o,b,y??"decoy",{[pq]:!0,[pQ]:(...e)=>(d.checks.includes("pkce")||e[1].body.delete("code_verifier"),(d[fc]??fetch)(...e))});d.token?.conform&&(w=await d.token.conform(w.clone())??w);let v={},_="oidc"===d.type;if(d[fu])switch(d.id){case"microsoft-entra-id":case"azure-ad":{let e=await w.clone().json();if(e.error){let t={providerId:d.id,...e};throw new uW(`OAuth Provider returned an error: ${e.error}`,t)}let{tid:t}=function(e){let t,r;if("string"!=typeof e)throw new dO("JWTs must use Compact JWS serialization, JWT must be a string");let{1:n,length:i}=e.split(".");if(5===i)throw new dO("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new dO("Invalid JWT");if(!n)throw new dO("JWTs must contain a payload");try{t=db(n)}catch{throw new dO("Failed to base64url decode the payload")}try{r=JSON.parse(dh.decode(t))}catch{throw new dO("Failed to parse the decoded payload as JSON")}if(!d9(r))throw new dO("Invalid JWT Claims Set");return r}(e.id_token);if("string"==typeof t){let e=s.issuer?.match(/microsoftonline\.com\/(\w+)\/v2\.0/)?.[1]??"common",r=new URL(s.issuer.replace(e,t)),n=await p4(r,{[pQ]:d[fc]});s=await p6(r,n)}}}let S=await gK(s,p,w,{expectedNonce:await mb.use(t,g,r),requireIdToken:_});if(_){let t=gN(S);if(v=t,d[fu]&&"apple"===d.id)try{v.user=JSON.parse(e?.user)}catch{}if(!1===d.idToken){let e=await gx(s,p,S.access_token,{[pQ]:d[fc],[pq]:!0});v=await gA(s,p,t.sub,e)}}else if(f?.request){let e=await f.request({tokens:S,provider:d});e instanceof Object&&(v=e)}else if(f?.url){let e=await gx(s,p,S.access_token,{[pQ]:d[fc],[pq]:!0});v=await e.json()}else throw TypeError("No userinfo endpoint configured");return S.expires_in&&(S.expires_at=Math.floor(Date.now()/1e3)+Number(S.expires_in)),{...await mE(v,d,S,u),profile:v,cookies:g}}async function mE(e,t,r,n){try{let n=await t.profile(e,r);return{user:{...n,id:crypto.randomUUID(),email:n.email?.toLowerCase()},account:{...r,provider:t.id,type:t.type,providerAccountId:n.id??crypto.randomUUID()}}}catch(r){n.debug("getProfile error details",e),n.error(new uz(r,{provider:t.id}))}}async function mx(e,t,r,n){let i=await mC(e,t,r),{cookie:s}=await mv.create(e,i.challenge,r);return{status:200,cookies:[...n??[],s],body:{action:"register",options:i},headers:{"Content-Type":"application/json"}}}async function mT(e,t,r,n){let i=await mO(e,t,r),{cookie:s}=await mv.create(e,i.challenge);return{status:200,cookies:[...n??[],s],body:{action:"authenticate",options:i},headers:{"Content-Type":"application/json"}}}async function mP(e,t,r){let n,{adapter:i,provider:s}=e,a=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!a||"object"!=typeof a||!("id"in a)||"string"!=typeof a.id)throw new uR("Invalid WebAuthn Authentication response");let o=mN(mk(a.id)),l=await i.getAuthenticator(o);if(!l)throw new uR(`WebAuthn authenticator not found in database: ${JSON.stringify({credentialID:o})}`);let{challenge:c}=await mv.use(e,t.cookies,r);try{var u;let r=s.getRelayingParty(e,t);n=await s.simpleWebAuthn.verifyAuthenticationResponse({...s.verifyAuthenticationOptions,expectedChallenge:c,response:a,authenticator:{...u=l,credentialDeviceType:u.credentialDeviceType,transports:mI(u.transports),credentialID:mk(u.credentialID),credentialPublicKey:mk(u.credentialPublicKey)},expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new u8(e)}let{verified:d,authenticationInfo:h}=n;if(!d)throw new u8("WebAuthn authentication response could not be verified");try{let{newCounter:e}=h;await i.updateAuthenticatorCounter(l.credentialID,e)}catch(e){throw new uN(`Failed to update authenticator counter. This may cause future authentication attempts to fail. ${JSON.stringify({credentialID:o,oldCounter:l.counter,newCounter:h.newCounter})}`,e)}let f=await i.getAccount(l.providerAccountId,s.id);if(!f)throw new uR(`WebAuthn account not found in database: ${JSON.stringify({credentialID:o,providerAccountId:l.providerAccountId})}`);let p=await i.getUser(f.userId);if(!p)throw new uR(`WebAuthn user not found in database: ${JSON.stringify({credentialID:o,providerAccountId:l.providerAccountId,userID:f.userId})}`);return{account:f,user:p}}async function mA(e,t,r){var n;let i,{provider:s}=e,a=t.body&&"string"==typeof t.body.data?JSON.parse(t.body.data):void 0;if(!a||"object"!=typeof a||!("id"in a)||"string"!=typeof a.id)throw new uR("Invalid WebAuthn Registration response");let{challenge:o,registerData:l}=await mv.use(e,t.cookies,r);if(!l)throw new uR("Missing user registration data in WebAuthn challenge cookie");try{let r=s.getRelayingParty(e,t);i=await s.simpleWebAuthn.verifyRegistrationResponse({...s.verifyRegistrationOptions,expectedChallenge:o,response:a,expectedOrigin:r.origin,expectedRPID:r.id})}catch(e){throw new u8(e)}if(!i.verified||!i.registrationInfo)throw new u8("WebAuthn registration response could not be verified");let c={providerAccountId:mN(i.registrationInfo.credentialID),provider:e.provider.id,type:s.type},u={providerAccountId:c.providerAccountId,counter:i.registrationInfo.counter,credentialID:mN(i.registrationInfo.credentialID),credentialPublicKey:mN(i.registrationInfo.credentialPublicKey),credentialBackedUp:i.registrationInfo.credentialBackedUp,credentialDeviceType:i.registrationInfo.credentialDeviceType,transports:(n=a.response.transports,n?.join(","))};return{user:l,account:c,authenticator:u}}async function mO(e,t,r){let{provider:n,adapter:i}=e,s=r&&r.id?await i.listAuthenticatorsByUserId(r.id):null,a=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateAuthenticationOptions({...n.authenticationOptions,rpID:a.id,allowCredentials:s?.map(e=>({id:mk(e.credentialID),type:"public-key",transports:mI(e.transports)}))})}async function mC(e,t,r){let{provider:n,adapter:i}=e,s=r.id?await i.listAuthenticatorsByUserId(r.id):null,a=fr(32),o=n.getRelayingParty(e,t);return await n.simpleWebAuthn.generateRegistrationOptions({...n.registrationOptions,userID:a,userName:r.email,userDisplayName:r.name??void 0,rpID:o.id,rpName:o.name,excludeCredentials:s?.map(e=>({id:mk(e.credentialID),type:"public-key",transports:mI(e.transports)}))})}function mR(e){let{provider:t,adapter:r}=e;if(!r)throw new uF("An adapter is required for the WebAuthn provider");if(!t||"webauthn"!==t.type)throw new uZ("Provider must be WebAuthn");return{...e,provider:t,adapter:r}}function mk(e){return new Uint8Array(Buffer.from(e,"base64"))}function mN(e){return Buffer.from(e).toString("base64")}function mI(e){return e?e.split(","):void 0}async function m$(e,t,r,n){if(!t.provider)throw new uZ("Callback route called without provider");let{query:i,body:s,method:a,headers:o}=e,{provider:l,adapter:c,url:u,callbackUrl:d,pages:h,jwt:f,events:p,callbacks:g,session:{strategy:m,maxAge:y},logger:b}=t,w="jwt"===m;try{if("oauth"===l.type||"oidc"===l.type){let a,o=l.authorization?.url.searchParams.get("response_mode")==="form_post"?s:i;if(t.isOnRedirectProxy&&o?.state){let e=await my.decode(o.state,t);if(e?.origin&&new URL(e.origin).origin!==t.url.origin){let t=`${e.origin}?${new URLSearchParams(o)}`;return b.debug("Proxy redirecting to",t),{redirect:t,cookies:n}}}let m=await mS(o,e.cookies,t);m.cookies.length&&n.push(...m.cookies),b.debug("authorization result",m);let{user:v,account:_,profile:S}=m;if(!v||!_||!S)return{redirect:`${u}/signin`,cookies:n};if(c){let{getUserByAccount:e}=c;a=await e({providerAccountId:_.providerAccountId,provider:l.id})}let E=await mj({user:a??v,account:_,profile:S},t);if(E)return{redirect:E,cookies:n};let{user:x,session:T,isNewUser:P}=await pj(r.value,v,_,t);if(w){let e={name:x.name,email:x.email,picture:x.image,sub:x.id?.toString()},i=await g.jwt({token:e,user:x,account:_,profile:S,isNewUser:P,trigger:P?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,s=await f.encode({...f,token:i,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*y);let o=r.chunk(s,{expires:a});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:T.sessionToken,options:{...t.cookies.sessionToken.options,expires:T.expires}});if(await p.signIn?.({user:x,account:_,profile:S,isNewUser:P}),P&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("email"===l.type){let e=i?.token,s=i?.email;if(!e){let t=TypeError("Missing token. The sign-in URL was manually opened without token or the link was not sent correctly in the email.",{cause:{hasToken:!!e}});throw t.name="Configuration",t}let a=l.secret??t.secret,o=await c.useVerificationToken({identifier:s,token:await ft(`${e}${a}`)}),u=!!o,m=u&&o.expires.valueOf()<Date.now();if(!u||m||s&&o.identifier!==s)throw new u1({hasInvite:u,expired:m});let{identifier:b}=o,v=await c.getUserByEmail(b)??{id:crypto.randomUUID(),email:b,emailVerified:null},_={providerAccountId:v.email,userId:v.id,type:"email",provider:l.id},S=await mj({user:v,account:_},t);if(S)return{redirect:S,cookies:n};let{user:E,session:x,isNewUser:T}=await pj(r.value,v,_,t);if(w){let e={name:E.name,email:E.email,picture:E.image,sub:E.id?.toString()},i=await g.jwt({token:e,user:E,account:_,isNewUser:T,trigger:T?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,s=await f.encode({...f,token:i,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*y);let o=r.chunk(s,{expires:a});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:x.sessionToken,options:{...t.cookies.sessionToken.options,expires:x.expires}});if(await p.signIn?.({user:E,account:_,isNewUser:T}),T&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}if("credentials"===l.type&&"POST"===a){let e=s??{};Object.entries(i??{}).forEach(([e,t])=>u.searchParams.set(e,t));let c=await l.authorize(e,new Request(u,{headers:o,method:a,body:JSON.stringify(s)}));if(c)c.id=c.id?.toString()??crypto.randomUUID();else throw new uM;let h={providerAccountId:c.id,type:"credentials",provider:l.id},m=await mj({user:c,account:h,credentials:e},t);if(m)return{redirect:m,cookies:n};let b={name:c.name,email:c.email,picture:c.image,sub:c.id},w=await g.jwt({token:b,user:c,account:h,isNewUser:!1,trigger:"signIn"});if(null===w)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,i=await f.encode({...f,token:w,salt:e}),s=new Date;s.setTime(s.getTime()+1e3*y);let a=r.chunk(i,{expires:s});n.push(...a)}return await p.signIn?.({user:c,account:h}),{redirect:d,cookies:n}}else if("webauthn"===l.type&&"POST"===a){let i,s,a,o=e.body?.action;if("string"!=typeof o||"authenticate"!==o&&"register"!==o)throw new uR("Invalid action parameter");let l=mR(t);switch(o){case"authenticate":{let t=await mP(l,e,n);i=t.user,s=t.account;break}case"register":{let r=await mA(t,e,n);i=r.user,s=r.account,a=r.authenticator}}await mj({user:i,account:s},t);let{user:c,isNewUser:u,session:m,account:b}=await pj(r.value,i,s,t);if(!b)throw new uR("Error creating or finding account");if(a&&c.id&&await l.adapter.createAuthenticator({...a,userId:c.id}),w){let e={name:c.name,email:c.email,picture:c.image,sub:c.id?.toString()},i=await g.jwt({token:e,user:c,account:b,isNewUser:u,trigger:u?"signUp":"signIn"});if(null===i)n.push(...r.clean());else{let e=t.cookies.sessionToken.name,s=await f.encode({...f,token:i,salt:e}),a=new Date;a.setTime(a.getTime()+1e3*y);let o=r.chunk(s,{expires:a});n.push(...o)}}else n.push({name:t.cookies.sessionToken.name,value:m.sessionToken,options:{...t.cookies.sessionToken.options,expires:m.expires}});if(await p.signIn?.({user:c,account:b,isNewUser:u}),u&&h.newUser)return{redirect:`${h.newUser}${h.newUser.includes("?")?"&":"?"}${new URLSearchParams({callbackUrl:d})}`,cookies:n};return{redirect:d,cookies:n}}throw new uZ(`Callback for provider type (${l.type}) is not supported`)}catch(t){if(t instanceof uR)throw t;let e=new u$(t,{provider:l.id});throw b.debug("callback route error details",{method:a,query:i,body:s}),e}}async function mj(e,t){let r,{signIn:n,redirect:i}=t.callbacks;try{r=await n(e)}catch(e){if(e instanceof uR)throw e;throw new uI(e)}if(!r)throw new uI("AccessDenied");if("string"==typeof r)return await i({url:r,baseUrl:t.url.origin})}async function mD(e,t,r,n,i){let{adapter:s,jwt:a,events:o,callbacks:l,logger:c,session:{strategy:u,maxAge:d}}=e,h={body:null,headers:{"Content-Type":"application/json",...!n&&{"Cache-Control":"private, no-cache, no-store",Expires:"0",Pragma:"no-cache"}},cookies:r},f=t.value;if(!f)return h;if("jwt"===u){try{let r=e.cookies.sessionToken.name,s=await a.decode({...a,token:f,salt:r});if(!s)throw Error("Invalid JWT");let c=await l.jwt({token:s,...n&&{trigger:"update"},session:i}),u=p$(d);if(null!==c){let e={user:{name:c.name,email:c.email,image:c.picture},expires:u.toISOString()},n=await l.session({session:e,token:c});h.body=n;let i=await a.encode({...a,token:c,salt:r}),s=t.chunk(i,{expires:u});h.cookies?.push(...s),await o.session?.({session:n,token:c})}else h.cookies?.push(...t.clean())}catch(e){c.error(new uB(e)),h.cookies?.push(...t.clean())}return h}try{let{getSessionAndUser:r,deleteSession:a,updateSession:c}=s,u=await r(f);if(u&&u.session.expires.valueOf()<Date.now()&&(await a(f),u=null),u){let{user:t,session:r}=u,s=e.session.updateAge,a=r.expires.valueOf()-1e3*d+1e3*s,p=p$(d);a<=Date.now()&&await c({sessionToken:f,expires:p});let g=await l.session({session:{...r,user:t},user:t,newSession:i,...n?{trigger:"update"}:{}});h.body=g,h.cookies?.push({name:e.cookies.sessionToken.name,value:f,options:{...e.cookies.sessionToken.options,expires:p}}),await o.session?.({session:g})}else f&&h.cookies?.push(...t.clean())}catch(e){c.error(new uJ(e))}return h}async function mL(e,t){let r,n,{logger:i,provider:s}=t,a=s.authorization?.url;if(!a||"authjs.dev"===a.host){let e=new URL(s.issuer),t=await p4(e,{[pQ]:s[fc],[pq]:!0}),r=await p6(e,t).catch(t=>{if(!(t instanceof TypeError)||"Invalid URL"!==t.message)throw t;throw TypeError(`Discovery request responded with an invalid issuer. expected: ${e}`)});if(!r.authorization_endpoint)throw TypeError("Authorization server did not provide an authorization endpoint.");a=new URL(r.authorization_endpoint)}let o=a.searchParams,l=s.callbackUrl;!t.isOnRedirectProxy&&s.redirectProxyUrl&&(l=s.redirectProxyUrl,n=s.callbackUrl,i.debug("using redirect proxy",{redirect_uri:l,data:n}));let c=Object.assign({response_type:"code",client_id:s.clientId,redirect_uri:l,...s.authorization?.params},Object.fromEntries(s.authorization?.url.searchParams??[]),e);for(let e in c)o.set(e,c[e]);let u=[];s.authorization?.url.searchParams.get("response_mode")==="form_post"&&(t.cookies.state.options.sameSite="none",t.cookies.state.options.secure=!0,t.cookies.nonce.options.sameSite="none",t.cookies.nonce.options.secure=!0);let d=await my.create(t,n);if(d&&(o.set("state",d.value),u.push(d.cookie)),s.checks?.includes("pkce"))if(r&&!r.code_challenge_methods_supported?.includes("S256"))"oidc"===s.type&&(s.checks=["nonce"]);else{let{value:e,cookie:r}=await mg.create(t);o.set("code_challenge",e),o.set("code_challenge_method","S256"),u.push(r)}let h=await mb.create(t);return h&&(o.set("nonce",h.value),u.push(h.cookie)),"oidc"!==s.type||a.searchParams.has("scope")||a.searchParams.set("scope","openid profile email"),i.debug("authorization url is ready",{url:a,cookies:u,provider:s}),{redirect:a.toString(),cookies:u}}async function mM(e,t){let r,{body:n}=e,{provider:i,callbacks:s,adapter:a}=t,o=(i.normalizeIdentifier??function(e){if(!e)throw Error("Missing email from request body.");let t=e.toLowerCase().trim();if(t.includes('"'))throw Error("Invalid email address format.");let[r,n]=t.split("@");if(!r||!n||2!==t.split("@").length||!(n=n.split(",")[0]))throw Error("Invalid email address format.");return`${r}@${n}`})(n?.email),l={id:crypto.randomUUID(),email:o,emailVerified:null},c=await a.getUserByEmail(o)??l,u={providerAccountId:o,userId:c.id,type:"email",provider:i.id};try{r=await s.signIn({user:c,account:u,email:{verificationRequest:!0}})}catch(e){throw new uI(e)}if(!r)throw new uI("AccessDenied");if("string"==typeof r)return{redirect:await s.redirect({url:r,baseUrl:t.url.origin})};let{callbackUrl:d,theme:h}=t,f=await i.generateVerificationToken?.()??fr(32),p=new Date(Date.now()+(i.maxAge??86400)*1e3),g=i.secret??t.secret,m=new URL(t.basePath,t.url.origin),y=i.sendVerificationRequest({identifier:o,token:f,expires:p,url:`${m}/callback/${i.id}?${new URLSearchParams({callbackUrl:d,token:f,email:o})}`,provider:i,theme:h,request:new Request(e.url,{headers:e.headers,method:e.method,body:"POST"===e.method?JSON.stringify(e.body??{}):void 0})}),b=a.createVerificationToken?.({identifier:o,token:await ft(`${f}${g}`),expires:p});return await Promise.all([y,b]),{redirect:`${m}/verify-request?${new URLSearchParams({provider:i.id,type:i.type})}`}}async function mU(e,t,r){let n=`${r.url.origin}${r.basePath}/signin`;if(!r.provider)return{redirect:n,cookies:t};switch(r.provider.type){case"oauth":case"oidc":{let{redirect:n,cookies:i}=await mL(e.query,r);return i&&t.push(...i),{redirect:n,cookies:t}}case"email":return{...await mM(e,r),cookies:t};default:return{redirect:n,cookies:t}}}async function mq(e,t,r){let{jwt:n,events:i,callbackUrl:s,logger:a,session:o}=r,l=t.value;if(!l)return{redirect:s,cookies:e};try{if("jwt"===o.strategy){let e=r.cookies.sessionToken.name,t=await n.decode({...n,token:l,salt:e});await i.signOut?.({token:t})}else{let e=await r.adapter?.deleteSession(l);await i.signOut?.({session:e})}}catch(e){a.error(new uG(e))}return e.push(...t.clean()),{redirect:s,cookies:e}}async function mB(e,t){let{adapter:r,jwt:n,session:{strategy:i}}=e,s=t.value;if(!s)return null;if("jwt"===i){let t=e.cookies.sessionToken.name,r=await n.decode({...n,token:s,salt:t});if(r&&r.sub)return{id:r.sub,name:r.name,email:r.email,image:r.picture}}else{let e=await r?.getSessionAndUser(s);if(e)return e.user}return null}async function mF(e,t,r,n){let i=mR(t),{provider:s}=i,{action:a}=e.query??{};if("register"!==a&&"authenticate"!==a&&void 0!==a)return{status:400,body:{error:"Invalid action"},cookies:n,headers:{"Content-Type":"application/json"}};let o=await mB(t,r),l=o?{user:o,exists:!0}:await s.getUserInfo(t,e),c=l?.user;switch(function(e,t,r){let{user:n,exists:i=!1}=r??{};switch(e){case"authenticate":return"authenticate";case"register":if(n&&t===i)return"register";break;case void 0:if(!t)if(!n)return"authenticate";else if(i)return"authenticate";else return"register"}return null}(a,!!o,l)){case"authenticate":return mT(i,e,c,n);case"register":if("string"==typeof c?.email)return mx(i,e,c,n);break;default:return{status:400,body:{error:"Invalid request"},cookies:n,headers:{"Content-Type":"application/json"}}}}async function mQ(e,t){let{action:r,providerId:n,error:i,method:s}=e,a=t.skipCSRFCheck===fo,{options:o,cookies:l}=await fm({authOptions:t,action:r,providerId:n,url:e.url,callbackUrl:e.body?.callbackUrl??e.query?.callbackUrl,csrfToken:e.body?.csrfToken,cookies:e.cookies,isPost:"POST"===s,csrfDisabled:a}),c=new uC(o.cookies.sessionToken,e.cookies,o.logger);if("GET"===s){let t=pI({...o,query:e.query,cookies:l});switch(r){case"callback":return await m$(e,o,c,l);case"csrf":return t.csrf(a,o,l);case"error":return t.error(i);case"providers":return t.providers(o.providers);case"session":return await mD(o,c,l);case"signin":return t.signin(n,i);case"signout":return t.signout();case"verify-request":return t.verifyRequest();case"webauthn-options":return await mF(e,o,c,l)}}else{let{csrfTokenVerified:t}=o;switch(r){case"callback":return"credentials"===o.provider.type&&fi(r,t),await m$(e,o,c,l);case"session":return fi(r,t),await mD(o,c,l,!0,e.body?.data);case"signin":return fi(r,t),await mU(e,l,o);case"signout":return fi(r,t),await mq(l,c,o)}}throw new uX(`Cannot handle action: ${r}`)}function mH(e,t,r,n,i){let s,a=i?.basePath,o=n.AUTH_URL??n.NEXTAUTH_URL;if(o)s=new URL(o),a&&"/"!==a&&"/"!==s.pathname&&(s.pathname!==a&&h4(i).warn("env-url-basepath-mismatch"),s.pathname="/");else{let e=r.get("x-forwarded-host")??r.get("host"),n=r.get("x-forwarded-proto")??t??"https",i=n.endsWith(":")?n:n+":";s=new URL(`${i}//${e}`)}let l=s.toString().replace(/\/$/,"");if(a){let t=a?.replace(/(^\/|\/$)/g,"")??"";return new URL(`${l}/${t}/${e}`)}return new URL(`${l}/${e}`)}async function mV(e,t){let r=h4(t),n=await h7(e,t);if(!n)return Response.json("Bad request.",{status:400});let i=function(e,t){let{url:r}=e,n=[];if(!u7&&t.debug&&n.push("debug-enabled"),!t.trustHost)return new u0(`Host must be trusted. URL was: ${e.url}`);if(!t.secret?.length)return new uV("Please define a `secret`");let i=e.query?.callbackUrl;if(i&&!de(i,r.origin))return new uL(`Invalid callback URL. Received: ${i}`);let{callbackUrl:s}=uO(t.useSecureCookies??"https:"===r.protocol),a=e.cookies?.[t.cookies?.callbackUrl?.name??s.name];if(a&&!de(a,r.origin))return new uL(`Invalid callback URL. Received: ${a}`);let o=!1;for(let e of t.providers){let t="function"==typeof e?e():e;if(("oauth"===t.type||"oidc"===t.type)&&!(t.issuer??t.options?.issuer)){let e,{authorization:r,token:n,userinfo:i}=t;if("string"==typeof r||r?.url?"string"==typeof n||n?.url?"string"==typeof i||i?.url||(e="userinfo"):e="token":e="authorization",e)return new uU(`Provider "${t.id}" is missing both \`issuer\` and \`${e}\` endpoint config. At least one of them is required`)}if("credentials"===t.type)dt=!0;else if("email"===t.type)dr=!0;else if("webauthn"===t.type){var l;if(dn=!0,t.simpleWebAuthnBrowserVersion&&(l=t.simpleWebAuthnBrowserVersion,!/^v\d+(?:\.\d+){0,2}$/.test(l)))return new uR(`Invalid provider config for "${t.id}": simpleWebAuthnBrowserVersion "${t.simpleWebAuthnBrowserVersion}" must be a valid semver string.`);if(t.enableConditionalUI){if(o)return new u4("Multiple webauthn providers have 'enableConditionalUI' set to True. Only one provider can have this option enabled at a time");if(o=!0,!Object.values(t.formFields).some(e=>e.autocomplete&&e.autocomplete.toString().indexOf("webauthn")>-1))return new u5(`Provider "${t.id}" has 'enableConditionalUI' set to True, but none of its formFields have 'webauthn' in their autocomplete param`)}}}if(dt){let e=t.session?.strategy==="database",r=!t.providers.some(e=>"credentials"!==("function"==typeof e?e():e).type);if(e&&r)return new uY("Signing in with credentials only supported if JWT strategy is enabled");if(t.providers.some(e=>{let t="function"==typeof e?e():e;return"credentials"===t.type&&!t.authorize}))return new uH("Must define an authorize() handler to use credentials authentication provider")}let{adapter:c,session:u}=t,d=[];if(dr||u?.strategy==="database"||!u?.strategy&&c)if(dr){if(!c)return new uF("Email login requires an adapter");d.push(...di)}else{if(!c)return new uF("Database session requires an adapter");d.push(...ds)}if(dn){if(!t.experimental?.enableWebAuthn)return new u9("WebAuthn is an experimental feature. To enable it, set `experimental.enableWebAuthn` to `true` in your config");if(n.push("experimental-webauthn"),!c)return new uF("WebAuthn requires an adapter");d.push(...da)}if(c){let e=d.filter(e=>!(e in c));if(e.length)return new uQ(`Required adapter methods were missing: ${e.join(", ")}`)}return u7||(u7=!0),n}(n,t);if(Array.isArray(i))i.forEach(r.warn);else if(i){if(r.error(i),!new Set(["signin","signout","error","verify-request"]).has(n.action)||"GET"!==n.method)return Response.json({message:"There was a problem with the server configuration. Check the server logs for more information."},{status:500});let{pages:e,theme:s}=t,a=e?.error&&n.url.searchParams.get("callbackUrl")?.startsWith(e.error);if(!e?.error||a)return a&&r.error(new uj(`The error page ${e?.error} should not require authentication`)),fe(pI({theme:s}).error("Configuration"));let o=`${n.url.origin}${e.error}?error=Configuration`;return Response.redirect(o)}let s=e.headers?.has("X-Auth-Return-Redirect"),a=t.raw===fl;try{let e=await mQ(n,t);if(a)return e;let r=fe(e),i=r.headers.get("Location");if(!s||!i)return r;return Response.json({url:i},{headers:r.headers})}catch(d){r.error(d);let i=d instanceof uR;if(i&&a&&!s)throw d;if("POST"===e.method&&"session"===n.action)return Response.json(null,{status:400});let o=new URLSearchParams({error:d instanceof uR&&u3.has(d.type)?d.type:"Configuration"});d instanceof uM&&o.set("code",d.code);let l=i&&d.kind||"error",c=t.pages?.[l]??`${t.basePath}/${l.toLowerCase()}`,u=`${n.url.origin}${c}?${o}`;if(s)return Response.json({url:u});return Response.redirect(u)}}var mK=e.i(86205);function mW(e){let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return e;let{origin:r}=new URL(t),{href:n,origin:i}=e.nextUrl;return new mK.NextRequest(n.replace(i,r),e)}function mz(e){try{e.secret??(e.secret=process.env.AUTH_SECRET??process.env.NEXTAUTH_SECRET);let t=process.env.AUTH_URL??process.env.NEXTAUTH_URL;if(!t)return;let{pathname:r}=new URL(t);if("/"===r)return;e.basePath||(e.basePath=r)}catch{}finally{e.basePath||(e.basePath="/api/auth"),function(e,t,r=!1){try{let n=e.AUTH_URL;n&&(t.basePath?r||h4(t).warn("env-url-basepath-redundant"):t.basePath=new URL(n).pathname)}catch{}finally{t.basePath??(t.basePath="/auth")}if(!t.secret?.length){t.secret=[];let r=e.AUTH_SECRET;for(let n of(r&&t.secret.push(r),[1,2,3])){let r=e[`AUTH_SECRET_${n}`];r&&t.secret.unshift(r)}}t.redirectProxyUrl??(t.redirectProxyUrl=e.AUTH_REDIRECT_PROXY_URL),t.trustHost??(t.trustHost=!!(e.AUTH_URL??e.AUTH_TRUST_HOST??e.VERCEL??e.CF_PAGES??"production"!==e.NODE_ENV)),t.providers=t.providers.map(t=>{let{id:r}="function"==typeof t?t({}):t,n=r.toUpperCase().replace(/-/g,"_"),i=e[`AUTH_${n}_ID`],s=e[`AUTH_${n}_SECRET`],a=e[`AUTH_${n}_ISSUER`],o=e[`AUTH_${n}_KEY`],l="function"==typeof t?t({clientId:i,clientSecret:s,issuer:a,apiKey:o}):t;return"oauth"===l.type||"oidc"===l.type?(l.clientId??(l.clientId=i),l.clientSecret??(l.clientSecret=s),l.issuer??(l.issuer=a)):"email"===l.type&&(l.apiKey??(l.apiKey=o)),l})}(process.env,e,!0)}}var mJ=e.i(48159);async function mG(e,t){return mV(new Request(mH("session",e.get("x-forwarded-proto"),e,process.env,t),{headers:{cookie:e.get("cookie")??""}}),{...t,callbacks:{...t.callbacks,async session(...e){let r=await t.callbacks?.session?.(...e)??{...e[0].session,expires:e[0].session.expires?.toISOString?.()??e[0].session.expires};return{user:e[0].user??e[0].token,...r}}}})}function mX(e){return"function"==typeof e}function mY(e,t){return"function"==typeof e?async(...r)=>{if(!r.length){let r=await (0,mJ.headers)(),n=await e(void 0);return t?.(n),mG(r,n).then(e=>e.json())}if(r[0]instanceof Request){let n=r[0],i=r[1],s=await e(n);return t?.(s),mZ([n,i],s)}if(mX(r[0])){let n=r[0];return async(...r)=>{let i=await e(r[0]);return t?.(i),mZ(r,i,n)}}let n="req"in r[0]?r[0].req:r[0],i="res"in r[0]?r[0].res:r[1],s=await e(n);return t?.(s),mG(new Headers(n.headers),s).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in i?i.headers.append("set-cookie",t):i.appendHeader("set-cookie",t);return t})}:(...t)=>{if(!t.length)return Promise.resolve((0,mJ.headers)()).then(t=>mG(t,e).then(e=>e.json()));if(t[0]instanceof Request)return mZ([t[0],t[1]],e);if(mX(t[0])){let r=t[0];return async(...t)=>mZ(t,e,r).then(e=>e)}let r="req"in t[0]?t[0].req:t[0],n="res"in t[0]?t[0].res:t[1];return mG(new Headers(r.headers),e).then(async e=>{let t=await e.json();for(let t of e.headers.getSetCookie())"headers"in n?n.headers.append("set-cookie",t):n.appendHeader("set-cookie",t);return t})}}async function mZ(e,t,r){let n=mW(e[0]),i=await mG(n.headers,t),s=await i.json(),a=!0;t.callbacks?.authorized&&(a=await t.callbacks.authorized({request:n,auth:s}));let o=mK.NextResponse.next?.();if(a instanceof Response){var l,c,u;let e,r;o=a;let i=a.headers.get("Location"),{pathname:s}=n.nextUrl;i&&(l=s,c=new URL(i).pathname,u=t,e=c.replace(`${l}/`,""),r=Object.values(u.pages??{}),(m0.has(e)||r.includes(c))&&c===l)&&(a=!0)}else if(r)n.auth=s,o=await r(n,e[1])??mK.NextResponse.next();else if(!a){let e=t.pages?.signIn??`${t.basePath}/signin`;if(n.nextUrl.pathname!==e){let t=n.nextUrl.clone();t.pathname=e,t.searchParams.set("callbackUrl",n.nextUrl.href),o=mK.NextResponse.redirect(t)}}let d=new Response(o?.body,o);for(let e of i.headers.getSetCookie())d.headers.append("set-cookie",e);return d}let m0=new Set(["providers","session","csrf","signin","signout","callback","verify-request","error"]);var m1=e.i(93704);async function m2(e,t={},r,n){let i=new Headers(await (0,mJ.headers)()),{redirect:s=!0,redirectTo:a,...o}=t instanceof FormData?Object.fromEntries(t):t,l=a?.toString()??i.get("Referer")??"/",c=mH("signin",i.get("x-forwarded-proto"),i,process.env,n);if(!e)return c.searchParams.append("callbackUrl",l),s&&(0,m1.redirect)(c.toString()),c.toString();let u=`${c}/${e}?${new URLSearchParams(r)}`,d={};for(let t of n.providers){let{options:r,...n}="function"==typeof t?t():t,i=r?.id??n.id;if(i===e){d={id:i,type:r?.type??n.type};break}}if(!d.id){let e=`${c}?${new URLSearchParams({callbackUrl:l})}`;return s&&(0,m1.redirect)(e),e}"credentials"===d.type&&(u=u.replace("signin","callback")),i.set("Content-Type","application/x-www-form-urlencoded");let h=new Request(u,{method:"POST",headers:i,body:new URLSearchParams({...o,callbackUrl:l})}),f=await mV(h,{...n,raw:fl,skipCSRFCheck:fo}),p=await (0,mJ.cookies)();for(let e of f?.cookies??[])p.set(e.name,e.value,e.options);let g=(f instanceof Response?f.headers.get("Location"):f.redirect)??u;return s?(0,m1.redirect)(g):g}async function m3(e,t){let r=new Headers(await (0,mJ.headers)());r.set("Content-Type","application/x-www-form-urlencoded");let n=mH("signout",r.get("x-forwarded-proto"),r,process.env,t),i=new URLSearchParams({callbackUrl:e?.redirectTo??r.get("Referer")??"/"}),s=new Request(n,{method:"POST",headers:r,body:i}),a=await mV(s,{...t,raw:fl,skipCSRFCheck:fo}),o=await (0,mJ.cookies)();for(let e of a?.cookies??[])o.set(e.name,e.value,e.options);return e?.redirect??!0?(0,m1.redirect)(a.redirect):a}async function m4(e,t){let r=new Headers(await (0,mJ.headers)());r.set("Content-Type","application/json");let n=new Request(mH("session",r.get("x-forwarded-proto"),r,process.env,t),{method:"POST",headers:r,body:JSON.stringify({data:e})}),i=await mV(n,{...t,raw:fl,skipCSRFCheck:fo}),s=await (0,mJ.cookies)();for(let e of i?.cookies??[])s.set(e.name,e.value,e.options);return i.body}let{handlers:m5,auth:m8,signIn:m6,signOut:m9}=function(e){if("function"==typeof e){let t=async t=>{let r=await e(t);return mz(r),mV(mW(t),r)};return{handlers:{GET:t,POST:t},auth:mY(e,e=>mz(e)),signIn:async(t,r,n)=>{let i=await e(void 0);return mz(i),m2(t,r,n,i)},signOut:async t=>{let r=await e(void 0);return mz(r),m3(t,r)},unstable_update:async t=>{let r=await e(void 0);return mz(r),m4(t,r)}}}mz(e);let t=t=>mV(mW(t),e);return{handlers:{GET:t,POST:t},auth:mY(e),signIn:(t,r,n)=>m2(t,r,n,e),signOut:t=>m3(t,e),unstable_update:t=>m4(t,e)}}({adapter:function(e,t){if(rb(e,cu))return function(e,t){let{usersTable:r,accountsTable:n,sessionsTable:i,verificationTokensTable:s,authenticatorsTable:a}=function(e={}){let t=e.usersTable??lK("user",{id:lq("id",{length:255}).primaryKey().$defaultFn(()=>crypto.randomUUID()),name:lq("name",{length:255}),email:lq("email",{length:255}).unique(),emailVerified:lk("emailVerified",{mode:"date",fsp:3}),image:lq("image",{length:255})}),r=e.accountsTable??lK("account",{userId:lq("userId",{length:255}).notNull().references(()=>t.id,{onDelete:"cascade"}),type:lq("type",{length:255}).$type().notNull(),provider:lq("provider",{length:255}).notNull(),providerAccountId:lq("providerAccountId",{length:255}).notNull(),refresh_token:lq("refresh_token",{length:255}),access_token:lq("access_token",{length:255}),expires_at:le("expires_at"),token_type:lq("token_type",{length:255}),scope:lq("scope",{length:255}),id_token:lq("id_token",{length:2048}),session_state:lq("session_state",{length:255})},e=>({compositePk:lW({columns:[e.provider,e.providerAccountId]})})),n=e.sessionsTable??lK("session",{sessionToken:lq("sessionToken",{length:255}).primaryKey(),userId:lq("userId",{length:255}).notNull().references(()=>t.id,{onDelete:"cascade"}),expires:lk("expires",{mode:"date"}).notNull()}),i=e.verificationTokensTable??lK("verificationToken",{identifier:lq("identifier",{length:255}).notNull(),token:lq("token",{length:255}).notNull(),expires:lk("expires",{mode:"date"}).notNull()},e=>({compositePk:lW({columns:[e.identifier,e.token]})})),s=e.authenticatorsTable??lK("authenticator",{credentialID:lq("credentialID",{length:255}).notNull().unique(),userId:lq("userId",{length:255}).notNull().references(()=>t.id,{onDelete:"cascade"}),providerAccountId:lq("providerAccountId",{length:255}).notNull(),credentialPublicKey:lq("credentialPublicKey",{length:255}).notNull(),counter:le("counter").notNull(),credentialDeviceType:lq("credentialDeviceType",{length:255}).notNull(),credentialBackedUp:oA("credentialBackedUp").notNull(),transports:lq("transports",{length:255})},e=>({compositePk:lW({columns:[e.userId,e.credentialID]})}));return{usersTable:t,accountsTable:r,sessionsTable:n,verificationTokensTable:i,authenticatorsTable:s}}(t);return{async createUser(t){let{id:n,...i}=t,s=nS(r).id.defaultFn,[a]=await e.insert(r).values(s?i:{...i,id:n}).$returningId();return e.select().from(r).where(sq(r.id,a?a.id:n)).then(e=>e[0])},getUser:async t=>e.select().from(r).where(sq(r.id,t)).then(e=>e.length>0?e[0]:null),getUserByEmail:async t=>e.select().from(r).where(sq(r.email,t)).then(e=>e.length>0?e[0]:null),createSession:async t=>(await e.insert(i).values(t),e.select().from(i).where(sq(i.sessionToken,t.sessionToken)).then(e=>e[0])),getSessionAndUser:async t=>e.select({session:i,user:r}).from(i).where(sq(i.sessionToken,t)).innerJoin(r,sq(r.id,i.userId)).then(e=>e.length>0?e[0]:null),async updateUser(t){if(!t.id)throw Error("No user id.");await e.update(r).set(t).where(sq(r.id,t.id));let[n]=await e.select().from(r).where(sq(r.id,t.id));if(!n)throw Error("No user found.");return n},updateSession:async t=>(await e.update(i).set(t).where(sq(i.sessionToken,t.sessionToken)),e.select().from(i).where(sq(i.sessionToken,t.sessionToken)).then(e=>e[0])),async linkAccount(t){await e.insert(n).values(t)},async getUserByAccount(t){let i=await e.select({account:n,user:r}).from(n).innerJoin(r,sq(n.userId,r.id)).where(sF(sq(n.provider,t.provider),sq(n.providerAccountId,t.providerAccountId))).then(e=>e[0]);return i?.user??null},async deleteSession(t){await e.delete(i).where(sq(i.sessionToken,t))},createVerificationToken:async t=>(await e.insert(s).values(t),e.select().from(s).where(sq(s.identifier,t.identifier)).then(e=>e[0])),async useVerificationToken(t){let r=await e.select().from(s).where(sF(sq(s.identifier,t.identifier),sq(s.token,t.token))).then(e=>e.length>0?e[0]:null);return r&&await e.delete(s).where(sF(sq(s.identifier,t.identifier),sq(s.token,t.token))),r},async deleteUser(t){await e.delete(r).where(sq(r.id,t))},async unlinkAccount(t){await e.delete(n).where(sF(sq(n.provider,t.provider),sq(n.providerAccountId,t.providerAccountId)))},getAccount:async(t,r)=>e.select().from(n).where(sF(sq(n.provider,r),sq(n.providerAccountId,t))).then(e=>e[0]??null),createAuthenticator:async t=>(await e.insert(a).values(t),await e.select().from(a).where(sq(a.credentialID,t.credentialID)).then(e=>e[0]??null)),getAuthenticator:async t=>await e.select().from(a).where(sq(a.credentialID,t)).then(e=>e[0]??null),listAuthenticatorsByUserId:async t=>await e.select().from(a).where(sq(a.userId,t)).then(e=>e),async updateAuthenticatorCounter(t,r){await e.update(a).set({counter:r}).where(sq(a.credentialID,t));let n=await e.select().from(a).where(sq(a.credentialID,t)).then(e=>e[0]);if(!n)throw Error("Authenticator not found.");return n}}}(e,t);if(rb(e,aQ))return function(e,t){let{usersTable:r,accountsTable:n,sessionsTable:i,verificationTokensTable:s,authenticatorsTable:a}=function(e={}){let t=e.usersTable??s_("user",{id:i1("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:i1("name"),email:i1("email").unique(),emailVerified:i7("emailVerified",{mode:"date"}),image:i1("image")}),r=e.accountsTable??s_("account",{userId:i1("userId").notNull().references(()=>t.id,{onDelete:"cascade"}),type:i1("type").$type().notNull(),provider:i1("provider").notNull(),providerAccountId:i1("providerAccountId").notNull(),refresh_token:i1("refresh_token"),access_token:i1("access_token"),expires_at:n7("expires_at"),token_type:i1("token_type"),scope:i1("scope"),id_token:i1("id_token"),session_state:i1("session_state")},e=>({compositePk:sO({columns:[e.provider,e.providerAccountId]})})),n=e.sessionsTable??s_("session",{sessionToken:i1("sessionToken").primaryKey(),userId:i1("userId").notNull().references(()=>t.id,{onDelete:"cascade"}),expires:i7("expires",{mode:"date"}).notNull()}),i=e.verificationTokensTable??s_("verificationToken",{identifier:i1("identifier").notNull(),token:i1("token").notNull(),expires:i7("expires",{mode:"date"}).notNull()},e=>({compositePk:sO({columns:[e.identifier,e.token]})})),s=e.authenticatorsTable??s_("authenticator",{credentialID:i1("credentialID").notNull().unique(),userId:i1("userId").notNull().references(()=>t.id,{onDelete:"cascade"}),providerAccountId:i1("providerAccountId").notNull(),credentialPublicKey:i1("credentialPublicKey").notNull(),counter:n7("counter").notNull(),credentialDeviceType:i1("credentialDeviceType").notNull(),credentialBackedUp:nU("credentialBackedUp").notNull(),transports:i1("transports")},e=>({compositePK:sO({columns:[e.userId,e.credentialID]})}));return{usersTable:t,accountsTable:r,sessionsTable:n,verificationTokensTable:i,authenticatorsTable:s}}(t);return{async createUser(t){let{id:n,...i}=t,s=nS(r).id.hasDefault;return e.insert(r).values(s?i:{...i,id:n}).returning().then(e=>e[0])},getUser:async t=>e.select().from(r).where(sq(r.id,t)).then(e=>e.length>0?e[0]:null),getUserByEmail:async t=>e.select().from(r).where(sq(r.email,t)).then(e=>e.length>0?e[0]:null),createSession:async t=>e.insert(i).values(t).returning().then(e=>e[0]),getSessionAndUser:async t=>e.select({session:i,user:r}).from(i).where(sq(i.sessionToken,t)).innerJoin(r,sq(r.id,i.userId)).then(e=>e.length>0?e[0]:null),async updateUser(t){if(!t.id)throw Error("No user id.");let[n]=await e.update(r).set(t).where(sq(r.id,t.id)).returning();if(!n)throw Error("No user found.");return n},updateSession:async t=>e.update(i).set(t).where(sq(i.sessionToken,t.sessionToken)).returning().then(e=>e[0]),async linkAccount(t){await e.insert(n).values(t)},async getUserByAccount(t){let i=await e.select({account:n,user:r}).from(n).innerJoin(r,sq(n.userId,r.id)).where(sF(sq(n.provider,t.provider),sq(n.providerAccountId,t.providerAccountId))).then(e=>e[0]);return i?.user??null},async deleteSession(t){await e.delete(i).where(sq(i.sessionToken,t))},createVerificationToken:async t=>e.insert(s).values(t).returning().then(e=>e[0]),useVerificationToken:async t=>e.delete(s).where(sF(sq(s.identifier,t.identifier),sq(s.token,t.token))).returning().then(e=>e.length>0?e[0]:null),async deleteUser(t){await e.delete(r).where(sq(r.id,t))},async unlinkAccount(t){await e.delete(n).where(sF(sq(n.provider,t.provider),sq(n.providerAccountId,t.providerAccountId)))},getAccount:async(t,r)=>e.select().from(n).where(sF(sq(n.provider,r),sq(n.providerAccountId,t))).then(e=>e[0]??null),createAuthenticator:async t=>e.insert(a).values(t).returning().then(e=>e[0]??null),getAuthenticator:async t=>e.select().from(a).where(sq(a.credentialID,t)).then(e=>e[0]??null),listAuthenticatorsByUserId:async t=>e.select().from(a).where(sq(a.userId,t)).then(e=>e),async updateAuthenticatorCounter(t,r){let n=await e.update(a).set({counter:r}).where(sq(a.credentialID,t)).returning().then(e=>e[0]);if(!n)throw Error("Authenticator not found.");return n}}}(e,t);if(rb(e,uT))return function(e,t){let{usersTable:r,accountsTable:n,sessionsTable:i,verificationTokensTable:s,authenticatorsTable:a}=function(e={}){let t=e.usersTable??c1("user",{id:cY("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:cY("name"),email:cY("email").unique(),emailVerified:cL("emailVerified",{mode:"timestamp_ms"}),image:cY("image")}),r=e.accountsTable??c1("account",{userId:cY("userId").notNull().references(()=>t.id,{onDelete:"cascade"}),type:cY("type").$type().notNull(),provider:cY("provider").notNull(),providerAccountId:cY("providerAccountId").notNull(),refresh_token:cY("refresh_token"),access_token:cY("access_token"),expires_at:cL("expires_at"),token_type:cY("token_type"),scope:cY("scope"),id_token:cY("id_token"),session_state:cY("session_state")},e=>({compositePk:ut({columns:[e.provider,e.providerAccountId]})})),n=e.sessionsTable??c1("session",{sessionToken:cY("sessionToken").primaryKey(),userId:cY("userId").notNull().references(()=>t.id,{onDelete:"cascade"}),expires:cL("expires",{mode:"timestamp_ms"}).notNull()}),i=e.verificationTokensTable??c1("verificationToken",{identifier:cY("identifier").notNull(),token:cY("token").notNull(),expires:cL("expires",{mode:"timestamp_ms"}).notNull()},e=>({compositePk:ut({columns:[e.identifier,e.token]})})),s=e.authenticatorsTable??c1("authenticator",{credentialID:cY("credentialID").notNull().unique(),userId:cY("userId").notNull().references(()=>t.id,{onDelete:"cascade"}),providerAccountId:cY("providerAccountId").notNull(),credentialPublicKey:cY("credentialPublicKey").notNull(),counter:cL("counter").notNull(),credentialDeviceType:cY("credentialDeviceType").notNull(),credentialBackedUp:cL("credentialBackedUp",{mode:"boolean"}).notNull(),transports:cY("transports")},e=>({compositePK:ut({columns:[e.userId,e.credentialID]})}));return{usersTable:t,accountsTable:r,sessionsTable:n,verificationTokensTable:i,authenticatorsTable:s}}(t);return{async createUser(t){let{id:n,...i}=t,s=nS(r).id.hasDefault;return e.insert(r).values(s?i:{...i,id:n}).returning().get()},getUser:async t=>await e.select().from(r).where(sq(r.id,t)).get()??null,getUserByEmail:async t=>await e.select().from(r).where(sq(r.email,t)).get()??null,createSession:async t=>e.insert(i).values(t).returning().get(),getSessionAndUser:async t=>await e.select({session:i,user:r}).from(i).where(sq(i.sessionToken,t)).innerJoin(r,sq(r.id,i.userId)).get()??null,async updateUser(t){if(!t.id)throw Error("No user id.");let n=await e.update(r).set(t).where(sq(r.id,t.id)).returning().get();if(!n)throw Error("User not found.");return n},updateSession:async t=>await e.update(i).set(t).where(sq(i.sessionToken,t.sessionToken)).returning().get()??null,async linkAccount(t){await e.insert(n).values(t).run()},async getUserByAccount(t){let i=await e.select({account:n,user:r}).from(n).innerJoin(r,sq(n.userId,r.id)).where(sF(sq(n.provider,t.provider),sq(n.providerAccountId,t.providerAccountId))).get();return i?.user??null},async deleteSession(t){await e.delete(i).where(sq(i.sessionToken,t)).run()},createVerificationToken:async t=>e.insert(s).values(t).returning().get(),useVerificationToken:async t=>await e.delete(s).where(sF(sq(s.identifier,t.identifier),sq(s.token,t.token))).returning().get()??null,async deleteUser(t){await e.delete(r).where(sq(r.id,t)).run()},async unlinkAccount(t){await e.delete(n).where(sF(sq(n.provider,t.provider),sq(n.providerAccountId,t.providerAccountId))).run()},getAccount:async(t,r)=>e.select().from(n).where(sF(sq(n.provider,r),sq(n.providerAccountId,t))).then(e=>e[0]??null),createAuthenticator:async t=>e.insert(a).values(t).returning().then(e=>e[0]??null),getAuthenticator:async t=>e.select().from(a).where(sq(a.credentialID,t)).then(e=>e[0]??null),listAuthenticatorsByUserId:async t=>e.select().from(a).where(sq(a.userId,t)).then(e=>e),async updateAuthenticatorCounter(t,r){let n=await e.update(a).set({counter:r}).where(sq(a.credentialID,t)).returning().then(e=>e[0]);if(!n)throw Error("Authenticator not found.");return n}}}(e,t);throw Error(`Unsupported database type (${typeof e}) in Auth.js Drizzle adapter.`)}(oe,{usersTable:a3,accountsTable:a4,sessionsTable:a5,verificationTokensTable:a8}),providers:[{id:"google",name:"Google",type:"oidc",issuer:"https://accounts.google.com",style:{brandColor:"#1a73e8"},options:{clientId:process.env.AUTH_GOOGLE_ID,clientSecret:process.env.AUTH_GOOGLE_SECRET,authorization:{params:{prompt:"consent",access_type:"offline",response_type:"code"}}}}],session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:t,account:r})=>(t&&(e.id=t.id,e.role=t.role),r&&(e.accessToken=r.access_token),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id,e.user.role=t.role),e)}}),m7=m8(e=>{let{pathname:t}=e.nextUrl,r=mK.NextResponse.next();return r.headers.set("x-pathname",t),r.headers.set("Content-Security-Policy","default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self'; connect-src 'self';"),r.headers.set("Strict-Transport-Security","max-age=31536000; includeSubDomains"),r.headers.set("X-Frame-Options","DENY"),r.headers.set("X-Content-Type-Options","nosniff"),r.headers.set("Referrer-Policy","strict-origin-when-cross-origin"),r.headers.set("Permissions-Policy","camera=(), microphone=(), geolocation=()"),((e,t)=>{if(t.startsWith("/admin")){if("/admin/unauthorized"===t)return mK.NextResponse.next();let r=e.auth;if(!r?.user){let r=new URL("/api/auth/signin",e.url);return r.searchParams.set("callbackUrl",t),mK.NextResponse.redirect(r)}let n=r.user.role;if(n!==a9.ADMIN&&n!==a9.SUPER_ADMIN)return mK.NextResponse.redirect(new URL("/admin/unauthorized",e.url))}})(e,t)??r});e.s(["config",0,{matcher:["/((?!api|_next/static|_next/image|favicon.ico).*)"]},"default",0,m7],24634);var ye=e.i(24634);Object.values({NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401});let yt={...ye},yr="/proxy",yn=yt.proxy||yt.default;if("function"!=typeof yn)throw new class extends Error{constructor(e){super(e),this.stack=""}}(`The Proxy file "${yr}" must export a function named \`proxy\` or a default function.`);e.s(["default",0,e=>tr({...e,page:yr,handler:async(...e)=>{try{return await yn(...e)}catch(i){let t=e[0],r=new URL(t.url),n=r.pathname+r.search;throw await m(i,{path:n,method:t.method,headers:Object.fromEntries(t.headers.entries())},{routerKind:"Pages Router",routePath:"/proxy",routeType:"proxy",revalidateReason:void 0}),i}}})],26563)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__460b78e5._.js.map